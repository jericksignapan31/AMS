import{a as me,b as V,c as gt,d as bt,e as ft,f as Ct}from"./chunk-PXSK22RB.js";import{a as Se,c as dt,d as ut}from"./chunk-7VYTFUIN.js";import{$ as oe,F as Q,G as K,H as J,I as G,R as X,U as Z,V as ee,Y as te,Z as ne,aa as ie,ba as re,ca as ae,da as le,pa as se,x as q,y as Y}from"./chunk-5M6DCCKF.js";import{Hb as H,Ib as $,Nb as j,Oa as y,Ob as W,Sa as U,db as F,fb as A,gb as R,jb as z,l as L}from"./chunk-TVM6ALZD.js";import{Ab as _,Ac as C,Bb as i,Cb as r,Db as b,Kb as f,Ob as d,Pb as p,Ta as g,Tb as ye,Ub as we,Vb as ve,bc as u,cb as h,cc as E,e as xe,fc as mt,ga as s,gc as T,ha as c,hb as B,hc as I,ic as M,jb as pt,lb as je,lc as O,mc as x,nb as S}from"./chunk-ZDEZPEUG.js";var w=xe(Se());var St=["dt"],Et=()=>["FirstName","email"],Tt=()=>({"min-width":"100rem"}),It=()=>[10,20,30];function Mt(l,t){if(l&1){let e=f();i(0,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.openNewUserDialog())}),r(),i(1,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.deleteSelectedUsers())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedUsers||!e.selectedUsers.length)}}function kt(l,t){if(l&1){let e=f();i(0,"p-button",11),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function Pt(l,t){if(l&1){let e=f();i(0,"div",12)(1,"h5",13),u(2,"Users Management"),r(),i(3,"div",14)(4,"p-iconfield"),b(5,"p-inputicon",15),i(6,"input",16),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filterUsers())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function Dt(l,t){l&1&&(i(0,"tr")(1,"th",17),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",18),u(4," Name "),b(5,"p-sortIcon",19),r(),i(6,"th",20),u(7," Email "),b(8,"p-sortIcon",21),r(),i(9,"th",22),u(10," Department "),b(11,"p-sortIcon",23),r(),i(12,"th",24),u(13," Campus "),b(14,"p-sortIcon",25),r(),i(15,"th",26),u(16,"Actions"),r()())}function Nt(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",17),b(2,"p-tableCheckbox",27),r(),i(3,"td"),u(4),r(),i(5,"td"),u(6),r(),i(7,"td"),u(8),r(),i(9,"td"),u(10),r(),i(11,"td")(12,"div",28)(13,"p-button",29),d("click",function(){let n=s(e).$implicit,a=p();return c(a.viewUser(n))}),r(),i(14,"p-button",30),d("click",function(){let n=s(e).$implicit,a=p();return c(a.editUser(n))}),r(),i(15,"p-button",31),d("click",function(){let n=s(e).$implicit,a=p();return c(a.deleteUser(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),mt("",e.firstName||e.FirstName," ",e.middleName||e.MiddleName||""," ",e.lastName||e.LastName),g(2),E(e.email),g(2),E(e.Department||"N/A"),g(2),E(e.Campus||"N/A")}}function Vt(l,t){l&1&&(i(0,"tr")(1,"td",32),u(2,"No users found"),r()())}var We=class l{constructor(t,e,o){this.userService=t;this.messageService=e;this.userContextService=o}table;users=[];filteredUsers=[];selectedUsers=[];searchValue="";loading=!1;currentUserRole="";campuses=[];departments=[];ngOnInit(){console.log("UsersComponent initialized"),this.loadUsers(),this.loadCurrentUserRole(),this.loadCampuses(),this.loadDepartments()}loadDepartments(){console.log("Loading departments..."),this.userService.getDepartments().subscribe({next:t=>{console.log("API Department Response:",t),console.table(t),this.departments=Array.isArray(t)?t:t.data||[],console.log("Departments set:",this.departments)},error:t=>{console.error("Error loading departments:",t)}})}loadCampuses(){console.log("Loading campuses..."),this.userService.getCampuses().subscribe({next:t=>{console.log("Campuses loaded:",t),this.campuses=Array.isArray(t)?t:t.data||[],console.log("Campuses set:",this.campuses)},error:t=>{console.error("Error loading campuses:",t)}})}loadCurrentUserRole(){let t=this.userContextService.getUserId();console.log("Loading current user role, userId:",t),t&&this.userService.getUserById(t).subscribe({next:e=>{this.currentUserRole=e.role||"",console.log("Current user role:",this.currentUserRole)},error:e=>{console.error("Error loading current user:",e)}})}loadUsers(){console.log("Loading users..."),this.loading=!0,this.userService.getAllUsers().subscribe({next:t=>{console.log("Users loaded:",t),this.users=Array.isArray(t)?t:t.data||[],this.filteredUsers=[...this.users],this.loading=!1,console.log("Users set:",this.users)},error:t=>{console.error("Error loading users:",t),w.default.fire({title:"Error",text:"Failed to load users: "+(t.error?.message||t.message),icon:"error"}),this.loading=!1}})}filterUsers(){if(!this.searchValue.trim()){this.filteredUsers=[...this.users];return}let t=this.searchValue.toLowerCase();this.filteredUsers=this.users.filter(e=>e.FirstName?.toLowerCase().includes(t)||e.LastName?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.Department?.toLowerCase().includes(t))}onSelectionChange(t){console.log("Selection changed:",t),console.log("Selected users:",this.selectedUsers),this.selectedUsers&&this.selectedUsers.length>0&&console.log("Selected user IDs:",this.selectedUsers.map(e=>e.userId||e.user_id))}viewUser(t){let e=new Date(t.userCreated).toLocaleDateString();w.default.fire({title:t.firstName+" "+(t.middleName||"")+" "+t.lastName,html:`
                <div style="text-align: left;">
                    <p><strong>Email:</strong> ${t.email}</p>
                    <p><strong>Contact Number:</strong> ${t.contactNumber||"N/A"}</p>
                    <p><strong>Role:</strong> ${t.role||"N/A"}</p>
                    <p><strong>Active:</strong> <span style="color: ${t.isActive?"green":"red"}">${t.isActive?"Yes":"No"}</span></p>
                    <p><strong>Created:</strong> ${e}</p>
                </div>
            `,icon:"info",confirmButtonText:"Close"})}editUser(t){let e={firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,email:t.email,contactNumber:t.contactNumber,role:t.role,isActive:t.isActive};w.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 700px; margin: 4 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u270E Edit User</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">First Name</label>
                            <input id="firstName" type="text" value="${e.firstName||""}" placeholder="First" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Middle Name</label>
                            <input id="middleName" type="text" value="${e.middleName||""}" placeholder="Middle" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Last Name</label>
                            <input id="lastName" type="text" value="${e.lastName||""}" placeholder="Last" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Email</label>
                            <input id="email" type="email" value="${e.email||""}" placeholder="email@example.com" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Contact</label>
                            <input id="contactNumber" type="text" value="${e.contactNumber||""}" placeholder="+63" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Role</label>
                            <select id="role" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; cursor: pointer; transition: border-color 0.2s;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="SuperAdmin" ${e.role==="SuperAdmin"?"selected":""}>SuperAdmin</option>
                                <option value="CampusAdmin" ${e.role==="CampusAdmin"?"selected":""}>CampusAdmin</option>
                                <option value="Faculty" ${e.role==="Faculty"?"selected":""}>Faculty</option>
                                <option value="LabTech" ${e.role==="LabTech"?"selected":""}>LabTech</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px; padding-top: 12px; border-top: 1px solid #f0f0f0; cursor: pointer;" onclick="document.getElementById('isActive').click();">
                        <label style="font-weight: 500; color: #555; margin: 0; font-size: 13px; flex: 1; cursor: pointer;">Active Status</label>
                        <div style="position: relative; display: inline-block; width: 48px; height: 24px;">
                            <input id="isActive" type="checkbox" ${e.isActive?"checked":""} style="opacity: 0; width: 0; height: 0; cursor: pointer;" />
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: ${e.isActive?"#667eea":"#ddd"}; transition: 0.3s; border-radius: 24px;"></span>
                            <span style="position: absolute; content: ''; height: 20px; width: 20px; left: ${e.isActive?"24px":"2px"}; bottom: 2px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                        </div>
                    </div>
                </div>
            `,width:"750px",showCancelButton:!0,confirmButtonText:"Save",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let o=document.getElementById("firstName");o&&o.focus();let n=document.getElementById("isActive"),a=n?.parentElement?.parentElement,m=n?.parentElement?.querySelector("span:nth-child(2)"),ce=n?.parentElement?.querySelector("span:nth-child(3)");n&&m&&ce&&a&&(n.addEventListener("change",()=>{m.style.backgroundColor=n.checked?"#667eea":"#ddd",ce.style.left=n.checked?"24px":"2px"}),a.addEventListener("click",D=>{D.target!==n&&(n.checked=!n.checked,n.dispatchEvent(new Event("change",{bubbles:!0})))}),m?.addEventListener("click",()=>{n.checked=!n.checked,n.dispatchEvent(new Event("change",{bubbles:!0}))}),ce?.addEventListener("click",()=>{n.checked=!n.checked,n.dispatchEvent(new Event("change",{bubbles:!0}))}))}}).then(o=>{if(o.isConfirmed){let n=document.getElementById("firstName").value,a=document.getElementById("middleName").value,m=document.getElementById("lastName").value,ce=document.getElementById("email").value,D=document.getElementById("contactNumber").value,v=document.getElementById("role").value,Ce=document.getElementById("isActive").checked,de={firstName:n||t.firstName,middleName:a||t.middleName,lastName:m||t.lastName,email:ce||t.email,contactNumber:D||t.contactNumber,role:v||t.role,isActive:Ce};this.userService.updateUser(t.userId,de).subscribe({next:()=>{w.default.fire({title:"Success!",text:"User updated successfully",icon:"success"}),this.loadUsers()},error:pe=>{w.default.fire({title:"Error",text:"Failed to update user: "+(pe.error?.message||pe.message),icon:"error"})}})}})}deleteUser(t){let e=t.userId||t.user_id;console.log("Deleting single user:",e,"Full user object:",t),w.default.fire({title:"Confirm Delete",text:"Are you sure you want to delete this user?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"}).then(o=>{o.isConfirmed&&this.userService.deleteUser(e).subscribe({next:()=>{console.log("User deleted successfully:",e),w.default.fire({title:"Deleted!",text:"User has been deleted successfully.",icon:"success"}),this.loadUsers()},error:n=>{console.error("Error deleting user:",e,n),w.default.fire({title:"Error",text:"Failed to delete user: "+(n.error?.message||n.message),icon:"error"})}})})}openNewUserDialog(){let t=this.userContextService.getUserId();if(!t){let e=localStorage.getItem("currentUser");if(e){let o=JSON.parse(e);t=o.userId||o.user_id||o.id}}if(!t){w.default.fire({title:"Error",text:"User ID not found. Please log in again.",icon:"error"});return}this.userService.getUserById(t).subscribe({next:e=>{console.log("\u{1F535} New User Dialog Opened"),console.log("Logged-in User Data:",e),console.log("Campus:",e.campus||e.Campus),console.log("Department:",e.department||e.Department),sessionStorage.setItem("loggedInUserData",JSON.stringify(e)),this.showNewUserDialog()},error:e=>{console.error("Error fetching user data:",e),this.showNewUserDialog()}})}showNewUserDialog(){let t={userName:"",email:"",password:"",firstName:"",lastName:"",middleName:"",contactNumber:"",department:"",campus:"",role:"CampusAdmin",isActive:!0,isStaff:!1,isSuperUser:!1},e=this.userContextService.getUserId(),o=JSON.parse(sessionStorage.getItem("loggedInUserData")||"{}"),n=this.currentUserRole==="CampusAdmin",a=o.campus?.campusId||o.campusId||"",m=o.campus?.campusName||o.campusName||"";console.log("CampusAdmin creating user:",n),console.log("CampusAdmin Campus ID:",a),console.log("CampusAdmin Campus Name:",m);let ce=n?this.departments.filter(D=>D.campus?.campusId===a):this.departments;w.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 700px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u2795 Add New User</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">First Name *</label>
                            <input id="newFirstName" type="text" placeholder="First" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Middle Name</label>
                            <input id="newMiddleName" type="text" placeholder="Middle" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Last Name *</label>
                            <input id="newLastName" type="text" placeholder="Last" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Username *</label>
                            <input id="newUserName" type="text" placeholder="username" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Email *</label>
                            <input id="newEmail" type="email" placeholder="email@example.com" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Password *</label>
                            <input id="newPassword" type="password" placeholder="\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Contact Number</label>
                            <input id="newContactNumber" type="text" placeholder="+63" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    ${n?`
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department *</label>
                            <select id="newDepartment" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="">-- Select Department --</option>
                                ${ce.map(D=>`<option value="${D.departmentId}">${D.departmentName}</option>`).join("")}
                            </select>
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus <span style="color: #999; font-size: 11px;">(Auto)</span></label>
                            <input id="newCampus" type="text" value="${m}" placeholder="Campus" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #ccc; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; color: #999; cursor: not-allowed;" disabled />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Role *</label>
                            <select id="newRole" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="Faculty">Faculty</option>
                                <option value="LabTech">LabTech</option>
                            </select>
                        </div>
                    </div>
                    <input id="newCampusHidden" type="hidden" value="${a}" />
                    `:`
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department * <span style="color: #999; font-size: 11px;" id="deptLockStatus">(Select Campus First)</span></label>
                            <select id="newDepartment" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #ccc; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; color: #999; cursor: not-allowed;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" disabled>
                                <option value="">-- Select Department --</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus *</label>
                            <select id="newCampus" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="">-- Select Campus --</option>
                                ${this.campuses.map(D=>`<option value="${D.campusId}">${D.campusName}</option>`).join("")}
                            </select>
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Role * ${this.currentUserRole==="SuperAdmin"?'<span style="color: #999; font-size: 11px;">(Auto)</span>':""}</label>
                            ${this.currentUserRole==="SuperAdmin"?'<input id="newRole" type="text" value="CampusAdmin" placeholder="Role" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #ccc; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; color: #999; cursor: not-allowed;" disabled />':`<select id="newRole" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                    <option value="Faculty">Faculty</option>
                                    <option value="LabTech">LabTech</option>
                                    <option value="CampusAdmin" selected>CampusAdmin</option>
                                    <option value="SuperAdmin">SuperAdmin</option>
                                </select>`}
                        </div>
                    </div>
                    `}
                    <div style="display: flex; align-items: center; gap: 12px; padding-top: 12px; border-top: 1px solid #f0f0f0;">
                        <label style="font-weight: 500; color: #555; margin: 0; font-size: 13px; flex: 1;">Active Status</label>
                        <div style="position: relative; display: inline-block; width: 48px; height: 24px;">
                            <input id="newIsActive" type="checkbox" checked style="opacity: 0; width: 0; height: 0; cursor: pointer;" />
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #667eea; transition: 0.3s; border-radius: 24px;"></span>
                            <span style="position: absolute; content: ''; height: 20px; width: 20px; left: 24px; bottom: 2px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                        </div>
                    </div>
                </div>
            `,width:"750px",showCancelButton:!0,confirmButtonText:"Create User",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let D=document.getElementById("newFirstName");if(D&&D.focus(),!n){let _e=document.getElementById("newCampus"),N=document.getElementById("newDepartment"),Ee=document.getElementById("deptLockStatus");_e&&N&&_e.addEventListener("change",ze=>{let Te=ze.target.value;if(Te){let He=this.departments.filter(ue=>ue.campus&&ue.campus.campusId===Te);N.innerHTML='<option value="">-- Select Department --</option>',He.forEach(ue=>{let he=document.createElement("option");he.value=ue.departmentId,he.textContent=ue.departmentName,N.appendChild(he)}),N.disabled=!1,N.style.color="#333",N.style.borderBottomColor="#e0e0e0",N.style.cursor="pointer",Ee.textContent=""}else N.disabled=!0,N.innerHTML='<option value="">-- Select Department --</option>',N.style.color="#999",N.style.borderBottomColor="#ccc",N.style.cursor="not-allowed",Ee.textContent="(Select Campus First)"})}let v=document.getElementById("newIsActive"),Ce=v?.parentElement?.parentElement,de=v?.parentElement?.querySelector("span:nth-child(2)"),pe=v?.parentElement?.querySelector("span:nth-child(3)");v&&de&&pe&&Ce&&(v.addEventListener("change",()=>{de.style.backgroundColor=v.checked?"#667eea":"#ddd",pe.style.left=v.checked?"24px":"2px"}),Ce.addEventListener("click",_e=>{_e.target!==v&&(v.checked=!v.checked,v.dispatchEvent(new Event("change",{bubbles:!0})))}),de?.addEventListener("click",()=>{v.checked=!v.checked,v.dispatchEvent(new Event("change",{bubbles:!0}))}),pe?.addEventListener("click",()=>{v.checked=!v.checked,v.dispatchEvent(new Event("change",{bubbles:!0}))}))}}).then(D=>{if(D.isConfirmed){let v=document.getElementById("newFirstName"),Ce=document.getElementById("newLastName"),de=document.getElementById("newUserName"),pe=document.getElementById("newEmail"),_e=document.getElementById("newPassword"),N=document.getElementById("newMiddleName"),Ee=document.getElementById("newContactNumber"),ze=document.getElementById("newDepartment"),Te=v?v.value.trim():"",He=Ce?Ce.value.trim():"",ue=de?de.value.trim():"",he=pe?pe.value.trim():"",Ze=_e?_e.value.trim():"",xt=N?N.value.trim():"",yt=Ee?Ee.value.trim():"",ot=ze?ze.value:"",it=document.getElementById("newCampus"),rt=document.getElementById("newCampusHidden"),$e="";n?$e=rt?rt.value:a:$e=it?it.value:"";let at=document.getElementById("newRole"),wt=at?at.value:"",lt=document.getElementById("newIsActive"),vt=lt?lt.checked:!0;if(!Te){w.default.fire({title:"Error",text:"First Name is required",icon:"error"});return}if(!He){w.default.fire({title:"Error",text:"Last Name is required",icon:"error"});return}if(!ue){w.default.fire({title:"Error",text:"Username is required",icon:"error"});return}if(!he||!this.isValidEmail(he)){w.default.fire({title:"Error",text:"Valid email is required",icon:"error"});return}if(!Ze||Ze.length<6){w.default.fire({title:"Error",text:"Password must be at least 6 characters",icon:"error"});return}if(!ot){w.default.fire({title:"Error",text:"Department is required",icon:"error"});return}if(!$e){w.default.fire({title:"Error",text:"Campus is required",icon:"error"});return}let st={userName:ue,email:he,password:Ze,firstName:Te,lastName:He,middleName:xt||void 0,contactNumber:yt||void 0,department:ot,campus:$e,role:wt,isActive:vt,profilePicture:void 0};console.log("\u{1F4E4} Creating user with payload:",st),this.userService.createUser(st).subscribe({next:()=>{w.default.fire({title:"Success!",text:"User created successfully",icon:"success"}),this.loadUsers()},error:ct=>{w.default.fire({title:"Error",text:"Failed to create user: "+(ct.error?.message||ct.message),icon:"error"})}})}})}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}deleteSelectedUsers(){if(!this.selectedUsers||this.selectedUsers.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select users to delete"});return}w.default.fire({title:"Confirm Delete",text:`Are you sure you want to delete ${this.selectedUsers.length} user(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete All",cancelButtonText:"Cancel"}).then(t=>{if(t.isConfirmed){let e=0,o=0;this.selectedUsers.forEach(n=>{let a=n.userId||n.user_id;console.log("Deleting user:",a,"Full user object:",n),this.userService.deleteUser(a).subscribe({next:()=>{e++,console.log(`User deleted: ${a} (${e}/${this.selectedUsers.length})`),e+o===this.selectedUsers.length&&(this.selectedUsers=[],this.loadUsers(),w.default.fire({title:"Deleted!",text:`${e} user(s) deleted successfully.`,icon:"success"}))},error:m=>{o++,console.error(`Failed to delete user ${a}:`,m),e+o===this.selectedUsers.length&&(this.selectedUsers=[],this.loadUsers(),w.default.fire({title:"Partial Delete",text:`${e} user(s) deleted, ${o} failed.`,icon:"warning"}))}})})}})}exportCSV(){if(this.filteredUsers.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"No data to export"});return}let t=this.generateCSV(this.filteredUsers),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),n=URL.createObjectURL(e);o.setAttribute("href",n),o.setAttribute("download","users_export.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),this.messageService.add({severity:"success",summary:"Success",detail:"Users exported to CSV"})}generateCSV(t){let e=["Name","Email","Department","Campus","Role"],o=t.map(a=>[`${a.FirstName||""} ${a.LastName||""}`,a.email||"",a.Department||"",a.Campus||"",a.role||""]);return[e.join(","),...o.map(a=>a.map(m=>`"${m}"`).join(","))].join(`
`)}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(dt))};static \u0275cmp=B({type:l,selectors:[["app-users"]],viewQuery:function(e,o){if(e&1&&ye(St,5),e&2){let n;we(n=ve())&&(o.table=n.first)}},features:[O([y])],decls:15,vars:12,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","userId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} users",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","emptymessage"],["label","New User","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search users...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","FirstName",2,"min-width","15rem"],["field","FirstName"],["pSortableColumn","email",2,"min-width","15rem"],["field","email"],["pSortableColumn","Department",2,"min-width","12rem"],["field","Department"],["pSortableColumn","Campus",2,"min-width","12rem"],["field","Campus"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","6",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",6),S(2,Mt,2,1,"ng-template",null,0,C)(4,kt,1,0,"ng-template",null,1,C),r(),i(6,"p-table",7,2),M("selectionChange",function(m){return s(n),I(o.selectedUsers,m)||(o.selectedUsers=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(8,Pt,7,1,"ng-template",null,3,C)(10,Dt,17,0,"ng-template",null,4,C)(12,Nt,16,7,"ng-template",null,5,C)(14,Vt,3,0,"ng-template",8),r()}e&2&&(g(6),_("value",o.filteredUsers)("rows",10)("paginator",!0)("globalFilterFields",x(9,Et))("tableStyle",x(10,Tt)),T("selection",o.selectedUsers),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(11,It)))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[".users-container[_ngcontent-%COMP%]{width:100%}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;border-bottom:2px solid #dee2e6;padding:1rem}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]:hover{background-color:#f1f3f5}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;transition:background-color .2s ease}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:var(--highlight-bg)!important;cursor:pointer}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#212529;vertical-align:middle}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr.row-selected[_ngcontent-%COMP%]{background-color:var(--primary-color-text)!important;color:var(--primary-color)!important;border-left:3px solid var(--primary-color)!important}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr.row-selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--primary-color)!important}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-emptymessage[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;background-color:#f8f9fa}.users-table[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #dee2e6;padding:1rem}.users-table[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]   .p-paginator-left-content[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]   .p-paginator-right-content[_ngcontent-%COMP%]{color:#495057}.users-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding:0}.users-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a1a1a;margin:0;display:flex;align-items:center;gap:.5rem}.users-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.users-search-bar[_ngcontent-%COMP%]{margin-bottom:1.5rem}.users-search-bar[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]{width:100%}.users-search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:2px solid #dee2e6;border-radius:6px;font-size:1rem;transition:all .3s ease}.users-search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;background-color:#f8f9ff}.users-search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.users-search-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#adb5bd;left:.75rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-rounded{width:2.5rem;height:2.5rem}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-rounded:hover{transform:scale(1.05)}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-info{background-color:#17a2b8;border-color:#17a2b8}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-info:hover{background-color:#138496}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-warning{background-color:#ffc107;border-color:#ffc107;color:#000}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-warning:hover{background-color:#e0a800}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-danger{background-color:#dc3545;border-color:#dc3545}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-danger:hover{background-color:#c82333}.card[_ngcontent-%COMP%]{border-radius:8px;border:none;box-shadow:0 2px 8px #00000014;overflow:hidden}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #f0f0f0;background-color:#fff}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1a1a1a;margin:0}@media (max-width: 768px){.users-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{font-size:.875rem;padding:.75rem}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.75rem;font-size:.875rem}}"]})};var k=xe(Se());var Bt=["dt"],Ot=()=>["campusName","campusDirector"],Lt=()=>({"min-width":"100rem"}),Ut=()=>[10,20,30];function Ft(l,t){if(l&1){let e=f();i(0,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.openNewCampusDialog())}),r(),i(1,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.deleteSelectedCampuses())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedCampuses||!e.selectedCampuses.length)}}function At(l,t){if(l&1){let e=f();i(0,"p-button",11),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function Rt(l,t){if(l&1){let e=f();i(0,"div",12)(1,"h5",13),u(2,"Campuses Management"),r(),i(3,"div",14)(4,"p-iconfield"),b(5,"p-inputicon",15),i(6,"input",16),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filterCampuses())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function zt(l,t){l&1&&(i(0,"tr")(1,"th",17),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",18),u(4," Campus Name "),b(5,"p-sortIcon",19),r(),i(6,"th",20),u(7," Campus Director "),b(8,"p-sortIcon",21),r(),i(9,"th",22),u(10,"Actions"),r()())}function Ht(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",17),b(2,"p-tableCheckbox",23),r(),i(3,"td"),u(4),r(),i(5,"td"),u(6),r(),i(7,"td")(8,"div",24)(9,"p-button",25),d("click",function(){let n=s(e).$implicit,a=p();return c(a.viewCampus(n))}),r(),i(10,"p-button",26),d("click",function(){let n=s(e).$implicit,a=p();return c(a.editCampus(n))}),r(),i(11,"p-button",27),d("click",function(){let n=s(e).$implicit,a=p();return c(a.deleteCampus(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),E(e.campusName),g(2),E(e.campusDirector)}}function $t(l,t){l&1&&(i(0,"tr")(1,"td",28),u(2,"No campuses found"),r()())}var qe=class l{constructor(t,e){this.userService=t;this.messageService=e}table;campuses=[];filteredCampuses=[];selectedCampuses=[];searchValue="";loading=!1;ngOnInit(){console.log("CampusesComponent initialized"),this.loadCampuses()}loadCampuses(){console.log("Loading campuses..."),this.loading=!0,this.userService.getCampuses().subscribe({next:t=>{console.log("Campuses loaded:",t),this.campuses=Array.isArray(t)?t:t.data||[],this.filteredCampuses=[...this.campuses],this.loading=!1,console.log("Campuses set:",this.campuses)},error:t=>{console.error("Error loading campuses:",t),k.default.fire({title:"Error",text:"Failed to load campuses: "+(t.error?.message||t.message),icon:"error"}),this.loading=!1}})}filterCampuses(){if(!this.searchValue.trim()){this.filteredCampuses=[...this.campuses];return}let t=this.searchValue.toLowerCase();this.filteredCampuses=this.campuses.filter(e=>e.campusName?.toLowerCase().includes(t)||e.campusDirector?.toLowerCase().includes(t))}onSelectionChange(t){console.log("Selection changed:",t),console.log("Selected campuses:",this.selectedCampuses),this.selectedCampuses&&this.selectedCampuses.length>0&&console.log("Selected campus IDs:",this.selectedCampuses.map(e=>e.campusId))}viewCampus(t){let e=new Date(t.campusCreated).toLocaleDateString(),o=new Date(t.campusUpdated).toLocaleDateString();k.default.fire({title:t.campusName,html:`
                <div style="text-align: left;">
                    <p><strong>Campus Director:</strong> ${t.campusDirector||"N/A"}</p>
                    <p><strong>Created:</strong> ${e}</p>
                    <p><strong>Updated:</strong> ${o}</p>
                </div>
            `,icon:"info",confirmButtonText:"Close"})}editCampus(t){let e={campusName:t.campusName,campusDirector:t.campusDirector};k.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u270E Edit Campus</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Name *</label>
                            <input id="campusName" type="text" value="${e.campusName}" placeholder="Campus Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Director *</label>
                            <input id="campusDirector" type="text" value="${e.campusDirector}" placeholder="Director Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Update Campus",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let o=document.getElementById("campusName");o&&o.focus()}}).then(o=>{if(o.isConfirmed){let n=document.getElementById("campusName").value.trim(),a=document.getElementById("campusDirector").value.trim();if(!n){k.default.fire({title:"Error",text:"Campus Name is required",icon:"error"});return}if(!a){k.default.fire({title:"Error",text:"Campus Director is required",icon:"error"});return}let m={campusName:n,campusDirector:a};this.userService.updateCampus(t.campusId,m).subscribe({next:()=>{k.default.fire({title:"Success!",text:"Campus updated successfully",icon:"success"}),this.loadCampuses()},error:ce=>{k.default.fire({title:"Error",text:"Failed to update campus: "+(ce.error?.message||ce.message),icon:"error"})}})}})}deleteCampus(t){let e=t.campusId;console.log("Deleting single campus:",e,"Full campus object:",t),k.default.fire({title:"Confirm Delete",text:"Are you sure you want to delete this campus?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"}).then(o=>{o.isConfirmed&&this.userService.deleteCampus(e).subscribe({next:()=>{console.log("Campus deleted successfully:",e),k.default.fire({title:"Deleted!",text:"Campus has been deleted successfully.",icon:"success"}),this.loadCampuses()},error:n=>{console.error("Error deleting campus:",e,n),k.default.fire({title:"Error",text:"Failed to delete campus: "+(n.error?.message||n.message),icon:"error"})}})})}openNewCampusDialog(){k.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u2795 Add New Campus</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Name *</label>
                            <input id="newCampusName" type="text" placeholder="Campus Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Director *</label>
                            <input id="newCampusDirector" type="text" placeholder="Director Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Create Campus",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let t=document.getElementById("newCampusName");t&&t.focus()}}).then(t=>{if(t.isConfirmed){let e=document.getElementById("newCampusName").value.trim(),o=document.getElementById("newCampusDirector").value.trim();if(!e){k.default.fire({title:"Error",text:"Campus Name is required",icon:"error"});return}if(!o){k.default.fire({title:"Error",text:"Campus Director is required",icon:"error"});return}let n={campusName:e,campusDirector:o};this.userService.createCampus(n).subscribe({next:()=>{k.default.fire({title:"Success!",text:"Campus created successfully",icon:"success"}),this.loadCampuses()},error:a=>{k.default.fire({title:"Error",text:"Failed to create campus: "+(a.error?.message||a.message),icon:"error"})}})}})}deleteSelectedCampuses(){if(!this.selectedCampuses||this.selectedCampuses.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select campuses to delete"});return}k.default.fire({title:"Confirm Delete",text:`Are you sure you want to delete ${this.selectedCampuses.length} campus(es)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete All",cancelButtonText:"Cancel"}).then(t=>{if(t.isConfirmed){let e=0,o=0;this.selectedCampuses.forEach(n=>{let a=n.campusId;console.log("Deleting campus:",a),this.userService.deleteCampus(a).subscribe({next:()=>{e++,console.log(`Campus deleted: ${a} (${e}/${this.selectedCampuses.length})`),e+o===this.selectedCampuses.length&&(this.selectedCampuses=[],this.loadCampuses(),k.default.fire({title:"Deleted!",text:`${e} campus(es) deleted successfully.`,icon:"success"}))},error:m=>{o++,console.error(`Failed to delete campus ${a}:`,m),e+o===this.selectedCampuses.length&&(this.selectedCampuses=[],this.loadCampuses(),k.default.fire({title:"Partial Delete",text:`${e} campus(es) deleted, ${o} failed.`,icon:"warning"}))}})})}})}exportCSV(){if(this.filteredCampuses.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"No data to export"});return}let t=this.generateCSV(this.filteredCampuses),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),n=URL.createObjectURL(e);o.setAttribute("href",n),o.setAttribute("download","campuses_export.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),this.messageService.add({severity:"success",summary:"Success",detail:"Campuses exported to CSV"})}generateCSV(t){let e=["Campus Name","Campus Director"],o=t.map(a=>[a.campusName||"",a.campusDirector||""]);return[e.join(","),...o.map(a=>a.map(m=>`"${m}"`).join(","))].join(`
`)}static \u0275fac=function(e){return new(e||l)(h(V),h(y))};static \u0275cmp=B({type:l,selectors:[["app-campuses"]],viewQuery:function(e,o){if(e&1&&ye(Bt,5),e&2){let n;we(n=ve())&&(o.table=n.first)}},features:[O([y])],decls:15,vars:12,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","campusId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} campuses",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","emptymessage"],["label","New Campus","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search campuses...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","campusName",2,"min-width","15rem"],["field","campusName"],["pSortableColumn","campusDirector",2,"min-width","15rem"],["field","campusDirector"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","4",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",6),S(2,Ft,2,1,"ng-template",null,0,C)(4,At,1,0,"ng-template",null,1,C),r(),i(6,"p-table",7,2),M("selectionChange",function(m){return s(n),I(o.selectedCampuses,m)||(o.selectedCampuses=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(8,Rt,7,1,"ng-template",null,3,C)(10,zt,11,0,"ng-template",null,4,C)(12,Ht,12,3,"ng-template",null,5,C)(14,$t,3,0,"ng-template",8),r()}e&2&&(g(6),_("value",o.filteredCampuses)("rows",10)("paginator",!0)("globalFilterFields",x(9,Ot))("tableStyle",x(10,Lt)),T("selection",o.selectedCampuses),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(11,Ut)))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:hover{opacity:.8}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}p-table[_ngcontent-%COMP%]     .p-input-icon-left>input{padding-left:2.5rem}p-table[_ngcontent-%COMP%]     .p-input-icon-left>.p-input-icon{left:.75rem}"]})};var P=xe(Se());var jt=["dt"],Wt=()=>["departmentName","campus.campusName"],qt=()=>({"min-width":"100rem"}),Yt=()=>[10,20,30];function Qt(l,t){if(l&1){let e=f();i(0,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.openNewDepartmentDialog())}),r(),i(1,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.deleteSelectedDepartments())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedDepartments||!e.selectedDepartments.length)}}function Kt(l,t){if(l&1){let e=f();i(0,"p-button",11),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function Jt(l,t){if(l&1){let e=f();i(0,"div",12)(1,"h5",13),u(2,"Departments Management"),r(),i(3,"div",14)(4,"p-iconfield"),b(5,"p-inputicon",15),i(6,"input",16),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filterDepartments())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function Gt(l,t){l&1&&(i(0,"tr")(1,"th",17),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",18),u(4," Department Name "),b(5,"p-sortIcon",19),r(),i(6,"th",20),u(7," Campus Name "),b(8,"p-sortIcon",21),r(),i(9,"th",22),u(10,"Actions"),r()())}function Xt(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",17),b(2,"p-tableCheckbox",23),r(),i(3,"td"),u(4),r(),i(5,"td"),u(6),r(),i(7,"td")(8,"div",24)(9,"p-button",25),d("click",function(){let n=s(e).$implicit,a=p();return c(a.viewDepartment(n))}),r(),i(10,"p-button",26),d("click",function(){let n=s(e).$implicit,a=p();return c(a.editDepartment(n))}),r(),i(11,"p-button",27),d("click",function(){let n=s(e).$implicit,a=p();return c(a.deleteDepartment(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),E(e.departmentName),g(2),E((e.campus==null?null:e.campus.campusName)||"N/A")}}function Zt(l,t){l&1&&(i(0,"tr")(1,"td",28),u(2,"No departments found"),r()())}var Ye=class l{constructor(t,e,o){this.userService=t;this.messageService=e;this.authService=o}table;departments=[];filteredDepartments=[];selectedDepartments=[];campuses=[];searchValue="";loading=!1;ngOnInit(){console.log("DepartmentsComponent initialized"),this.loadDepartments(),this.loadCampuses()}loadDepartments(){console.log("Loading departments..."),this.loading=!0,this.userService.getDepartments().subscribe({next:t=>{console.log("Departments loaded:",t),this.departments=Array.isArray(t)?t:t.data||[],this.filteredDepartments=[...this.departments],this.loading=!1,console.log("Departments set:",this.departments)},error:t=>{console.error("Error loading departments:",t),P.default.fire({title:"Error",text:"Failed to load departments: "+(t.error?.message||t.message),icon:"error"}),this.loading=!1}})}loadCampuses(){console.log("Loading campuses..."),this.userService.getCampuses().subscribe({next:t=>{console.log("Campuses loaded:",t),this.campuses=Array.isArray(t)?t:t.data||[],console.log("Campuses set:",this.campuses)},error:t=>{console.error("Error loading campuses:",t)}})}filterDepartments(){if(!this.searchValue.trim()){this.filteredDepartments=[...this.departments];return}let t=this.searchValue.toLowerCase();this.filteredDepartments=this.departments.filter(e=>e.departmentName?.toLowerCase().includes(t)||e.campus?.campusName?.toLowerCase().includes(t))}onSelectionChange(t){console.log("Selection changed:",t),console.log("Selected departments:",this.selectedDepartments),this.selectedDepartments&&this.selectedDepartments.length>0&&console.log("Selected department IDs:",this.selectedDepartments.map(e=>e.departmentId))}viewDepartment(t){let e=new Date(t.departmentCreated).toLocaleDateString(),o=new Date(t.departmentUpdated).toLocaleDateString();P.default.fire({title:t.departmentName,html:`
                <div style="text-align: left;">
                    <p><strong>Campus:</strong> ${t.campus?.campusName||"N/A"}</p>
                    <p><strong>Created:</strong> ${e}</p>
                    <p><strong>Updated:</strong> ${o}</p>
                </div>
            `,icon:"info",confirmButtonText:"Close"})}editDepartment(t){let e={departmentName:t.departmentName};P.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u270E Edit Department</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department Name *</label>
                            <input id="departmentName" type="text" value="${e.departmentName}" placeholder="Department Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Update Department",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let o=document.getElementById("departmentName");o&&o.focus()}}).then(o=>{if(o.isConfirmed){let n=document.getElementById("departmentName").value.trim();if(!n){P.default.fire({title:"Error",text:"Department Name is required",icon:"error"});return}let a={departmentName:n};this.userService.updateDepartment(t.departmentId,a).subscribe({next:()=>{P.default.fire({title:"Success!",text:"Department updated successfully",icon:"success"}),this.loadDepartments()},error:m=>{P.default.fire({title:"Error",text:"Failed to update department: "+(m.error?.message||m.message),icon:"error"})}})}})}deleteDepartment(t){let e=t.departmentId;console.log("Deleting single department:",e,"Full department object:",t),P.default.fire({title:"Confirm Delete",text:"Are you sure you want to delete this department?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"}).then(o=>{o.isConfirmed&&this.userService.deleteDepartment(e).subscribe({next:()=>{console.log("Department deleted successfully:",e),P.default.fire({title:"Deleted!",text:"Department has been deleted successfully.",icon:"success"}),this.loadDepartments()},error:n=>{console.error("Error deleting department:",e,n),P.default.fire({title:"Error",text:"Failed to delete department: "+(n.error?.message||n.message),icon:"error"})}})})}openNewDepartmentDialog(){P.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u2795 Add New Department</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department Name *</label>
                            <input id="newDepartmentName" type="text" placeholder="Department Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Create Department",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let t=document.getElementById("newDepartmentName");t&&t.focus()}}).then(t=>{if(t.isConfirmed){let e=document.getElementById("newDepartmentName").value.trim();if(!e){P.default.fire({title:"Error",text:"Department Name is required",icon:"error"});return}let o={departmentName:e};this.userService.createDepartment(o).subscribe({next:()=>{P.default.fire({title:"Success!",text:"Department created successfully",icon:"success"}),this.loadDepartments()},error:n=>{P.default.fire({title:"Error",text:"Failed to create department: "+(n.error?.message||n.message),icon:"error"})}})}})}deleteSelectedDepartments(){if(!this.selectedDepartments||this.selectedDepartments.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select departments to delete"});return}P.default.fire({title:"Confirm Delete",text:`Are you sure you want to delete ${this.selectedDepartments.length} department(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete All",cancelButtonText:"Cancel"}).then(t=>{if(t.isConfirmed){let e=0,o=0;this.selectedDepartments.forEach(n=>{let a=n.departmentId;console.log("Deleting department:",a),this.userService.deleteDepartment(a).subscribe({next:()=>{e++,console.log(`Department deleted: ${a} (${e}/${this.selectedDepartments.length})`),e+o===this.selectedDepartments.length&&(this.selectedDepartments=[],this.loadDepartments(),P.default.fire({title:"Deleted!",text:`${e} department(s) deleted successfully.`,icon:"success"}))},error:m=>{o++,console.error(`Failed to delete department ${a}:`,m),e+o===this.selectedDepartments.length&&(this.selectedDepartments=[],this.loadDepartments(),P.default.fire({title:"Partial Delete",text:`${e} department(s) deleted, ${o} failed.`,icon:"warning"}))}})})}})}exportCSV(){if(this.filteredDepartments.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"No data to export"});return}let t=this.generateCSV(this.filteredDepartments),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),n=URL.createObjectURL(e);o.setAttribute("href",n),o.setAttribute("download","departments_export.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),this.messageService.add({severity:"success",summary:"Success",detail:"Departments exported to CSV"})}generateCSV(t){let e=["Department Name","Campus Name"],o=t.map(a=>[a.departmentName||"",a.campus?.campusName||""]);return[e.join(","),...o.map(a=>a.map(m=>`"${m}"`).join(","))].join(`
`)}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(ut))};static \u0275cmp=B({type:l,selectors:[["app-departments"]],viewQuery:function(e,o){if(e&1&&ye(jt,5),e&2){let n;we(n=ve())&&(o.table=n.first)}},features:[O([y])],decls:15,vars:12,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","departmentId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} departments",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","emptymessage"],["label","New Department","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search departments...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","departmentName",2,"min-width","15rem"],["field","departmentName"],["pSortableColumn","campus.campusName",2,"min-width","15rem"],["field","campus.campusName"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","4",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",6),S(2,Qt,2,1,"ng-template",null,0,C)(4,Kt,1,0,"ng-template",null,1,C),r(),i(6,"p-table",7,2),M("selectionChange",function(m){return s(n),I(o.selectedDepartments,m)||(o.selectedDepartments=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(8,Jt,7,1,"ng-template",null,3,C)(10,Gt,11,0,"ng-template",null,4,C)(12,Xt,12,3,"ng-template",null,5,C)(14,Zt,3,0,"ng-template",8),r()}e&2&&(g(6),_("value",o.filteredDepartments)("rows",10)("paginator",!0)("globalFilterFields",x(9,Wt))("tableStyle",x(10,qt)),T("selection",o.selectedDepartments),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(11,Yt)))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:hover{opacity:.8}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}p-table[_ngcontent-%COMP%]     .p-input-icon-left>input{padding-left:2.5rem}p-table[_ngcontent-%COMP%]     .p-input-icon-left>.p-input-icon{left:.75rem}"]})};var ge=xe(Se());var en=()=>["BrandName"],tn=()=>({"min-width":"100rem"}),nn=()=>[10,20,30];function on(l,t){if(l&1){let e=f();i(0,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.openNewDialog())}),r(),i(1,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.deleteSelected())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedItems||!e.selectedItems.length)}}function rn(l,t){if(l&1){let e=f();i(0,"p-button",11),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function an(l,t){if(l&1){let e=f();i(0,"div",12)(1,"h5",13),u(2,"Brand Management"),r(),i(3,"div",14)(4,"p-iconfield"),b(5,"p-inputicon",15),i(6,"input",16),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filter())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function ln(l,t){l&1&&(i(0,"tr")(1,"th",17),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",18),u(4," Brand Name "),b(5,"p-sortIcon",19),r(),i(6,"th",20),u(7,"Actions"),r()())}function sn(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",17),b(2,"p-tableCheckbox",21),r(),i(3,"td"),u(4),r(),i(5,"td")(6,"div",22)(7,"p-button",23),d("click",function(){let n=s(e).$implicit,a=p();return c(a.view(n))}),r(),i(8,"p-button",24),d("click",function(){let n=s(e).$implicit,a=p();return c(a.edit(n))}),r(),i(9,"p-button",25),d("click",function(){let n=s(e).$implicit,a=p();return c(a.delete(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),E(e.BrandName)}}function cn(l,t){l&1&&(i(0,"tr")(1,"td",26),u(2,"No brands found"),r()())}var Qe=class l{constructor(t,e,o){this.userService=t;this.messageService=e;this.assetService=o}items=[];filteredItems=[];selectedItems=[];searchValue="";loading=!0;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.assetService.getBrands().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading brands:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load brands"}),this.loading=!1}})}filter(){this.filteredItems=this.items.filter(t=>t.BrandName?.toLowerCase().includes(this.searchValue.toLowerCase()))}onSelectionChange(t){console.log("Selected items:",this.selectedItems)}openNewDialog(){ge.default.fire({title:"New Brand",html:`
                <input type="text" id="brandName" class="swal2-input" placeholder="Brand Name" />
            `,confirmButtonText:"Create",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("brandName")?.value;return t?{name:t}:(ge.default.showValidationMessage("Brand name is required"),!1)}}).then(t=>{t.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Brand created successfully"}),this.loadItems())})}view(t){ge.default.fire({title:"View Brand",html:`<strong>Name:</strong> ${t.name}`,icon:"info"})}edit(t){ge.default.fire({title:"Edit Brand",html:`
                <input type="text" id="brandName" class="swal2-input" value="${t.name}" />
            `,confirmButtonText:"Update",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("brandName")?.value;return e?{name:e}:(ge.default.showValidationMessage("Brand name is required"),!1)}}).then(e=>{e.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Brand updated successfully"}),this.loadItems())})}delete(t){ge.default.fire({title:"Delete Brand",text:`Are you sure you want to delete "${t.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Brand deleted successfully"}),this.loadItems())})}deleteSelected(){!this.selectedItems||this.selectedItems.length===0||ge.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} brand(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Brands deleted successfully"}),this.loadItems(),this.selectedItems=[])})}exportCSV(){let t=`Brand Name,Created Date
`;this.items.forEach(a=>{t+=`${a.name},${new Date(a.createdAt).toLocaleDateString()}
`});let e=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download="brands.csv",n.click(),window.URL.revokeObjectURL(o)}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(me))};static \u0275cmp=B({type:l,selectors:[["app-brand"]],features:[O([y])],decls:15,vars:13,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","brand_id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} brands",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions","loading"],["pTemplate","emptymessage"],["label","New Brand","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search brands...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","BrandName",2,"min-width","15rem"],["field","BrandName"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","3",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",6),S(2,on,2,1,"ng-template",null,0,C)(4,rn,1,0,"ng-template",null,1,C),r(),i(6,"p-table",7,2),M("selectionChange",function(m){return s(n),I(o.selectedItems,m)||(o.selectedItems=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(8,an,7,1,"ng-template",null,3,C)(10,ln,8,0,"ng-template",null,4,C)(12,sn,10,2,"ng-template",null,5,C)(14,cn,3,0,"ng-template",8),r()}e&2&&(g(6),_("value",o.filteredItems)("rows",10)("paginator",!0)("globalFilterFields",x(10,en))("tableStyle",x(11,tn)),T("selection",o.selectedItems),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(12,nn))("loading",o.loading))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin:0}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem;background-color:var(--primary-color);color:var(--primary-contrast-color);font-weight:600}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;vertical-align:middle}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-emptymessage>tr>td{padding:2rem;text-align:center;color:var(--text-color-secondary)}p-table[_ngcontent-%COMP%]     .p-paginator{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border)}p-toolbar[_ngcontent-%COMP%]     .p-toolbar{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border);border-radius:var(--content-border-radius);margin-bottom:1.5rem}p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start, p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{display:flex;gap:.5rem;align-items:center}p-tooltip[_ngcontent-%COMP%]     .p-tooltip{background-color:var(--surface-overlay);color:var(--text-color);border:1px solid var(--surface-border)}p-iconfield[_ngcontent-%COMP%]     input{width:250px;padding:.75rem 1rem .75rem 2.5rem;border:1px solid var(--surface-border);border-radius:var(--content-border-radius);background-color:var(--surface-card);color:var(--text-color);transition:border-color var(--element-transition-duration)}p-iconfield[_ngcontent-%COMP%]     input:focus{border-color:var(--primary-color);outline:none}p-iconfield[_ngcontent-%COMP%]     input::placeholder{color:var(--text-color-secondary)}"]})};var be=xe(Se());var pn=()=>["ColorCode"],mn=()=>({"min-width":"100rem"}),dn=()=>[10,20,30];function un(l,t){if(l&1){let e=f();i(0,"p-button",8),d("onClick",function(){s(e);let n=p();return c(n.openNewDialog())}),r(),i(1,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.deleteSelected())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedItems||!e.selectedItems.length)}}function gn(l,t){if(l&1){let e=f();i(0,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function bn(l,t){if(l&1){let e=f();i(0,"div",11)(1,"h5",12),u(2,"Color Management"),r(),i(3,"div",13)(4,"p-iconfield"),b(5,"p-inputicon",14),i(6,"input",15),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filter())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function fn(l,t){l&1&&(i(0,"tr")(1,"th",16),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",17),u(4," Color Code "),b(5,"p-sortIcon",18),r(),i(6,"th",19),u(7," Description "),b(8,"p-sortIcon",20),r(),i(9,"th",21),u(10,"Actions"),r()())}function Cn(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",16),b(2,"p-tableCheckbox",22),r(),i(3,"td"),u(4),r(),i(5,"td"),u(6),r(),i(7,"td")(8,"div",23)(9,"p-button",24),d("click",function(){let n=s(e).$implicit,a=p();return c(a.view(n))}),r(),i(10,"p-button",25),d("click",function(){let n=s(e).$implicit,a=p();return c(a.edit(n))}),r(),i(11,"p-button",26),d("click",function(){let n=s(e).$implicit,a=p();return c(a.delete(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),E(e.ColorCode),g(2),E(e.Description)}}function _n(l,t){l&1&&(i(0,"tr")(1,"td",27),u(2,"No colors found"),r()())}var Ke=class l{constructor(t,e,o){this.userService=t;this.messageService=e;this.assetService=o}items=[];filteredItems=[];selectedItems=[];searchValue="";loading=!0;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.assetService.getColors().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading colors:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load colors"}),this.loading=!1}})}filter(){this.filteredItems=this.items.filter(t=>t.ColorCode?.toLowerCase().includes(this.searchValue.toLowerCase()))}onSelectionChange(t){console.log("Selected items:",this.selectedItems)}openNewDialog(){be.default.fire({title:"New Color",html:'<input type="text" id="colorName" class="swal2-input" placeholder="Color Name" />',confirmButtonText:"Create",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("colorName")?.value;return t?{name:t}:(be.default.showValidationMessage("Color name is required"),!1)}}).then(t=>{t.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Color created successfully"}),this.loadItems())})}view(t){be.default.fire({title:"View Color",html:`<strong>Name:</strong> ${t.name}`,icon:"info"})}edit(t){be.default.fire({title:"Edit Color",html:`<input type="text" id="colorName" class="swal2-input" value="${t.name}" />`,confirmButtonText:"Update",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("colorName")?.value;return e?{name:e}:(be.default.showValidationMessage("Color name is required"),!1)}}).then(e=>{e.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Color updated successfully"}),this.loadItems())})}delete(t){be.default.fire({title:"Delete Color",text:`Are you sure you want to delete "${t.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Color deleted successfully"}),this.loadItems())})}deleteSelected(){!this.selectedItems||this.selectedItems.length===0||be.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} color(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Colors deleted successfully"}),this.loadItems(),this.selectedItems=[])})}exportCSV(){let t=`Color Name,Created Date
`;this.items.forEach(a=>{t+=`${a.name},${new Date(a.createdAt).toLocaleDateString()}
`});let e=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download="colors.csv",n.click(),window.URL.revokeObjectURL(o)}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(me))};static \u0275cmp=B({type:l,selectors:[["app-color"]],features:[O([y])],decls:14,vars:13,consts:[["start",""],["end",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","color_id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} colors",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions","loading"],["pTemplate","emptymessage"],["label","New Color","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search colors...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","ColorCode",2,"min-width","15rem"],["field","ColorCode"],["pSortableColumn","Description",2,"min-width","15rem"],["field","Description"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","4",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",5),S(2,un,2,1,"ng-template",null,0,C)(4,gn,1,0,"ng-template",null,1,C),r(),i(6,"p-table",6),M("selectionChange",function(m){return s(n),I(o.selectedItems,m)||(o.selectedItems=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(7,bn,7,1,"ng-template",null,2,C)(9,fn,11,0,"ng-template",null,3,C)(11,Cn,12,3,"ng-template",null,4,C)(13,_n,3,0,"ng-template",7),r()}e&2&&(g(6),_("value",o.filteredItems)("rows",10)("paginator",!0)("globalFilterFields",x(10,pn))("tableStyle",x(11,mn)),T("selection",o.selectedItems),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(12,dn))("loading",o.loading))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin:0}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem;background-color:var(--primary-color);color:var(--primary-contrast-color);font-weight:600}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;vertical-align:middle}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-emptymessage>tr>td{padding:2rem;text-align:center;color:var(--text-color-secondary)}p-table[_ngcontent-%COMP%]     .p-paginator{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border)}p-toolbar[_ngcontent-%COMP%]     .p-toolbar{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border);border-radius:var(--content-border-radius);margin-bottom:1.5rem}p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start, p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{display:flex;gap:.5rem;align-items:center}p-tooltip[_ngcontent-%COMP%]     .p-tooltip{background-color:var(--surface-overlay);color:var(--text-color);border:1px solid var(--surface-border)}p-iconfield[_ngcontent-%COMP%]     input{width:250px;padding:.75rem 1rem .75rem 2.5rem;border:1px solid var(--surface-border);border-radius:var(--content-border-radius);background-color:var(--surface-card);color:var(--text-color);transition:border-color var(--element-transition-duration)}p-iconfield[_ngcontent-%COMP%]     input:focus{border-color:var(--primary-color);outline:none}p-iconfield[_ngcontent-%COMP%]     input::placeholder{color:var(--text-color-secondary)}"]})};var fe=xe(Se());var hn=()=>["ProgramName"],et=()=>({"min-width":"100rem"}),tt=()=>[10,20,30];function xn(l,t){if(l&1){let e=f();i(0,"p-button",8),d("onClick",function(){s(e);let n=p();return c(n.openNewDialog())}),r(),i(1,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.deleteSelected())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedItems||!e.selectedItems.length)}}function yn(l,t){if(l&1){let e=f();i(0,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function wn(l,t){if(l&1){let e=f();i(0,"div",11)(1,"h5",12),u(2,"Program Management"),r(),i(3,"div",13)(4,"p-iconfield"),b(5,"p-inputicon",14),i(6,"input",15),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filter())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function vn(l,t){l&1&&(i(0,"tr")(1,"th",16),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",17),u(4,"Program Name"),b(5,"p-sortIcon",18),r(),i(6,"th",19),u(7,"Description"),b(8,"p-sortIcon",20),r(),i(9,"th",21),u(10,"Actions"),r()())}function Sn(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",16),b(2,"p-tableCheckbox",22),r(),i(3,"td"),u(4),r(),i(5,"td"),u(6),r(),i(7,"td")(8,"div",23)(9,"p-button",24),d("click",function(){let n=s(e).$implicit,a=p();return c(a.view(n))}),r(),i(10,"p-button",25),d("click",function(){let n=s(e).$implicit,a=p();return c(a.edit(n))}),r(),i(11,"p-button",26),d("click",function(){let n=s(e).$implicit,a=p();return c(a.delete(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),E(e.ProgramName),g(2),E(e.Description)}}function En(l,t){l&1&&(i(0,"tr")(1,"td",27),u(2,"No items found"),r()())}var Tn=()=>["SupplierName"];function In(l,t){if(l&1){let e=f();i(0,"p-button",8),d("onClick",function(){s(e);let n=p();return c(n.openNewDialog())}),r(),i(1,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.deleteSelected())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedItems||!e.selectedItems.length)}}function Mn(l,t){if(l&1){let e=f();i(0,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function kn(l,t){if(l&1){let e=f();i(0,"div",11)(1,"h5",12),u(2,"Supplier Management"),r(),i(3,"div",13)(4,"p-iconfield"),b(5,"p-inputicon",14),i(6,"input",15),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filter())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function Pn(l,t){l&1&&(i(0,"tr")(1,"th",16),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",17),u(4,"Supplier Name"),b(5,"p-sortIcon",18),r(),i(6,"th",19),u(7,"Contact Info"),b(8,"p-sortIcon",20),r(),i(9,"th",21),u(10,"Actions"),r()())}function Dn(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",16),b(2,"p-tableCheckbox",22),r(),i(3,"td"),u(4),r(),i(5,"td"),u(6),r(),i(7,"td")(8,"div",23)(9,"p-button",24),d("click",function(){let n=s(e).$implicit,a=p();return c(a.view(n))}),r(),i(10,"p-button",25),d("click",function(){let n=s(e).$implicit,a=p();return c(a.edit(n))}),r(),i(11,"p-button",26),d("click",function(){let n=s(e).$implicit,a=p();return c(a.delete(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),E(e.SupplierName),g(2),E(e.ContactInfo)}}function Nn(l,t){l&1&&(i(0,"tr")(1,"td",27),u(2,"No items found"),r()())}var nt=".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin:0}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem;background-color:var(--primary-color);color:var(--primary-contrast-color);font-weight:600}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;vertical-align:middle}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-emptymessage>tr>td{padding:2rem;text-align:center;color:var(--text-color-secondary)}p-table[_ngcontent-%COMP%]     .p-paginator{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border)}p-toolbar[_ngcontent-%COMP%]     .p-toolbar{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border);border-radius:var(--content-border-radius);margin-bottom:1.5rem}p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start, p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{display:flex;gap:.5rem;align-items:center}p-tooltip[_ngcontent-%COMP%]     .p-tooltip{background-color:var(--surface-overlay);color:var(--text-color);border:1px solid var(--surface-border)}p-iconfield[_ngcontent-%COMP%]     input{width:250px;padding:.75rem 1rem .75rem 2.5rem;border:1px solid var(--surface-border);border-radius:var(--content-border-radius);background-color:var(--surface-card);color:var(--text-color);transition:border-color var(--element-transition-duration)}p-iconfield[_ngcontent-%COMP%]     input:focus{border-color:var(--primary-color);outline:none}p-iconfield[_ngcontent-%COMP%]     input::placeholder{color:var(--text-color-secondary)}",Vn=()=>["LocationName"];function Bn(l,t){if(l&1){let e=f();i(0,"p-button",8),d("onClick",function(){s(e);let n=p();return c(n.openNewDialog())}),r(),i(1,"p-button",9),d("onClick",function(){s(e);let n=p();return c(n.deleteSelected())}),r()}if(l&2){let e=p();g(),_("disabled",!e.selectedItems||!e.selectedItems.length)}}function On(l,t){if(l&1){let e=f();i(0,"p-button",10),d("onClick",function(){s(e);let n=p();return c(n.exportCSV())}),r()}}function Ln(l,t){if(l&1){let e=f();i(0,"div",11)(1,"h5",12),u(2,"Location Management"),r(),i(3,"div",13)(4,"p-iconfield"),b(5,"p-inputicon",14),i(6,"input",15),M("ngModelChange",function(n){s(e);let a=p();return I(a.searchValue,n)||(a.searchValue=n),c(n)}),d("input",function(){s(e);let n=p();return c(n.filter())}),r()()()()}if(l&2){let e=p();g(6),T("ngModel",e.searchValue)}}function Un(l,t){l&1&&(i(0,"tr")(1,"th",16),b(2,"p-tableHeaderCheckbox"),r(),i(3,"th",17),u(4,"Location Name"),b(5,"p-sortIcon",18),r(),i(6,"th",19),u(7,"Description"),b(8,"p-sortIcon",20),r(),i(9,"th",21),u(10,"Actions"),r()())}function Fn(l,t){if(l&1){let e=f();i(0,"tr")(1,"td",16),b(2,"p-tableCheckbox",22),r(),i(3,"td"),u(4),r(),i(5,"td"),u(6),r(),i(7,"td")(8,"div",23)(9,"p-button",24),d("click",function(){let n=s(e).$implicit,a=p();return c(a.view(n))}),r(),i(10,"p-button",25),d("click",function(){let n=s(e).$implicit,a=p();return c(a.edit(n))}),r(),i(11,"p-button",26),d("click",function(){let n=s(e).$implicit,a=p();return c(a.delete(n))}),r()()()()}if(l&2){let e=t.$implicit;g(2),_("value",e),g(2),E(e.LocationName),g(2),E(e.Description)}}function An(l,t){l&1&&(i(0,"tr")(1,"td",27),u(2,"No items found"),r()())}var Re=class l{constructor(t,e,o){this.userService=t;this.messageService=e;this.assetService=o}items=[];filteredItems=[];selectedItems=[];searchValue="";loading=!0;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.items=[],this.filteredItems=[]}filter(){this.filteredItems=this.items.filter(t=>this.getItemName(t)?.toLowerCase().includes(this.searchValue.toLowerCase()))}getItemName(t){return t.name||t.BrandName||t.LocationName||t.SupplierName||t.ProgramName||t.ColorCode||""}onSelectionChange(t){console.log("Selected items:",this.selectedItems)}openNewDialog(){fe.default.fire({title:"New "+this.itemLabel,html:'<input type="text" id="itemName" class="swal2-input" placeholder="'+this.itemLabel+' Name" />',confirmButtonText:"Create",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("itemName")?.value;return t?{name:t}:(fe.default.showValidationMessage(this.itemLabel+" name is required"),!1)}}).then(t=>{t.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:this.itemLabel+" created successfully"}),this.loadItems())})}view(t){let e=this.getItemName(t);fe.default.fire({title:"View "+this.itemLabel,html:"<strong>Name:</strong> "+e,icon:"info"})}edit(t){let e=this.getItemName(t);fe.default.fire({title:"Edit "+this.itemLabel,html:'<input type="text" id="itemName" class="swal2-input" value="'+e+'" />',confirmButtonText:"Update",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let o=document.getElementById("itemName")?.value;return o?{name:o}:(fe.default.showValidationMessage(this.itemLabel+" name is required"),!1)}}).then(o=>{o.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:this.itemLabel+" updated successfully"}),this.loadItems())})}delete(t){let e=this.getItemName(t);fe.default.fire({title:"Delete "+this.itemLabel,text:'Are you sure you want to delete "'+e+'"?',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:this.itemLabel+" deleted successfully"}),this.loadItems())})}deleteSelected(){!this.selectedItems||this.selectedItems.length===0||fe.default.fire({title:"Delete Selected",text:"Delete "+this.selectedItems.length+" item(s)?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&(this.messageService.add({severity:"success",summary:"Success",detail:"Items deleted successfully"}),this.loadItems(),this.selectedItems=[])})}exportCSV(){let t=this.itemLabel+` Name
`;this.items.forEach(a=>{let m=this.getItemName(a);t+=m+`
`});let e=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download=this.itemLabel.toLowerCase()+".csv",n.click(),window.URL.revokeObjectURL(o)}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(me))};static \u0275dir=pt({type:l})},Je=class l extends Re{itemLabel="Program";constructor(t,e,o){super(t,e,o)}loadItems(){this.loading=!0,this.assetService.getPrograms().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading programs:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load programs"}),this.loading=!1}})}getItemName(t){return t.ProgramName||t.name||""}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(me))};static \u0275cmp=B({type:l,selectors:[["app-program"]],features:[O([y]),je],decls:14,vars:13,consts:[["start",""],["end",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions","loading"],["pTemplate","emptymessage"],["label","New Program","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search programs...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","ProgramName",2,"min-width","15rem"],["field","ProgramName"],["pSortableColumn","Description",2,"min-width","15rem"],["field","Description"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","4",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",5),S(2,xn,2,1,"ng-template",null,0,C)(4,yn,1,0,"ng-template",null,1,C),r(),i(6,"p-table",6),M("selectionChange",function(m){return s(n),I(o.selectedItems,m)||(o.selectedItems=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(7,wn,7,1,"ng-template",null,2,C)(9,vn,11,0,"ng-template",null,3,C)(11,Sn,12,3,"ng-template",null,4,C)(13,En,3,0,"ng-template",7),r()}e&2&&(g(6),_("value",o.filteredItems)("rows",10)("paginator",!0)("globalFilterFields",x(10,hn))("tableStyle",x(11,et)),T("selection",o.selectedItems),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(12,tt))("loading",o.loading))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[nt]})},Ge=class l extends Re{itemLabel="Supplier";constructor(t,e,o){super(t,e,o)}loadItems(){this.loading=!0,this.assetService.getSuppliers().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading suppliers:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load suppliers"}),this.loading=!1}})}getItemName(t){return t.SupplierName||t.name||""}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(me))};static \u0275cmp=B({type:l,selectors:[["app-supplier"]],features:[O([y]),je],decls:14,vars:13,consts:[["start",""],["end",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions","loading"],["pTemplate","emptymessage"],["label","New Supplier","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search suppliers...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","SupplierName",2,"min-width","15rem"],["field","SupplierName"],["pSortableColumn","ContactInfo",2,"min-width","15rem"],["field","ContactInfo"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","4",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",5),S(2,In,2,1,"ng-template",null,0,C)(4,Mn,1,0,"ng-template",null,1,C),r(),i(6,"p-table",6),M("selectionChange",function(m){return s(n),I(o.selectedItems,m)||(o.selectedItems=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(7,kn,7,1,"ng-template",null,2,C)(9,Pn,11,0,"ng-template",null,3,C)(11,Dn,12,3,"ng-template",null,4,C)(13,Nn,3,0,"ng-template",7),r()}e&2&&(g(6),_("value",o.filteredItems)("rows",10)("paginator",!0)("globalFilterFields",x(10,Tn))("tableStyle",x(11,et)),T("selection",o.selectedItems),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(12,tt))("loading",o.loading))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[nt]})},Xe=class l extends Re{itemLabel="Location";constructor(t,e,o){super(t,e,o)}loadItems(){this.loading=!0,this.assetService.getLocations().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading locations:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load locations"}),this.loading=!1}})}getItemName(t){return t.LocationName||t.name||""}static \u0275fac=function(e){return new(e||l)(h(V),h(y),h(me))};static \u0275cmp=B({type:l,selectors:[["app-location"]],features:[O([y]),je],decls:14,vars:13,consts:[["start",""],["end",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions","loading"],["pTemplate","emptymessage"],["label","New Location","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete Selected","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],[1,"flex","items-center","gap-2"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search locations...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],["pSortableColumn","LocationName",2,"min-width","15rem"],["field","LocationName"],["pSortableColumn","Description",2,"min-width","15rem"],["field","Description"],[2,"min-width","10rem"],[3,"value"],[1,"action-buttons"],["type","button","icon","pi pi-eye","pTooltip","View","tooltipPosition","top",1,"p-button-rounded","p-button-info",3,"click"],["type","button","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["type","button","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","4",2,"text-align","center","padding","2rem"]],template:function(e,o){if(e&1){let n=f();b(0,"p-toast"),i(1,"p-toolbar",5),S(2,Bn,2,1,"ng-template",null,0,C)(4,On,1,0,"ng-template",null,1,C),r(),i(6,"p-table",6),M("selectionChange",function(m){return s(n),I(o.selectedItems,m)||(o.selectedItems=m),c(m)}),d("selectionChange",function(m){return s(n),c(o.onSelectionChange(m))}),S(7,Ln,7,1,"ng-template",null,2,C)(9,Un,11,0,"ng-template",null,3,C)(11,Fn,12,3,"ng-template",null,4,C)(13,An,3,0,"ng-template",7),r()}e&2&&(g(6),_("value",o.filteredItems)("rows",10)("paginator",!0)("globalFilterFields",x(10,Vn))("tableStyle",x(11,et)),T("selection",o.selectedItems),_("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",x(12,tt))("loading",o.loading))},dependencies:[L,se,U,$,H,oe,X,Z,ee,te,ne,W,j,Y,q,le,ae,re,ie,K,Q,G,J,z,F,A,R],styles:[nt]})};var ht=[{path:"brand",component:Qe},{path:"color",component:Ke},{path:"program",component:Je},{path:"supplier",component:Ge},{path:"location",component:Xe}];var Rn=[{path:"users",component:We},{path:"campuses",component:qe},{path:"departments",component:Ye},{path:"assetcategory",children:ht},{path:"documentation",component:gt},{path:"crud",component:bt},{path:"custodian",component:ft},{path:"requestmaintenance",component:Ct},{path:"**",redirectTo:"/notfound"}],Pi=Rn;export{Pi as default,Rn as pageRoutes};
