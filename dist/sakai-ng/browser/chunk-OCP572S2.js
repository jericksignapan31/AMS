import{a as Me,b as Ce,c as Kn,d as Ae,e as Xn,f as ri}from"./chunk-NTCTHEML.js";import{a as ke,b as ae,c as Gn,d as Jn}from"./chunk-5GYMVNK4.js";import{$ as W,A as ve,B as Ft,C as Ut,D as Z,E as J,F as ee,G as K,J as Se,K as he,P as F,S as H,T as z,W as te,X as ne,Z as R,_ as j,aa as O,ba as B,ca as Be,da as we,fa as jt,ga as dt,ha as ct,qa as Zn,ra as ei,sa as ti,ta as ni,ua as ii,v as Ot,va as He,w as Bt,wa as mt,x as At,xa as Y,y as le,z as st}from"./chunk-6YTOS7JD.js";import{A as jn,G as Wn,Jb as lt,Mb as V,Nb as D,Qa as E,Sb as G,Tb as A,Ua as $,Va as Rt,a as An,ab as qn,b as ot,c as $e,fb as Q,hb as k,i as at,ib as N,j as Fn,kb as $n,lb as Hn,m as P,mb as zn,ob as L,pb as Yn,qb as Qn,r as ye,xb as yt,y as Un}from"./chunk-OQGFHCWT.js";import{$ as Dn,$b as xt,Ab as u,Ac as x,Bb as i,Cb as n,Db as g,Kb as b,Ob as f,Pb as c,Qa as Ln,Ta as d,Tb as Ve,Ub as Re,Vb as Oe,Y as kt,Z as Pn,Zb as Lt,a as Dt,aa as kn,ac as Vt,ba as Nt,bc as l,cb as w,cc as h,dc as q,e as Pe,ec as De,fc as Bn,ga as m,gc as y,ha as p,hb as I,hc as v,ia as Nn,ib as Vn,ic as S,jb as Rn,lb as rt,lc as U,mb as On,mc as M,nb as C,ua as fn,ub as hn,vb as ht,wb as bt,wc as Ee,xb as Ct,yb as We,yc as Te,zb as qe}from"./chunk-ZDEZPEUG.js";var ie=Pe(ke());var wi=["dt"],Mi=()=>[10,20,30],Ei=()=>({"min-width":"70rem"});function Ti(a,t){if(a&1){let e=b();i(0,"div",8)(1,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.openNewUserDialog())}),n(),i(2,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.deleteSelectedUsers())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedUsers.length)}}function Ii(a,t){if(a&1){let e=b();i(0,"div",8)(1,"p-button",11),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",12),i(4,"input",13),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filterUsers())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function Pi(a,t){a&1&&(i(0,"tr")(1,"th",14),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",15),l(4,"ID"),n(),i(5,"th",16),l(6,"Name "),g(7,"p-sortIcon",17),n(),i(8,"th",18),l(9,"Actions"),n()())}function Di(a,t){if(a&1){let e=b();i(0,"tr")(1,"td",14),g(2,"p-tableCheckbox",19),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",20)(9,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.viewUser(o))}),n(),i(10,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.editUser(o))}),n(),i(11,"p-button",23),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.deleteUser(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.userId||e.user_id),d(2),Bn("",e.firstName||e.FirstName," ",e.middleName||e.MiddleName||""," ",e.lastName||e.LastName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function ki(a,t){a&1&&(i(0,"tr")(1,"td",24),l(2,"No users found"),n()())}var Wt=class a{constructor(t,e,r){this.userService=t;this.messageService=e;this.userContextService=r}table;users=[];filteredUsers=[];selectedUsers=[];searchValue="";loading=!1;currentUserRole="";campuses=[];departments=[];ngOnInit(){console.log("UsersComponent initialized"),this.loadUsers(),this.loadCurrentUserRole(),this.loadCampuses(),this.loadDepartments()}loadDepartments(){console.log("Loading departments..."),this.userService.getDepartments().subscribe({next:t=>{console.log("API Department Response:",t),console.table(t),this.departments=Array.isArray(t)?t:t.data||[],console.log("Departments set:",this.departments)},error:t=>{console.error("Error loading departments:",t)}})}loadCampuses(){console.log("Loading campuses..."),this.userService.getCampuses().subscribe({next:t=>{console.log("Campuses loaded:",t),this.campuses=Array.isArray(t)?t:t.data||[],console.log("Campuses set:",this.campuses)},error:t=>{console.error("Error loading campuses:",t)}})}loadCurrentUserRole(){let t=this.userContextService.getUserId();console.log("Loading current user role, userId:",t),t&&this.userService.getUserById(t).subscribe({next:e=>{this.currentUserRole=e.role||"",console.log("Current user role:",this.currentUserRole)},error:e=>{console.error("Error loading current user:",e)}})}loadUsers(){console.log("Loading users..."),this.loading=!0,this.userService.getAllUsers().subscribe({next:t=>{console.log("Users loaded:",t),this.users=Array.isArray(t)?t:t.data||[],this.filteredUsers=[...this.users],this.loading=!1,console.log("Users set:",this.users)},error:t=>{console.error("Error loading users:",t),ie.default.fire({title:"Error",text:"Failed to load users: "+(t.error?.message||t.message),icon:"error"}),this.loading=!1}})}filterUsers(){if(!this.searchValue.trim()){this.filteredUsers=[...this.users];return}let t=this.searchValue.toLowerCase();this.filteredUsers=this.users.filter(e=>e.FirstName?.toLowerCase().includes(t)||e.LastName?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.Department?.toLowerCase().includes(t))}onSelectionChange(t){console.log("Selection changed:",t),console.log("Selected users:",this.selectedUsers),this.selectedUsers&&this.selectedUsers.length>0&&console.log("Selected user IDs:",this.selectedUsers.map(e=>e.userId||e.user_id))}viewUser(t){let e=new Date(t.userCreated).toLocaleDateString();ie.default.fire({title:t.firstName+" "+(t.middleName||"")+" "+t.lastName,html:`
                <div style="text-align: left;">
                    <p><strong>Email:</strong> ${t.email}</p>
                    <p><strong>Contact Number:</strong> ${t.contactNumber||"N/A"}</p>
                    <p><strong>Role:</strong> ${t.role||"N/A"}</p>
                    <p><strong>Active:</strong> <span style="color: ${t.isActive?"green":"red"}">${t.isActive?"Yes":"No"}</span></p>
                    <p><strong>Created:</strong> ${e}</p>
                </div>
            `,icon:"info",confirmButtonText:"Close"})}editUser(t){let e={firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,email:t.email,contactNumber:t.contactNumber,role:t.role,isActive:t.isActive};ie.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 700px; margin: 4 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u270E Edit User</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">First Name</label>
                            <input id="firstName" type="text" value="${e.firstName||""}" placeholder="First" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Middle Name</label>
                            <input id="middleName" type="text" value="${e.middleName||""}" placeholder="Middle" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Last Name</label>
                            <input id="lastName" type="text" value="${e.lastName||""}" placeholder="Last" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Email</label>
                            <input id="email" type="email" value="${e.email||""}" placeholder="email@example.com" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Contact</label>
                            <input id="contactNumber" type="text" value="${e.contactNumber||""}" placeholder="+63" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; transition: border-color 0.2s;" onmouseover="this.style.borderBottomColor='#667eea'" onmouseout="this.style.borderBottomColor='#e0e0e0'" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Role</label>
                            <select id="role" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; cursor: pointer; transition: border-color 0.2s;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="SuperAdmin" ${e.role==="SuperAdmin"?"selected":""}>SuperAdmin</option>
                                <option value="CampusAdmin" ${e.role==="CampusAdmin"?"selected":""}>CampusAdmin</option>
                                <option value="Faculty" ${e.role==="Faculty"?"selected":""}>Faculty</option>
                                <option value="LabTech" ${e.role==="LabTech"?"selected":""}>LabTech</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px; padding-top: 12px; border-top: 1px solid #f0f0f0; cursor: pointer;" onclick="document.getElementById('isActive').click();">
                        <label style="font-weight: 500; color: #555; margin: 0; font-size: 13px; flex: 1; cursor: pointer;">Active Status</label>
                        <div style="position: relative; display: inline-block; width: 48px; height: 24px;">
                            <input id="isActive" type="checkbox" ${e.isActive?"checked":""} style="opacity: 0; width: 0; height: 0; cursor: pointer;" />
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: ${e.isActive?"#667eea":"#ddd"}; transition: 0.3s; border-radius: 24px;"></span>
                            <span style="position: absolute; content: ''; height: 20px; width: 20px; left: ${e.isActive?"24px":"2px"}; bottom: 2px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                        </div>
                    </div>
                </div>
            `,width:"750px",showCancelButton:!0,confirmButtonText:"Save",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let r=document.getElementById("firstName");r&&r.focus();let o=document.getElementById("isActive"),s=o?.parentElement?.parentElement,_=o?.parentElement?.querySelector("span:nth-child(2)"),T=o?.parentElement?.querySelector("span:nth-child(3)");o&&_&&T&&s&&(o.addEventListener("change",()=>{_.style.backgroundColor=o.checked?"#667eea":"#ddd",T.style.left=o.checked?"24px":"2px"}),s.addEventListener("click",X=>{X.target!==o&&(o.checked=!o.checked,o.dispatchEvent(new Event("change",{bubbles:!0})))}),_?.addEventListener("click",()=>{o.checked=!o.checked,o.dispatchEvent(new Event("change",{bubbles:!0}))}),T?.addEventListener("click",()=>{o.checked=!o.checked,o.dispatchEvent(new Event("change",{bubbles:!0}))}))}}).then(r=>{if(r.isConfirmed){let o=document.getElementById("firstName").value,s=document.getElementById("middleName").value,_=document.getElementById("lastName").value,T=document.getElementById("email").value,X=document.getElementById("contactNumber").value,re=document.getElementById("role").value,et=document.getElementById("isActive").checked,Ue={firstName:o||t.firstName,middleName:s||t.middleName,lastName:_||t.lastName,email:T||t.email,contactNumber:X||t.contactNumber,role:re||t.role,isActive:et};this.userService.updateUser(t.userId,Ue).subscribe({next:()=>{ie.default.fire({title:"Success!",text:"User updated successfully",icon:"success"}),this.loadUsers()},error:Fe=>{ie.default.fire({title:"Error",text:"Failed to update user: "+(Fe.error?.message||Fe.message),icon:"error"})}})}})}deleteUser(t){let e=t.userId||t.user_id;console.log("Deleting single user:",e,"Full user object:",t),ie.default.fire({title:"Confirm Delete",text:"Are you sure you want to delete this user?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"}).then(r=>{r.isConfirmed&&this.userService.deleteUser(e).subscribe({next:()=>{console.log("User deleted successfully:",e),ie.default.fire({title:"Deleted!",text:"User has been deleted successfully.",icon:"success"}),this.loadUsers()},error:o=>{console.error("Error deleting user:",e,o),ie.default.fire({title:"Error",text:"Failed to delete user: "+(o.error?.message||o.message),icon:"error"})}})})}openNewUserDialog(){let t=this.userContextService.getUserId();if(!t){let e=localStorage.getItem("currentUser");if(e){let r=JSON.parse(e);t=r.userId||r.user_id||r.id}}if(!t){ie.default.fire({title:"Error",text:"User ID not found. Please log in again.",icon:"error"});return}this.userService.getUserById(t).subscribe({next:e=>{console.log("\u{1F535} New User Dialog Opened"),console.log("Logged-in User Data:",e),console.log("Campus:",e.campus||e.Campus),console.log("Department:",e.department||e.Department),sessionStorage.setItem("loggedInUserData",JSON.stringify(e)),this.showNewUserDialog()},error:e=>{console.error("Error fetching user data:",e),this.showNewUserDialog()}})}showNewUserDialog(){let t={userName:"",email:"",password:"",firstName:"",lastName:"",middleName:"",contactNumber:"",department:"",campus:"",role:"CampusAdmin",isActive:!0,isStaff:!1,isSuperUser:!1},e=this.userContextService.getUserId(),r=JSON.parse(sessionStorage.getItem("loggedInUserData")||"{}"),o=this.currentUserRole==="CampusAdmin",s=r.campus?.campusId||r.campusId||"",_=r.campus?.campusName||r.campusName||"",T=o?this.departments.filter(X=>X.campus?.campusId===s):this.departments;ie.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 700px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u2795 Add New User</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">First Name *</label>
                            <input id="newFirstName" type="text" placeholder="First" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Middle Name</label>
                            <input id="newMiddleName" type="text" placeholder="Middle" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Last Name *</label>
                            <input id="newLastName" type="text" placeholder="Last" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Username *</label>
                            <input id="newUserName" type="text" placeholder="username" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Email *</label>
                            <input id="newEmail" type="email" placeholder="email@example.com" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Password *</label>
                            <input id="newPassword" type="password" placeholder="\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Contact Number</label>
                            <input id="newContactNumber" type="text" placeholder="+63" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                    ${o?`
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department *</label>
                            <select id="newDepartment" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="">-- Select Department --</option>
                                ${T.map(X=>`<option value="${X.departmentId}">${X.departmentName}</option>`).join("")}
                            </select>
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus <span style="color: #999; font-size: 11px;">(Auto)</span></label>
                            <input id="newCampus" type="text" value="${_}" placeholder="Campus" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #ccc; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; color: #999; cursor: not-allowed;" disabled />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Role *</label>
                            <select id="newRole" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="Faculty">Faculty</option>
                                <option value="LabTech">LabTech</option>
                            </select>
                        </div>
                    </div>
                    <input id="newCampusHidden" type="hidden" value="${s}" />
                    `:`
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department * <span style="color: #999; font-size: 11px;">(Auto)</span></label>
                            <input id="newDepartment" type="text" value="Default Department" placeholder="Department" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #ccc; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; color: #999; cursor: not-allowed;" disabled />
                            <input id="newDepartmentId" type="hidden" value="813e7dd9-345f-40dd-a37b-ec08c2575119" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus *</label>
                            <select id="newCampus" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'">
                                <option value="">-- Select Campus --</option>
                                ${this.campuses.map(X=>`<option value="${X.campusId}">${X.campusName}</option>`).join("")}
                            </select>
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Role * <span style="color: #999; font-size: 11px;">(Auto)</span></label>
                            <input id="newRole" type="text" value="CampusAdmin" placeholder="Role" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #ccc; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent; color: #999; cursor: not-allowed;" disabled />
                        </div>
                    </div>
                    `}
                    <div style="display: flex; align-items: center; gap: 12px; padding-top: 12px; border-top: 1px solid #f0f0f0;">
                        <label style="font-weight: 500; color: #555; margin: 0; font-size: 13px; flex: 1;">Active Status</label>
                        <div style="position: relative; display: inline-block; width: 48px; height: 24px;">
                            <input id="newIsActive" type="checkbox" checked style="opacity: 0; width: 0; height: 0; cursor: pointer;" />
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #667eea; transition: 0.3s; border-radius: 24px;"></span>
                            <span style="position: absolute; content: ''; height: 20px; width: 20px; left: 24px; bottom: 2px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                        </div>
                    </div>
                </div>
            `,width:"750px",showCancelButton:!0,confirmButtonText:"Create User",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let X=document.getElementById("newFirstName");if(X&&X.focus(),!o){let tt=document.getElementById("newCampus"),be=document.getElementById("newDepartment"),_t=document.getElementById("deptLockStatus");tt&&be&&tt.addEventListener("change",Et=>{let ft=Et.target.value;if(ft){let Tt=this.departments.filter(je=>je.campus&&je.campus.campusId===ft);be.innerHTML='<option value="">-- Select Department --</option>',Tt.forEach(je=>{let it=document.createElement("option");it.value=je.departmentId,it.textContent=je.departmentName,be.appendChild(it)}),be.disabled=!1,be.style.color="#333",be.style.borderBottomColor="#e0e0e0",be.style.cursor="pointer",_t.textContent=""}else be.disabled=!0,be.innerHTML='<option value="">-- Select Department --</option>',be.style.color="#999",be.style.borderBottomColor="#ccc",be.style.cursor="not-allowed",_t.textContent="(Select Campus First)"})}let re=document.getElementById("newIsActive"),et=re?.parentElement?.parentElement,Ue=re?.parentElement?.querySelector("span:nth-child(2)"),Fe=re?.parentElement?.querySelector("span:nth-child(3)");re&&Ue&&Fe&&et&&(re.addEventListener("change",()=>{Ue.style.backgroundColor=re.checked?"#667eea":"#ddd",Fe.style.left=re.checked?"24px":"2px"}),et.addEventListener("click",tt=>{tt.target!==re&&(re.checked=!re.checked,re.dispatchEvent(new Event("change",{bubbles:!0})))}),Ue?.addEventListener("click",()=>{re.checked=!re.checked,re.dispatchEvent(new Event("change",{bubbles:!0}))}),Fe?.addEventListener("click",()=>{re.checked=!re.checked,re.dispatchEvent(new Event("change",{bubbles:!0}))}))}}).then(X=>{if(X.isConfirmed){let re=document.getElementById("newFirstName"),et=document.getElementById("newLastName"),Ue=document.getElementById("newUserName"),Fe=document.getElementById("newEmail"),tt=document.getElementById("newPassword"),be=document.getElementById("newMiddleName"),_t=document.getElementById("newContactNumber"),Et=document.getElementById("newDepartment"),ft=document.getElementById("newDepartmentId"),Tt=re?re.value.trim():"",je=et?et.value.trim():"",it=Ue?Ue.value.trim():"",gn=Fe?Fe.value.trim():"",_n=tt?tt.value.trim():"",xi=be?be.value.trim():"",yi=_t?_t.value.trim():"",It="";o?It=Et?Et.value:"":It=ft?ft.value:"813e7dd9-345f-40dd-a37b-ec08c2575119";let Sn=document.getElementById("newCampus"),wn=document.getElementById("newCampusHidden"),Pt="";o?Pt=wn?wn.value:s:Pt=Sn?Sn.value:"";let Mn=document.getElementById("newRole"),vi=Mn?Mn.value:"",En=document.getElementById("newIsActive"),Si=En?En.checked:!0;if(!Tt){ie.default.fire({title:"Error",text:"First Name is required",icon:"error"});return}if(!je){ie.default.fire({title:"Error",text:"Last Name is required",icon:"error"});return}if(!it){ie.default.fire({title:"Error",text:"Username is required",icon:"error"});return}if(!gn||!this.isValidEmail(gn)){ie.default.fire({title:"Error",text:"Valid email is required",icon:"error"});return}if(!_n||_n.length<6){ie.default.fire({title:"Error",text:"Password must be at least 6 characters",icon:"error"});return}if(!It){ie.default.fire({title:"Error",text:"Department is required",icon:"error"});return}if(!Pt){ie.default.fire({title:"Error",text:"Campus is required",icon:"error"});return}let Tn={userName:it,email:gn,password:_n,firstName:Tt,lastName:je,middleName:xi||void 0,contactNumber:yi||void 0,department:It,campus:Pt,role:vi,isActive:Si,profilePicture:void 0};console.log("\u{1F4E4} Creating user with payload:",Tn),this.userService.createUser(Tn).subscribe({next:()=>{ie.default.fire({title:"Success!",text:"User created successfully",icon:"success"}),this.loadUsers()},error:In=>{ie.default.fire({title:"Error",text:"Failed to create user: "+(In.error?.message||In.message),icon:"error"})}})}})}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}deleteSelectedUsers(){if(!this.selectedUsers||this.selectedUsers.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select users to delete"});return}ie.default.fire({title:"Confirm Delete",text:`Are you sure you want to delete ${this.selectedUsers.length} user(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete All",cancelButtonText:"Cancel"}).then(t=>{if(t.isConfirmed){let e=0,r=0;this.selectedUsers.forEach(o=>{let s=o.userId||o.user_id;console.log("Deleting user:",s,"Full user object:",o),this.userService.deleteUser(s).subscribe({next:()=>{e++,console.log(`User deleted: ${s} (${e}/${this.selectedUsers.length})`),e+r===this.selectedUsers.length&&(this.selectedUsers=[],this.loadUsers(),ie.default.fire({title:"Deleted!",text:`${e} user(s) deleted successfully.`,icon:"success"}))},error:_=>{r++,console.error(`Failed to delete user ${s}:`,_),e+r===this.selectedUsers.length&&(this.selectedUsers=[],this.loadUsers(),ie.default.fire({title:"Partial Delete",text:`${e} user(s) deleted, ${r} failed.`,icon:"warning"}))}})})}})}exportCSV(){if(this.filteredUsers.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"No data to export"});return}let t=this.generateCSV(this.filteredUsers),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),o=URL.createObjectURL(e);r.setAttribute("href",o),r.setAttribute("download","users_export.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),this.messageService.add({severity:"success",summary:"Success",detail:"Users exported to CSV"})}generateCSV(t){let e=["Name","Email","Department","Campus","Role"],r=t.map(s=>[`${s.FirstName||""} ${s.LastName||""}`,s.email||"",s.Department||"",s.Campus||"",s.role||""]);return[e.join(","),...r.map(s=>s.map(_=>`"${_}"`).join(","))].join(`
`)}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Gn))};static \u0275cmp=I({type:a,selectors:[["app-users"]],viewQuery:function(e,r){if(e&1&&Ve(wi,5),e&2){let o;Re(o=Oe())&&(r.table=o.first)}},features:[U([E])],decls:12,vars:11,consts:[["start",""],["end",""],["dt",""],["body",""],["styleClass","mb-4"],["dataKey","userId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} users",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","rowHover","loading","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search users...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","FirstName",2,"min-width","20rem"],["field","FirstName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",4),C(2,Ti,3,1,"ng-template",null,0,x)(4,Ii,5,1,"ng-template",null,1,x),n(),i(6,"p-table",5,2),S("selectionChange",function(_){return m(o),v(r.selectedUsers,_)||(r.selectedUsers=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(8,Pi,10,0,"ng-template",6)(9,Di,12,11,"ng-template",null,3,x)(11,ki,3,0,"ng-template",7),n()}e&2&&(d(6),u("value",r.filteredUsers)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,Mi))("rowHover",!0)("loading",r.loading),y("selection",r.selectedUsers),u("showCurrentPageReport",!0)("tableStyle",M(10,Ei)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[".users-container[_ngcontent-%COMP%]{width:100%}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;border-bottom:2px solid #dee2e6;padding:1rem}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]:hover{background-color:#f1f3f5}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;transition:background-color .2s ease}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:var(--highlight-bg)!important;cursor:pointer}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#212529;vertical-align:middle}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr.row-selected[_ngcontent-%COMP%]{background-color:var(--primary-color-text)!important;color:var(--primary-color)!important;border-left:3px solid var(--primary-color)!important}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr.row-selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--primary-color)!important}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-emptymessage[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;background-color:#f8f9fa}.users-table[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #dee2e6;padding:1rem}.users-table[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]   .p-paginator-left-content[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]   .p-paginator-right-content[_ngcontent-%COMP%]{color:#495057}.users-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding:0}.users-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a1a1a;margin:0;display:flex;align-items:center;gap:.5rem}.users-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.users-search-bar[_ngcontent-%COMP%]{margin-bottom:1.5rem}.users-search-bar[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]{width:100%}.users-search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:2px solid #dee2e6;border-radius:6px;font-size:1rem;transition:all .3s ease}.users-search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;background-color:#f8f9ff}.users-search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.users-search-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#adb5bd;left:.75rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-rounded{width:2.5rem;height:2.5rem}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-rounded:hover{transform:scale(1.05)}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-info{background-color:#17a2b8;border-color:#17a2b8}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-info:hover{background-color:#138496}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-warning{background-color:#ffc107;border-color:#ffc107;color:#000}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-warning:hover{background-color:#e0a800}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-danger{background-color:#dc3545;border-color:#dc3545}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button.p-button-danger:hover{background-color:#c82333}.card[_ngcontent-%COMP%]{border-radius:8px;border:none;box-shadow:0 2px 8px #00000014;overflow:hidden}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #f0f0f0;background-color:#fff}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1a1a1a;margin:0}@media (max-width: 768px){.users-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{font-size:.875rem;padding:.75rem}.users-table[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.75rem;font-size:.875rem}}"]})};var ue=Pe(ke());var Ni=["dt"],Li=()=>[10,20,30],Vi=()=>({"min-width":"70rem"});function Ri(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewCampusDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelectedCampuses())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedCampuses.length)}}function Oi(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filterCampuses())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function Bi(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Campus "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function Ai(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.viewCampus(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.editCampus(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.deleteCampus(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.campusId),d(2),h(e.campusName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function Fi(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No campuses found"),n()())}var qt=class a{constructor(t,e){this.userService=t;this.messageService=e}table;campuses=[];filteredCampuses=[];selectedCampuses=[];searchValue="";loading=!1;ngOnInit(){console.log("CampusesComponent initialized"),this.loadCampuses()}loadCampuses(){console.log("Loading campuses..."),this.loading=!0,this.userService.getCampuses().subscribe({next:t=>{console.log("Campuses loaded:",t),this.campuses=Array.isArray(t)?t:t.data||[],this.filteredCampuses=[...this.campuses],this.loading=!1,console.log("Campuses set:",this.campuses)},error:t=>{console.error("Error loading campuses:",t),ue.default.fire({title:"Error",text:"Failed to load campuses: "+(t.error?.message||t.message),icon:"error"}),this.loading=!1}})}filterCampuses(){if(!this.searchValue.trim()){this.filteredCampuses=[...this.campuses];return}let t=this.searchValue.toLowerCase();this.filteredCampuses=this.campuses.filter(e=>e.campusName?.toLowerCase().includes(t)||e.campusDirector?.toLowerCase().includes(t))}onSelectionChange(t){console.log("Selection changed:",t),console.log("Selected campuses:",this.selectedCampuses),this.selectedCampuses&&this.selectedCampuses.length>0&&console.log("Selected campus IDs:",this.selectedCampuses.map(e=>e.campusId))}viewCampus(t){let e=new Date(t.campusCreated).toLocaleDateString(),r=new Date(t.campusUpdated).toLocaleDateString();ue.default.fire({title:t.campusName,html:`
                <div style="text-align: left;">
                    <p><strong>Campus Director:</strong> ${t.campusDirector||"N/A"}</p>
                    <p><strong>Created:</strong> ${e}</p>
                    <p><strong>Updated:</strong> ${r}</p>
                </div>
            `,icon:"info",confirmButtonText:"Close"})}editCampus(t){let e={campusName:t.campusName,campusDirector:t.campusDirector};ue.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u270E Edit Campus</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Name *</label>
                            <input id="campusName" type="text" value="${e.campusName}" placeholder="Campus Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Director *</label>
                            <input id="campusDirector" type="text" value="${e.campusDirector}" placeholder="Director Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Update Campus",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let r=document.getElementById("campusName");r&&r.focus()}}).then(r=>{if(r.isConfirmed){let o=document.getElementById("campusName").value.trim(),s=document.getElementById("campusDirector").value.trim();if(!o){ue.default.fire({title:"Error",text:"Campus Name is required",icon:"error"});return}if(!s){ue.default.fire({title:"Error",text:"Campus Director is required",icon:"error"});return}let _={campusName:o,campusDirector:s};this.userService.updateCampus(t.campusId,_).subscribe({next:()=>{ue.default.fire({title:"Success!",text:"Campus updated successfully",icon:"success"}),this.loadCampuses()},error:T=>{ue.default.fire({title:"Error",text:"Failed to update campus: "+(T.error?.message||T.message),icon:"error"})}})}})}deleteCampus(t){let e=t.campusId;console.log("Deleting single campus:",e,"Full campus object:",t),ue.default.fire({title:"Confirm Delete",text:"Are you sure you want to delete this campus?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"}).then(r=>{r.isConfirmed&&this.userService.deleteCampus(e).subscribe({next:()=>{console.log("Campus deleted successfully:",e),ue.default.fire({title:"Deleted!",text:"Campus has been deleted successfully.",icon:"success"}),this.loadCampuses()},error:o=>{console.error("Error deleting campus:",e,o),ue.default.fire({title:"Error",text:"Failed to delete campus: "+(o.error?.message||o.message),icon:"error"})}})})}openNewCampusDialog(){ue.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u2795 Add New Campus</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Name *</label>
                            <input id="newCampusName" type="text" placeholder="Campus Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Campus Director *</label>
                            <input id="newCampusDirector" type="text" placeholder="Director Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Create Campus",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let t=document.getElementById("newCampusName");t&&t.focus()}}).then(t=>{if(t.isConfirmed){let e=document.getElementById("newCampusName").value.trim(),r=document.getElementById("newCampusDirector").value.trim();if(!e){ue.default.fire({title:"Error",text:"Campus Name is required",icon:"error"});return}if(!r){ue.default.fire({title:"Error",text:"Campus Director is required",icon:"error"});return}let o={campusName:e,campusDirector:r};this.userService.createCampus(o).subscribe({next:()=>{ue.default.fire({title:"Success!",text:"Campus created successfully",icon:"success"}),this.loadCampuses()},error:s=>{ue.default.fire({title:"Error",text:"Failed to create campus: "+(s.error?.message||s.message),icon:"error"})}})}})}deleteSelectedCampuses(){if(!this.selectedCampuses||this.selectedCampuses.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select campuses to delete"});return}ue.default.fire({title:"Confirm Delete",text:`Are you sure you want to delete ${this.selectedCampuses.length} campus(es)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete All",cancelButtonText:"Cancel"}).then(t=>{if(t.isConfirmed){let e=0,r=0;this.selectedCampuses.forEach(o=>{let s=o.campusId;console.log("Deleting campus:",s),this.userService.deleteCampus(s).subscribe({next:()=>{e++,console.log(`Campus deleted: ${s} (${e}/${this.selectedCampuses.length})`),e+r===this.selectedCampuses.length&&(this.selectedCampuses=[],this.loadCampuses(),ue.default.fire({title:"Deleted!",text:`${e} campus(es) deleted successfully.`,icon:"success"}))},error:_=>{r++,console.error(`Failed to delete campus ${s}:`,_),e+r===this.selectedCampuses.length&&(this.selectedCampuses=[],this.loadCampuses(),ue.default.fire({title:"Partial Delete",text:`${e} campus(es) deleted, ${r} failed.`,icon:"warning"}))}})})}})}exportCSV(){if(this.filteredCampuses.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"No data to export"});return}let t=this.generateCSV(this.filteredCampuses),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),o=URL.createObjectURL(e);r.setAttribute("href",o),r.setAttribute("download","campuses_export.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),this.messageService.add({severity:"success",summary:"Success",detail:"Campuses exported to CSV"})}generateCSV(t){let e=["Campus Name","Campus Director"],r=t.map(s=>[s.campusName||"",s.campusDirector||""]);return[e.join(","),...r.map(s=>s.map(_=>`"${_}"`).join(","))].join(`
`)}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E))};static \u0275cmp=I({type:a,selectors:[["app-campuses"]],viewQuery:function(e,r){if(e&1&&Ve(Ni,5),e&2){let o;Re(o=Oe())&&(r.table=o.first)}},features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","campusId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} campuses",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search campuses...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","campusName",2,"min-width","20rem"],["field","campusName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,Ri,3,1,"ng-template",null,0,x)(4,Oi,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedCampuses,_)||(r.selectedCampuses=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,Bi,10,0,"ng-template",4)(8,Ai,12,9,"ng-template",5)(9,Fi,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredCampuses)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,Li))("loading",r.loading)("rowHover",!0),y("selection",r.selectedCampuses),u("showCurrentPageReport",!0)("tableStyle",M(10,Vi)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:hover{opacity:.8}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}p-table[_ngcontent-%COMP%]     .p-input-icon-left>input{padding-left:2.5rem}p-table[_ngcontent-%COMP%]     .p-input-icon-left>.p-input-icon{left:.75rem}"]})};var fe=Pe(ke());var Ui=["dt"],ji=()=>[10,20,30],Wi=()=>({"min-width":"70rem"});function qi(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewDepartmentDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelectedDepartments())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedDepartments.length)}}function $i(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filterDepartments())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function Hi(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Department "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function zi(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.viewDepartment(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.editDepartment(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.deleteDepartment(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.departmentId),d(2),h(e.departmentName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function Yi(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No departments found"),n()())}var $t=class a{constructor(t,e,r){this.userService=t;this.messageService=e;this.authService=r}table;departments=[];filteredDepartments=[];selectedDepartments=[];campuses=[];searchValue="";loading=!1;ngOnInit(){this.loadDepartments(),this.loadCampuses()}loadDepartments(){this.loading=!0,this.userService.getDepartments().subscribe({next:t=>{this.departments=Array.isArray(t)?t:t.data||[],this.filteredDepartments=[...this.departments],this.loading=!1},error:t=>{console.error("Error loading departments:",t),fe.default.fire({title:"Error",text:"Failed to load departments: "+(t.error?.message||t.message),icon:"error"}),this.loading=!1}})}loadCampuses(){this.userService.getCampuses().subscribe({next:t=>{this.campuses=Array.isArray(t)?t:t.data||[]},error:t=>{console.error("Error loading campuses:",t)}})}filterDepartments(){if(!this.searchValue.trim()){this.filteredDepartments=[...this.departments];return}let t=this.searchValue.toLowerCase();this.filteredDepartments=this.departments.filter(e=>e.departmentName?.toLowerCase().includes(t)||e.campus?.campusName?.toLowerCase().includes(t))}onSelectionChange(t){this.selectedDepartments&&this.selectedDepartments.length>0}viewDepartment(t){let e=new Date(t.departmentCreated).toLocaleDateString(),r=new Date(t.departmentUpdated).toLocaleDateString();fe.default.fire({title:t.departmentName,html:`
                <div style="text-align: left;">
                    <p><strong>Campus:</strong> ${t.campus?.campusName||"N/A"}</p>
                    <p><strong>Created:</strong> ${e}</p>
                    <p><strong>Updated:</strong> ${r}</p>
                </div>
            `,icon:"info",confirmButtonText:"Close"})}editDepartment(t){let e={departmentName:t.departmentName};fe.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u270E Edit Department</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department Name *</label>
                            <input id="departmentName" type="text" value="${e.departmentName}" placeholder="Department Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Update Department",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let r=document.getElementById("departmentName");r&&r.focus()}}).then(r=>{if(r.isConfirmed){let o=document.getElementById("departmentName").value.trim();if(!o){fe.default.fire({title:"Error",text:"Department Name is required",icon:"error"});return}let s={departmentName:o};this.userService.updateDepartment(t.departmentId,s).subscribe({next:()=>{fe.default.fire({title:"Success!",text:"Department updated successfully",icon:"success"}),this.loadDepartments()},error:_=>{fe.default.fire({title:"Error",text:"Failed to update department: "+(_.error?.message||_.message),icon:"error"})}})}})}deleteDepartment(t){let e=t.departmentId;fe.default.fire({title:"Confirm Delete",text:"Are you sure you want to delete this department?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"}).then(r=>{r.isConfirmed&&this.userService.deleteDepartment(e).subscribe({next:()=>{fe.default.fire({title:"Deleted!",text:"Department has been deleted successfully.",icon:"success"}),this.loadDepartments()},error:o=>{console.error("Error deleting department:",e,o),fe.default.fire({title:"Error",text:"Failed to delete department: "+(o.error?.message||o.message),icon:"error"})}})})}openNewDepartmentDialog(){fe.default.fire({title:"",titleText:"",html:`
                <div style="text-align: left; width: 100%; max-width: 500px; margin: 0 auto;">
                    <div style="background: #f5f5f5; color: #333; padding: 16px; margin: -16px -16px 16px -16px; border-radius: 8px 8px 0 0;">
                        <h2 style="margin: 0; font-size: 18px; font-weight: 600; letter-spacing: 0.5px;">\u2795 Add New Department</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 500; margin-bottom: 6px; color: #555; font-size: 13px;">Department Name *</label>
                            <input id="newDepartmentName" type="text" placeholder="Department Name" style="width: 100%; padding: 8px 10px; border: none; border-bottom: 1.5px solid #e0e0e0; border-radius: 0; font-size: 13px; box-sizing: border-box; background: transparent;" onfocus="this.style.borderBottomColor='#667eea'" onblur="this.style.borderBottomColor='#e0e0e0'" />
                        </div>
                    </div>
                </div>
            `,width:"550px",showCancelButton:!0,confirmButtonText:"Create Department",cancelButtonText:"Cancel",confirmButtonColor:"#667eea",cancelButtonColor:"#e0e0e0",didOpen:()=>{let t=document.getElementById("newDepartmentName");t&&t.focus()}}).then(t=>{if(t.isConfirmed){let e=document.getElementById("newDepartmentName").value.trim();if(!e){fe.default.fire({title:"Error",text:"Department Name is required",icon:"error"});return}let r={departmentName:e};this.userService.createDepartment(r).subscribe({next:()=>{fe.default.fire({title:"Success!",text:"Department created successfully",icon:"success"}),this.loadDepartments()},error:o=>{fe.default.fire({title:"Error",text:"Failed to create department: "+(o.error?.message||o.message),icon:"error"})}})}})}deleteSelectedDepartments(){if(!this.selectedDepartments||this.selectedDepartments.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select departments to delete"});return}fe.default.fire({title:"Confirm Delete",text:`Are you sure you want to delete ${this.selectedDepartments.length} department(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete All",cancelButtonText:"Cancel"}).then(t=>{if(t.isConfirmed){let e=0,r=0;this.selectedDepartments.forEach(o=>{let s=o.departmentId;this.userService.deleteDepartment(s).subscribe({next:()=>{e++,e+r===this.selectedDepartments.length&&(this.selectedDepartments=[],this.loadDepartments(),fe.default.fire({title:"Deleted!",text:`${e} department(s) deleted successfully.`,icon:"success"}))},error:_=>{r++,console.error(`Failed to delete department ${s}:`,_),e+r===this.selectedDepartments.length&&(this.selectedDepartments=[],this.loadDepartments(),fe.default.fire({title:"Partial Delete",text:`${e} department(s) deleted, ${r} failed.`,icon:"warning"}))}})})}})}exportCSV(){if(this.filteredDepartments.length===0){this.messageService.add({severity:"warn",summary:"Warning",detail:"No data to export"});return}let t=this.generateCSV(this.filteredDepartments),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),o=URL.createObjectURL(e);r.setAttribute("href",o),r.setAttribute("download","departments_export.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),this.messageService.add({severity:"success",summary:"Success",detail:"Departments exported to CSV"})}generateCSV(t){let e=["Department Name","Campus Name"],r=t.map(s=>[s.departmentName||"",s.campus?.campusName||""]);return[e.join(","),...r.map(s=>s.map(_=>`"${_}"`).join(","))].join(`
`)}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Jn))};static \u0275cmp=I({type:a,selectors:[["app-departments"]],viewQuery:function(e,r){if(e&1&&Ve(Ui,5),e&2){let o;Re(o=Oe())&&(r.table=o.first)}},features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","departmentId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} departments",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search departments...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","departmentName",2,"min-width","20rem"],["field","departmentName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,qi,3,1,"ng-template",null,0,x)(4,$i,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedDepartments,_)||(r.selectedDepartments=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,Hi,10,0,"ng-template",4)(8,zi,12,9,"ng-template",5)(9,Yi,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredDepartments)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,ji))("loading",r.loading)("rowHover",!0),y("selection",r.selectedDepartments),u("showCurrentPageReport",!0)("tableStyle",M(10,Wi)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:hover{opacity:.8}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}p-table[_ngcontent-%COMP%]     .p-input-icon-left>input{padding-left:2.5rem}p-table[_ngcontent-%COMP%]     .p-input-icon-left>.p-input-icon{left:.75rem}"]})};var ze=Pe(ke());var Qi=()=>[10,20,30],Gi=()=>({"min-width":"70rem"});function Ji(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedItems.length)}}function Ki(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function Xi(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Brand "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function Zi(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.brandId),d(2),h(e.brandName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function er(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No brands found"),n()())}var Ht=class a{constructor(t,e,r){this.userService=t;this.messageService=e;this.assetService=r}items=[];filteredItems=[];selectedItems=[];searchValue="";loading=!0;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.assetService.getBrands().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading brands:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load brands"}),this.loading=!1}})}filter(){this.filteredItems=this.items.filter(t=>t.brandName?.toLowerCase().includes(this.searchValue.toLowerCase()))}onSelectionChange(t){}openNewDialog(){ze.default.fire({title:"New Brand",html:'<input type="text" id="brandName" class="swal2-input" placeholder="Brand Name" />',confirmButtonText:"Create",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("brandName")?.value.trim();return t?{brandName:t}:(ze.default.showValidationMessage("Brand name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.assetService.createBrand(t.value).subscribe({next:e=>{this.items.push(e),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Created",detail:"Brand created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}view(t){ze.default.fire({title:"Brand",html:`<strong>Name:</strong> ${t.brandName}`,icon:"info"})}edit(t){ze.default.fire({title:"Edit Brand",html:`<input type="text" id="brandName" class="swal2-input" value="${t.brandName}" />`,confirmButtonText:"Update",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("brandName")?.value.trim();return e?{brandName:e}:(ze.default.showValidationMessage("Brand name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.assetService.updateBrand(t.brandId,e.value).subscribe({next:r=>{let o=this.items.findIndex(s=>s.brandId===r.brandId);o>-1&&(this.items[o]=r),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Updated",detail:"Brand updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){ze.default.fire({title:"Delete Brand",text:`Delete "${t.brandName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.assetService.deleteBrand(t.brandId).subscribe({next:()=>{this.items=this.items.filter(r=>r.brandId!==t.brandId),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Deleted",detail:"Brand deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selectedItems?.length&&ze.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} brand(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selectedItems.map(r=>r.brandId);Promise.all(e.map(r=>this.assetService.deleteBrand(r).toPromise())).then(()=>{this.items=this.items.filter(r=>!e.includes(r.brandId)),this.filteredItems=[...this.items],this.selectedItems=[],this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected brands deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}exportCSV(){let t=`Brand Name,ID
`;this.items.forEach(s=>{t+=`${(s.brandName||"").replace(/,/g,";")},${s.brandId}
`});let e=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="brands.csv",o.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Me))};static \u0275cmp=I({type:a,selectors:[["app-brand"]],features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","brandId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} brands",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search brands...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","brandName",2,"min-width","20rem"],["field","brandName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,Ji,3,1,"ng-template",null,0,x)(4,Ki,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedItems,_)||(r.selectedItems=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,Xi,10,0,"ng-template",4)(8,Zi,12,9,"ng-template",5)(9,er,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredItems)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,Qi))("loading",r.loading)("rowHover",!0),y("selection",r.selectedItems),u("showCurrentPageReport",!0)("tableStyle",M(10,Gi)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin:0}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem;background-color:var(--primary-color);color:var(--primary-contrast-color);font-weight:600}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;vertical-align:middle}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-emptymessage>tr>td{padding:2rem;text-align:center;color:var(--text-color-secondary)}p-table[_ngcontent-%COMP%]     .p-paginator{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border)}p-toolbar[_ngcontent-%COMP%]     .p-toolbar{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border);border-radius:var(--content-border-radius);margin-bottom:1.5rem}p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start, p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{display:flex;gap:.5rem;align-items:center}p-tooltip[_ngcontent-%COMP%]     .p-tooltip{background-color:var(--surface-overlay);color:var(--text-color);border:1px solid var(--surface-border)}p-iconfield[_ngcontent-%COMP%]     input{width:250px;padding:.75rem 1rem .75rem 2.5rem;border:1px solid var(--surface-border);border-radius:var(--content-border-radius);background-color:var(--surface-card);color:var(--text-color);transition:border-color var(--element-transition-duration)}p-iconfield[_ngcontent-%COMP%]     input:focus{border-color:var(--primary-color);outline:none}p-iconfield[_ngcontent-%COMP%]     input::placeholder{color:var(--text-color-secondary)}"]})};var Ye=Pe(ke());var tr=()=>[10,20,30],nr=()=>({"min-width":"70rem"});function ir(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedItems.length)}}function rr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function or(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Color "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function ar(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.colorId),d(2),h(e.colorName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function lr(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No colors found"),n()())}var Yt=class a{constructor(t,e,r){this.userService=t;this.messageService=e;this.assetService=r}items=[];filteredItems=[];selectedItems=[];searchValue="";loading=!0;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.assetService.getColors().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading colors:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load colors"}),this.loading=!1}})}filter(){this.filteredItems=this.items.filter(t=>t.colorName?.toLowerCase().includes(this.searchValue.toLowerCase()))}onSelectionChange(t){}openNewDialog(){Ye.default.fire({title:"New Color",html:'<input type="text" id="colorName" class="swal2-input" placeholder="Color Name" />',confirmButtonText:"Create",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("colorName")?.value.trim();return t?{colorName:t}:(Ye.default.showValidationMessage("Color name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&(console.log("Creating color with data:",t.value),this.assetService.createColor(t.value).subscribe({next:e=>{console.log("Color created successfully:",e),this.items.push(e),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Created",detail:"Color created"})},error:e=>{console.error("Error creating color:",e);let r=e?.error?.message||e?.message||"Create failed";this.messageService.add({severity:"error",summary:"Error",detail:r})}}))})}view(t){Ye.default.fire({title:"Color",html:`<strong>Name:</strong> ${t.colorName}`,icon:"info"})}edit(t){Ye.default.fire({title:"Edit Color",html:`<input type="text" id="colorName" class="swal2-input" value="${t.colorName}" />`,confirmButtonText:"Update",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("colorName")?.value.trim();return e?{colorName:e}:(Ye.default.showValidationMessage("Color name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.assetService.updateColor(t.colorId,e.value).subscribe({next:r=>{let o=this.items.findIndex(s=>s.colorId===r.colorId);o>-1&&(this.items[o]=r),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Updated",detail:"Color updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){Ye.default.fire({title:"Delete Color",text:`Delete "${t.colorName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.assetService.deleteColor(t.colorId).subscribe({next:()=>{this.items=this.items.filter(r=>r.colorId!==t.colorId),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Deleted",detail:"Color deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selectedItems?.length&&Ye.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} color(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selectedItems.map(r=>r.colorId);Promise.all(e.map(r=>this.assetService.deleteColor(r).toPromise())).then(()=>{this.items=this.items.filter(r=>!e.includes(r.colorId)),this.filteredItems=[...this.items],this.selectedItems=[],this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected colors deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}exportCSV(){let t=`Color Name,ID
`;this.items.forEach(s=>{t+=`${(s.colorName||"").replace(/,/g,";")},${s.colorId}
`});let e=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="colors.csv",o.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Me))};static \u0275cmp=I({type:a,selectors:[["app-color"]],features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","colorId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} colors",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search colors...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","colorName",2,"min-width","20rem"],["field","colorName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,ir,3,1,"ng-template",null,0,x)(4,rr,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedItems,_)||(r.selectedItems=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,or,10,0,"ng-template",4)(8,ar,12,9,"ng-template",5)(9,lr,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredItems)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,tr))("loading",r.loading)("rowHover",!0),y("selection",r.selectedItems),u("showCurrentPageReport",!0)("tableStyle",M(10,nr)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin:0}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem;background-color:var(--primary-color);color:var(--primary-contrast-color);font-weight:600}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;vertical-align:middle}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-emptymessage>tr>td{padding:2rem;text-align:center;color:var(--text-color-secondary)}p-table[_ngcontent-%COMP%]     .p-paginator{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border)}p-toolbar[_ngcontent-%COMP%]     .p-toolbar{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border);border-radius:var(--content-border-radius);margin-bottom:1.5rem}p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start, p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{display:flex;gap:.5rem;align-items:center}p-tooltip[_ngcontent-%COMP%]     .p-tooltip{background-color:var(--surface-overlay);color:var(--text-color);border:1px solid var(--surface-border)}p-iconfield[_ngcontent-%COMP%]     input{width:250px;padding:.75rem 1rem .75rem 2.5rem;border:1px solid var(--surface-border);border-radius:var(--content-border-radius);background-color:var(--surface-card);color:var(--text-color);transition:border-color var(--element-transition-duration)}p-iconfield[_ngcontent-%COMP%]     input:focus{border-color:var(--primary-color);outline:none}p-iconfield[_ngcontent-%COMP%]     input::placeholder{color:var(--text-color-secondary)}"]})};var Qe=Pe(ke());var sr=()=>[10,20,30],dr=()=>({"min-width":"70rem"});function cr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedItems.length)}}function mr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function pr(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Status "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function ur(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.statusId),d(2),h(e.statusName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function gr(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No statuses found"),n()())}var Qt=class a{constructor(t,e){this.messageService=t;this.assetService=e}items=[];filteredItems=[];selectedItems=[];searchValue="";loading=!0;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.assetService.getStatuses().subscribe({next:t=>{t&&t.length>0,this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("\u274C Error loading statuses:",t),console.error("\u{1F6A8} Error status code:",t?.status),console.error("\u{1F4AC} Error message:",t?.message),console.error("\u{1F4DD} Error details:",t?.error),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load statuses: "+(t?.error?.message||t?.message)}),this.loading=!1}})}filter(){this.filteredItems=this.items.filter(t=>t.statusName?.toLowerCase().includes(this.searchValue.toLowerCase()))}onSelectionChange(t){}openNewDialog(){Qe.default.fire({title:"New Status",html:'<input type="text" id="statusName" class="swal2-input" placeholder="Status Name" />',confirmButtonText:"Create",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("statusName")?.value.trim();return t?{statusName:t}:(Qe.default.showValidationMessage("Status name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.assetService.createStatus(t.value).subscribe({next:e=>{this.items.push(e),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Created",detail:"Status created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}view(t){Qe.default.fire({title:"View Status",html:`
                <div style="text-align: left;">
                    <p><strong>Status Name:</strong> ${t.statusName}</p>
                </div>
            `,icon:"info"})}edit(t){Qe.default.fire({title:"Edit Status",html:`<input type="text" id="statusName" class="swal2-input" value="${t.statusName}" />`,confirmButtonText:"Update",cancelButtonText:"Cancel",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("statusName")?.value.trim();return e?{statusName:e}:(Qe.default.showValidationMessage("Status name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.assetService.updateStatus(t.statusId,e.value).subscribe({next:r=>{let o=this.items.findIndex(s=>s.statusId===r.statusId);o>-1&&(this.items[o]=r),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Updated",detail:"Status updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){Qe.default.fire({title:"Delete Status",text:`Delete "${t.statusName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.assetService.deleteStatus(t.statusId).subscribe({next:()=>{this.items=this.items.filter(r=>r.statusId!==t.statusId),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Deleted",detail:"Status deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selectedItems?.length&&Qe.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} status(es)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selectedItems.map(r=>r.statusId);Promise.all(e.map(r=>this.assetService.deleteStatus(r).toPromise())).then(()=>{this.items=this.items.filter(r=>!e.includes(r.statusId)),this.filteredItems=[...this.items],this.selectedItems=[],this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected statuses deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}exportCSV(){let t=`Status Name,ID
`;this.items.forEach(s=>{t+=`${(s.statusName||"").replace(/,/g,";")},${s.statusId}
`});let e=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="statuses.csv",o.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(E),w(Me))};static \u0275cmp=I({type:a,selectors:[["app-status"]],features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","statusId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} statuses",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search statuses...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","statusName",2,"min-width","20rem"],["field","statusName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,cr,3,1,"ng-template",null,0,x)(4,mr,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedItems,_)||(r.selectedItems=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,pr,10,0,"ng-template",4)(8,ur,12,9,"ng-template",5)(9,gr,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredItems)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,sr))("loading",r.loading)("rowHover",!0),y("selection",r.selectedItems),u("showCurrentPageReport",!0)("tableStyle",M(10,dr)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin:0}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem;background-color:var(--primary-color);color:var(--primary-contrast-color);font-weight:600}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;vertical-align:middle}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-emptymessage>tr>td{padding:2rem;text-align:center;color:var(--text-color-secondary)}p-table[_ngcontent-%COMP%]     .p-paginator{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border)}p-toolbar[_ngcontent-%COMP%]     .p-toolbar{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border);border-radius:var(--content-border-radius);margin-bottom:1.5rem}p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start, p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{display:flex;gap:.5rem;align-items:center}p-tooltip[_ngcontent-%COMP%]     .p-tooltip{background-color:var(--surface-overlay);color:var(--text-color);border:1px solid var(--surface-border)}p-iconfield[_ngcontent-%COMP%]     input{width:250px;padding:.75rem 1rem .75rem 2.5rem;border:1px solid var(--surface-border);border-radius:var(--content-border-radius);background-color:var(--surface-card);color:var(--text-color);transition:border-color var(--element-transition-duration)}p-iconfield[_ngcontent-%COMP%]     input:focus{border-color:var(--primary-color);outline:none}p-iconfield[_ngcontent-%COMP%]     input::placeholder{color:var(--text-color-secondary)}"]})};var de=Pe(ke());var bn=()=>[10,20,30],Cn=()=>({"min-width":"70rem"});function _r(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedItems.length)}}function fr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function hr(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Program "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function br(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.programId),d(2),h(e.programName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function Cr(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No programs found"),n()())}function xr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedItems.length)}}function yr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function vr(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Supplier "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function Sr(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.supplierId),d(2),h(e.supplierName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function wr(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No suppliers found"),n()())}var xn=".action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.action-buttons[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin:0}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:1rem;background-color:var(--primary-color);color:var(--primary-contrast-color);font-weight:600}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;vertical-align:middle}p-table[_ngcontent-%COMP%]     .p-datatable .p-datatable-emptymessage>tr>td{padding:2rem;text-align:center;color:var(--text-color-secondary)}p-table[_ngcontent-%COMP%]     .p-paginator{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border)}p-toolbar[_ngcontent-%COMP%]     .p-toolbar{padding:1rem;background-color:var(--surface-overlay);border:1px solid var(--surface-border);border-radius:var(--content-border-radius);margin-bottom:1.5rem}p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start, p-toolbar[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{display:flex;gap:.5rem;align-items:center}p-tooltip[_ngcontent-%COMP%]     .p-tooltip{background-color:var(--surface-overlay);color:var(--text-color);border:1px solid var(--surface-border)}p-iconfield[_ngcontent-%COMP%]     input{width:250px;padding:.75rem 1rem .75rem 2.5rem;border:1px solid var(--surface-border);border-radius:var(--content-border-radius);background-color:var(--surface-card);color:var(--text-color);transition:border-color var(--element-transition-duration)}p-iconfield[_ngcontent-%COMP%]     input:focus{border-color:var(--primary-color);outline:none}p-iconfield[_ngcontent-%COMP%]     input::placeholder{color:var(--text-color-secondary)}";function Mr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNewDialog())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selectedItems.length)}}function Er(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function Tr(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Location "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function Ir(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.locationId),d(2),h(e.locationName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function Pr(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No locations found"),n()())}var St=class a{constructor(t,e,r){this.userService=t;this.messageService=e;this.assetService=r}items=[];filteredItems=[];selectedItems=[];searchValue="";loading=!0;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.items=[],this.filteredItems=[]}filter(){this.filteredItems=this.items.filter(t=>this.getItemName(t)?.toLowerCase().includes(this.searchValue.toLowerCase()))}getItemName(t){return t.name||t.brandName||t.locationName||t.supplierName||t.programName||t.colorName||""}onSelectionChange(t){}openNewDialog(){}view(t){let e=this.getItemName(t);de.default.fire({title:"View "+this.itemLabel,html:"<strong>Name:</strong> "+e,icon:"info"})}edit(t){}delete(t){}deleteSelected(){}exportCSV(){let t=this.itemLabel+` Name
`;this.items.forEach(s=>{let _=this.getItemName(s);t+=_+`
`});let e=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=this.itemLabel.toLowerCase()+".csv",o.click(),window.URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Me))};static \u0275dir=Rn({type:a})},Gt=class a extends St{itemLabel="Program";constructor(t,e,r){super(t,e,r)}loadItems(){this.loading=!0,this.assetService.getPrograms().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading programs:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load programs"}),this.loading=!1}})}getItemName(t){return t.programName||""}openNewDialog(){de.default.fire({title:"New Program",html:`<input id="programName" class="swal2-input" placeholder="Program Name" />
                   <textarea id="description" class="swal2-textarea" placeholder="Description"></textarea>`,confirmButtonText:"Create",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("programName").value.trim(),e=document.getElementById("description").value.trim();return t?{programName:t,description:e}:(de.default.showValidationMessage("Program name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.assetService.createProgram(t.value).subscribe({next:e=>{this.items.push(e),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Created",detail:"Program created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}edit(t){de.default.fire({title:"Edit Program",html:`<input id="programName" class="swal2-input" value="${t.programName}" />
                   <textarea id="description" class="swal2-textarea">${t.description||""}</textarea>`,confirmButtonText:"Update",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("programName").value.trim(),r=document.getElementById("description").value.trim();return e?{programName:e,description:r}:(de.default.showValidationMessage("Program name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.assetService.updateProgram(t.programId,e.value).subscribe({next:r=>{let o=this.items.findIndex(s=>s.programId===r.programId);o>-1&&(this.items[o]=r),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Updated",detail:"Program updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){de.default.fire({title:"Delete Program",text:`Delete "${t.programName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.assetService.deleteProgram(t.programId).subscribe({next:()=>{this.items=this.items.filter(r=>r.programId!==t.programId),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Deleted",detail:"Program deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selectedItems?.length&&de.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} program(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selectedItems.map(r=>r.programId);Promise.all(e.map(r=>this.assetService.deleteProgram(r).toPromise())).then(()=>{this.items=this.items.filter(r=>!e.includes(r.programId)),this.filteredItems=[...this.items],this.selectedItems=[],this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected programs deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Me))};static \u0275cmp=I({type:a,selectors:[["app-program"]],features:[U([E]),rt],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","programId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} programs",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search programs...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","programName",2,"min-width","20rem"],["field","programName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,_r,3,1,"ng-template",null,0,x)(4,fr,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedItems,_)||(r.selectedItems=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,hr,10,0,"ng-template",4)(8,br,12,9,"ng-template",5)(9,Cr,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredItems)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,bn))("loading",r.loading)("rowHover",!0),y("selection",r.selectedItems),u("showCurrentPageReport",!0)("tableStyle",M(10,Cn)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[xn]})},Jt=class a extends St{itemLabel="Supplier";constructor(t,e,r){super(t,e,r)}loadItems(){this.loading=!0,this.assetService.getSuppliers().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading suppliers:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load suppliers"}),this.loading=!1}})}getItemName(t){return t.supplierName||""}openNewDialog(){de.default.fire({title:"New Supplier",html:`<input id="supplierName" class="swal2-input" placeholder="Supplier Name" />
                   <textarea id="contactInfo" class="swal2-textarea" placeholder="Contact Info"></textarea>`,confirmButtonText:"Create",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("supplierName").value.trim(),e=document.getElementById("contactInfo").value.trim();return t?{supplierName:t,contactInfo:e}:(de.default.showValidationMessage("Supplier name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.assetService.createSupplier(t.value).subscribe({next:e=>{this.items.push(e),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Created",detail:"Supplier created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}edit(t){de.default.fire({title:"Edit Supplier",html:`<input id="supplierName" class="swal2-input" value="${t.supplierName}" />
                   <textarea id="contactInfo" class="swal2-textarea">${t.contactInfo||""}</textarea>`,confirmButtonText:"Update",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("supplierName").value.trim(),r=document.getElementById("contactInfo").value.trim();return e?{supplierName:e,contactInfo:r}:(de.default.showValidationMessage("Supplier name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.assetService.updateSupplier(t.supplierId,e.value).subscribe({next:r=>{let o=this.items.findIndex(s=>s.supplierId===r.supplierId);o>-1&&(this.items[o]=r),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Updated",detail:"Supplier updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){de.default.fire({title:"Delete Supplier",text:`Delete "${t.supplierName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.assetService.deleteSupplier(t.supplierId).subscribe({next:()=>{this.items=this.items.filter(r=>r.supplierId!==t.supplierId),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Deleted",detail:"Supplier deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selectedItems?.length&&de.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} supplier(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selectedItems.map(r=>r.supplierId);Promise.all(e.map(r=>this.assetService.deleteSupplier(r).toPromise())).then(()=>{this.items=this.items.filter(r=>!e.includes(r.supplierId)),this.filteredItems=[...this.items],this.selectedItems=[],this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected suppliers deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Me))};static \u0275cmp=I({type:a,selectors:[["app-supplier"]],features:[U([E]),rt],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","supplierId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} suppliers",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search suppliers...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","supplierName",2,"min-width","20rem"],["field","supplierName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,xr,3,1,"ng-template",null,0,x)(4,yr,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedItems,_)||(r.selectedItems=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,vr,10,0,"ng-template",4)(8,Sr,12,9,"ng-template",5)(9,wr,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredItems)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,bn))("loading",r.loading)("rowHover",!0),y("selection",r.selectedItems),u("showCurrentPageReport",!0)("tableStyle",M(10,Cn)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[xn]})},Kt=class a extends St{itemLabel="Location";constructor(t,e,r){super(t,e,r)}loadItems(){this.loading=!0,this.assetService.getLocations().subscribe({next:t=>{this.items=t||[],this.filteredItems=[...this.items],this.loading=!1},error:t=>{console.error("Error loading locations:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load locations"}),this.loading=!1}})}getItemName(t){return t.locationName||""}openNewDialog(){de.default.fire({title:"New Location",html:`<input id="locationName" class="swal2-input" placeholder="Location Name" />
                  <textarea id="description" class="swal2-textarea" placeholder="Description"></textarea>`,confirmButtonText:"Create",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("locationName").value.trim(),e=document.getElementById("description").value.trim();return t?{locationName:t,description:e}:(de.default.showValidationMessage("Location name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.assetService.createLocation(t.value).subscribe({next:e=>{this.items.push(e),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Created",detail:"Location created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}edit(t){de.default.fire({title:"Edit Location",html:`<input id="locationName" class="swal2-input" value="${t.locationName}" />
                  <textarea id="description" class="swal2-textarea">${t.description||""}</textarea>`,confirmButtonText:"Update",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("locationName").value.trim(),r=document.getElementById("description").value.trim();return e?{locationName:e,description:r}:(de.default.showValidationMessage("Location name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.assetService.updateLocation(t.locationId,e.value).subscribe({next:r=>{let o=this.items.findIndex(s=>s.locationId===r.locationId);o>-1&&(this.items[o]=r),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Updated",detail:"Location updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){de.default.fire({title:"Delete Location",text:`Delete "${t.locationName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.assetService.deleteLocation(t.locationId).subscribe({next:()=>{this.items=this.items.filter(r=>r.locationId!==t.locationId),this.filteredItems=[...this.items],this.messageService.add({severity:"success",summary:"Deleted",detail:"Location deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selectedItems?.length&&de.default.fire({title:"Delete Selected",text:`Delete ${this.selectedItems.length} location(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selectedItems.map(r=>r.locationId);Promise.all(e.map(r=>this.assetService.deleteLocation(r).toPromise())).then(()=>{this.items=this.items.filter(r=>!e.includes(r.locationId)),this.filteredItems=[...this.items],this.selectedItems=[],this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected locations deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}static \u0275fac=function(e){return new(e||a)(w(Ce),w(E),w(Me))};static \u0275cmp=I({type:a,selectors:[["app-location"]],features:[U([E]),rt],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","locationId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} locations",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search locations...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","locationName",2,"min-width","20rem"],["field","locationName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,Mr,3,1,"ng-template",null,0,x)(4,Er,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selectedItems,_)||(r.selectedItems=_),p(_)}),f("selectionChange",function(_){return m(o),p(r.onSelectionChange(_))}),C(7,Tr,10,0,"ng-template",4)(8,Ir,12,9,"ng-template",5)(9,Pr,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filteredItems)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,bn))("loading",r.loading)("rowHover",!0),y("selection",r.selectedItems),u("showCurrentPageReport",!0)("tableStyle",M(10,Cn)))},dependencies:[P,Y,$,D,V,R,F,H,z,te,ne,A,G,le,B,O,W,j,J,Z,K,ee,L,Q,k,N],styles:[xn]})};var oi=[{path:"brand",component:Ht},{path:"color",component:Yt},{path:"program",component:Gt},{path:"supplier",component:Jt},{path:"location",component:Kt},{path:"status",component:Qt}];var Ge=Pe(ke());var Dr=()=>[10,20,30],kr=()=>({"min-width":"90rem"});function Nr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNew())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selected.length)}}function Lr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function Vr(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Service Name "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Description"),n(),i(10,"th",18),l(11,"Actions"),n()())}function Rr(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",19),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td"),l(8),n(),i(9,"td")(10,"div",20)(11,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(12,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(13,"p-button",23),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.serviceMaintenanceId),d(2),h(e.serviceName),d(2),h(e.serviceDescription),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function Or(a,t){a&1&&(i(0,"tr")(1,"td",24),l(2,"No services found"),n()())}var Xt=class a{constructor(t,e){this.maintenanceService=t;this.messageService=e}services=[];filtered=[];selected=[];loading=!1;searchValue="";ngOnInit(){this.load()}load(){this.loading=!0,this.maintenanceService.getServiceMaintenances().subscribe({next:t=>{this.services=t||[],this.filtered=[...this.services],this.loading=!1},error:t=>{console.error("Error loading service maintenances",t),this.loading=!1}})}filter(){let t=this.searchValue.toLowerCase();this.filtered=this.services.filter(e=>e.serviceName.toLowerCase().includes(t)||e.serviceDescription.toLowerCase().includes(t))}onSelectionChange(){}openNew(){Ge.default.fire({title:"New Service",html:`
              <input id="serviceName" class="swal2-input" placeholder="Service Name" />
              <textarea id="serviceDescription" class="swal2-textarea" placeholder="Description"></textarea>
            `,confirmButtonText:"Create",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("serviceName").value.trim(),e=document.getElementById("serviceDescription").value.trim();return t?{serviceName:t,serviceDescription:e}:(Ge.default.showValidationMessage("Service name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.maintenanceService.createServiceMaintenance(t.value).subscribe({next:e=>{this.messageService.add({severity:"success",summary:"Created",detail:"Service created"}),this.services.push(e),this.filter()},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}view(t){Ge.default.fire({title:"Service",html:`<b>${t.serviceName}</b><br/><em>${t.serviceDescription||"No description"}</em>`})}edit(t){Ge.default.fire({title:"Edit Service",html:`
              <input id="serviceName" class="swal2-input" value="${t.serviceName}" />
              <textarea id="serviceDescription" class="swal2-textarea">${t.serviceDescription||""}</textarea>
            `,confirmButtonText:"Update",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("serviceName").value.trim(),r=document.getElementById("serviceDescription").value.trim();return e?{serviceName:e,serviceDescription:r}:(Ge.default.showValidationMessage("Service name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.maintenanceService.updateServiceMaintenance(t.serviceMaintenanceId,e.value).subscribe({next:r=>{let o=this.services.findIndex(s=>s.serviceMaintenanceId===r.serviceMaintenanceId);o>-1&&(this.services[o]=r),this.filter(),this.messageService.add({severity:"success",summary:"Updated",detail:"Service updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){Ge.default.fire({title:"Delete Service",text:`Delete "${t.serviceName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.maintenanceService.deleteServiceMaintenance(t.serviceMaintenanceId).subscribe({next:()=>{this.services=this.services.filter(r=>r.serviceMaintenanceId!==t.serviceMaintenanceId),this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Service deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selected.length&&Ge.default.fire({title:"Delete Selected",text:`Delete ${this.selected.length} service(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selected.map(r=>r.serviceMaintenanceId);Promise.all(e.map(r=>this.maintenanceService.deleteServiceMaintenance(r).toPromise())).then(()=>{this.services=this.services.filter(r=>!e.includes(r.serviceMaintenanceId)),this.selected=[],this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected services deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}exportCSV(){let t=`Service Name,Description,ID
`;this.services.forEach(s=>t+=`${s.serviceName.replace(/,/g,";")},${(s.serviceDescription||"").replace(/,/g,";")},${s.serviceMaintenanceId}
`);let e=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="maintenance-services.csv",o.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(Ae),w(E))};static \u0275cmp=I({type:a,selectors:[["app-maintenance-services"]],features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","serviceMaintenanceId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} services",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search services...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","serviceName",2,"min-width","20rem"],["field","serviceName"],[2,"min-width","35rem"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","5",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,Nr,3,1,"ng-template",null,0,x)(4,Lr,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selected,_)||(r.selected=_),p(_)}),f("selectionChange",function(){return m(o),p(r.onSelectionChange())}),C(7,Vr,12,0,"ng-template",4)(8,Rr,14,10,"ng-template",5)(9,Or,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filtered)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,Dr))("loading",r.loading)("rowHover",!0),y("selection",r.selected),u("showCurrentPageReport",!0)("tableStyle",M(10,kr)))},dependencies:[P,R,F,$,H,z,te,ne,B,O,D,V,A,G,J,Z,K,ee,L,Q,k,N,W,j],encapsulation:2})};var Je=Pe(ke());var Br=()=>[10,20,30],Ar=()=>({"min-width":"70rem"});function Fr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNew())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selected.length)}}function Ur(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function jr(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Status Name "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function Wr(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.requestStatusId),d(2),h(e.requestStatusName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function qr(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No statuses found"),n()())}var en=class a{constructor(t,e){this.maintenanceService=t;this.messageService=e}statuses=[];filtered=[];selected=[];loading=!1;searchValue="";ngOnInit(){this.load()}load(){this.loading=!0,this.maintenanceService.getRequestStatuses().subscribe({next:t=>{this.statuses=t||[],this.filtered=[...this.statuses],this.loading=!1},error:t=>{console.error("Error loading request statuses",t),this.loading=!1}})}filter(){let t=this.searchValue.toLowerCase();this.filtered=this.statuses.filter(e=>e.requestStatusName.toLowerCase().includes(t))}onSelectionChange(){}openNew(){Je.default.fire({title:"New Status",html:'<input id="statusName" class="swal2-input" placeholder="Status Name" />',confirmButtonText:"Create",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("statusName").value.trim();return t?{requestStatusName:t}:(Je.default.showValidationMessage("Status name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.maintenanceService.createRequestStatus(t.value).subscribe({next:e=>{this.statuses.push(e),this.filter(),this.messageService.add({severity:"success",summary:"Created",detail:"Status created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}view(t){Je.default.fire({title:"Status",text:t.requestStatusName})}edit(t){Je.default.fire({title:"Edit Status",html:`<input id="statusName" class="swal2-input" value="${t.requestStatusName}" />`,confirmButtonText:"Update",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("statusName").value.trim();return e?{requestStatusName:e}:(Je.default.showValidationMessage("Status name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.maintenanceService.updateRequestStatus(t.requestStatusId,e.value).subscribe({next:r=>{let o=this.statuses.findIndex(s=>s.requestStatusId===r.requestStatusId);o>-1&&(this.statuses[o]=r),this.filter(),this.messageService.add({severity:"success",summary:"Updated",detail:"Status updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){Je.default.fire({title:"Delete Status",text:`Delete "${t.requestStatusName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.maintenanceService.deleteRequestStatus(t.requestStatusId).subscribe({next:()=>{this.statuses=this.statuses.filter(r=>r.requestStatusId!==t.requestStatusId),this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Status deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selected.length&&Je.default.fire({title:"Delete Selected",text:`Delete ${this.selected.length} status(es)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selected.map(r=>r.requestStatusId);Promise.all(e.map(r=>this.maintenanceService.deleteRequestStatus(r).toPromise())).then(()=>{this.statuses=this.statuses.filter(r=>!e.includes(r.requestStatusId)),this.selected=[],this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected statuses deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}exportCSV(){let t=`Status Name,ID
`;this.statuses.forEach(s=>t+=`${s.requestStatusName.replace(/,/g,";")},${s.requestStatusId}
`);let e=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="maintenance-status.csv",o.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(Ae),w(E))};static \u0275cmp=I({type:a,selectors:[["app-maintenance-status"]],features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","requestStatusId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} statuses",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search status...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","requestStatusName",2,"min-width","20rem"],["field","requestStatusName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,Fr,3,1,"ng-template",null,0,x)(4,Ur,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selected,_)||(r.selected=_),p(_)}),f("selectionChange",function(){return m(o),p(r.onSelectionChange())}),C(7,jr,10,0,"ng-template",4)(8,Wr,12,9,"ng-template",5)(9,qr,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filtered)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,Br))("loading",r.loading)("rowHover",!0),y("selection",r.selected),u("showCurrentPageReport",!0)("tableStyle",M(10,Ar)))},dependencies:[P,R,F,$,H,z,te,ne,B,O,A,G,J,Z,K,ee,L,Q,k,N,D,V,W,j],encapsulation:2})};var Ke=Pe(ke());var $r=()=>[10,20,30],Hr=()=>({"min-width":"70rem"});function zr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNew())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selected.length)}}function Yr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function Qr(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Priority Level "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function Gr(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td")(8,"div",19)(9,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(10,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(11,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.priorityLevelId),d(2),h(e.priorityLevelName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function Jr(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No priority levels found"),n()())}var tn=class a{constructor(t,e){this.maintenanceService=t;this.messageService=e}priorityLevels=[];filtered=[];selected=[];loading=!1;searchValue="";ngOnInit(){this.load()}load(){this.loading=!0,this.maintenanceService.getPriorityLevels().subscribe({next:t=>{this.priorityLevels=t||[],this.filtered=[...this.priorityLevels],this.loading=!1},error:t=>{console.error("Error loading priority levels",t),this.loading=!1}})}filter(){let t=this.searchValue.toLowerCase();this.filtered=this.priorityLevels.filter(e=>e.priorityLevelName.toLowerCase().includes(t))}onSelectionChange(){}openNew(){Ke.default.fire({title:"New Priority Level",html:'<input id="plName" class="swal2-input" placeholder="Priority Level" />',confirmButtonText:"Create",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("plName").value.trim();return t?{priorityLevelName:t}:(Ke.default.showValidationMessage("Priority level name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.maintenanceService.createPriorityLevel(t.value).subscribe({next:e=>{this.priorityLevels.push(e),this.filter(),this.messageService.add({severity:"success",summary:"Created",detail:"Priority level created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}view(t){Ke.default.fire({title:"Priority Level",text:t.priorityLevelName})}edit(t){Ke.default.fire({title:"Edit Priority Level",html:`<input id="plName" class="swal2-input" value="${t.priorityLevelName}" />`,confirmButtonText:"Update",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("plName").value.trim();return e?{priorityLevelName:e}:(Ke.default.showValidationMessage("Priority level name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.maintenanceService.updatePriorityLevel(t.priorityLevelId,e.value).subscribe({next:r=>{let o=this.priorityLevels.findIndex(s=>s.priorityLevelId===r.priorityLevelId);o>-1&&(this.priorityLevels[o]=r),this.filter(),this.messageService.add({severity:"success",summary:"Updated",detail:"Priority level updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){Ke.default.fire({title:"Delete Priority Level",text:`Delete "${t.priorityLevelName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.maintenanceService.deletePriorityLevel(t.priorityLevelId).subscribe({next:()=>{this.priorityLevels=this.priorityLevels.filter(r=>r.priorityLevelId!==t.priorityLevelId),this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Priority level deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selected.length&&Ke.default.fire({title:"Delete Selected",text:`Delete ${this.selected.length} level(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selected.map(r=>r.priorityLevelId);Promise.all(e.map(r=>this.maintenanceService.deletePriorityLevel(r).toPromise())).then(()=>{this.priorityLevels=this.priorityLevels.filter(r=>!e.includes(r.priorityLevelId)),this.selected=[],this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected priority levels deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}exportCSV(){let t=`Priority Level,ID
`;this.priorityLevels.forEach(s=>t+=`${s.priorityLevelName.replace(/,/g,";")},${s.priorityLevelId}
`);let e=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="priority-levels.csv",o.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(Ae),w(E))};static \u0275cmp=I({type:a,selectors:[["app-maintenance-priority-level"]],features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","priorityLevelId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} levels",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search levels...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","priorityLevelName",2,"min-width","20rem"],["field","priorityLevelName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,zr,3,1,"ng-template",null,0,x)(4,Yr,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selected,_)||(r.selected=_),p(_)}),f("selectionChange",function(){return m(o),p(r.onSelectionChange())}),C(7,Qr,10,0,"ng-template",4)(8,Gr,12,9,"ng-template",5)(9,Jr,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filtered)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,$r))("loading",r.loading)("rowHover",!0),y("selection",r.selected),u("showCurrentPageReport",!0)("tableStyle",M(10,Hr)))},dependencies:[P,R,F,$,H,z,te,ne,B,O,A,G,J,Z,K,ee,L,Q,k,N,D,V,W,j],encapsulation:2})};var Xe=Pe(ke());var Kr=()=>[10,20,30],Xr=()=>({"min-width":"70rem"});function Zr(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",8),f("onClick",function(){m(e);let o=c();return p(o.openNew())}),n(),i(2,"p-button",9),f("onClick",function(){m(e);let o=c();return p(o.deleteSelected())}),n()()}if(a&2){let e=c();d(2),u("disabled",!e.selected.length)}}function eo(a,t){if(a&1){let e=b();i(0,"div",7)(1,"p-button",10),f("onClick",function(){m(e);let o=c();return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",11),i(4,"input",12),S("ngModelChange",function(o){m(e);let s=c();return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c();return p(o.filter())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.searchValue)}}function to(a,t){a&1&&(i(0,"tr")(1,"th",13),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",14),l(4,"ID"),n(),i(5,"th",15),l(6,"Type Name "),g(7,"p-sortIcon",16),n(),i(8,"th",17),l(9,"Actions"),n()())}function no(a,t){if(a&1){let e=b();i(0,"tr")(1,"td"),g(2,"p-tableCheckbox",18),n(),i(3,"td"),l(4),n(),l(5,"qq "),i(6,"td"),l(7),n(),i(8,"td")(9,"div",19)(10,"p-button",20),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.view(o))}),n(),i(11,"p-button",21),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.edit(o))}),n(),i(12,"p-button",22),f("onClick",function(){let o=m(e).$implicit,s=c();return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.maintenanceTypeId),d(3),h(e.maintenanceTypeName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function io(a,t){a&1&&(i(0,"tr")(1,"td",23),l(2,"No maintenance types found"),n()())}var nn=class a{constructor(t,e){this.maintenanceService=t;this.messageService=e}types=[];filtered=[];selected=[];loading=!1;searchValue="";ngOnInit(){this.load()}load(){this.loading=!0,this.maintenanceService.getMaintenanceTypes().subscribe({next:t=>{this.types=t||[],this.filtered=[...this.types],this.loading=!1},error:t=>{console.error("Error loading maintenance types",t),this.loading=!1}})}filter(){let t=this.searchValue.toLowerCase();this.filtered=this.types.filter(e=>e.maintenanceTypeName.toLowerCase().includes(t))}onSelectionChange(){}openNew(){Xe.default.fire({title:"New Maintenance Type",html:'<input id="mtName" class="swal2-input" placeholder="Type Name" />',confirmButtonText:"Create",showCancelButton:!0,preConfirm:()=>{let t=document.getElementById("mtName").value.trim();return t?{maintenanceTypeName:t}:(Xe.default.showValidationMessage("Type name is required"),!1)}}).then(t=>{t.isConfirmed&&t.value&&this.maintenanceService.createMaintenanceType(t.value).subscribe({next:e=>{this.types.push(e),this.filter(),this.messageService.add({severity:"success",summary:"Created",detail:"Type created"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Create failed"})})})}view(t){Xe.default.fire({title:"Maintenance Type",text:t.maintenanceTypeName})}edit(t){Xe.default.fire({title:"Edit Maintenance Type",html:`<input id="mtName" class="swal2-input" value="${t.maintenanceTypeName}" />`,confirmButtonText:"Update",showCancelButton:!0,preConfirm:()=>{let e=document.getElementById("mtName").value.trim();return e?{maintenanceTypeName:e}:(Xe.default.showValidationMessage("Type name is required"),!1)}}).then(e=>{e.isConfirmed&&e.value&&this.maintenanceService.updateMaintenanceType(t.maintenanceTypeId,e.value).subscribe({next:r=>{let o=this.types.findIndex(s=>s.maintenanceTypeId===r.maintenanceTypeId);o>-1&&(this.types[o]=r),this.filter(),this.messageService.add({severity:"success",summary:"Updated",detail:"Type updated"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Update failed"})})})}delete(t){Xe.default.fire({title:"Delete Maintenance Type",text:`Delete "${t.maintenanceTypeName}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&this.maintenanceService.deleteMaintenanceType(t.maintenanceTypeId).subscribe({next:()=>{this.types=this.types.filter(r=>r.maintenanceTypeId!==t.maintenanceTypeId),this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Type deleted"})},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Delete failed"})})})}deleteSelected(){this.selected.length&&Xe.default.fire({title:"Delete Selected",text:`Delete ${this.selected.length} type(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then(t=>{if(t.isConfirmed){let e=this.selected.map(r=>r.maintenanceTypeId);Promise.all(e.map(r=>this.maintenanceService.deleteMaintenanceType(r).toPromise())).then(()=>{this.types=this.types.filter(r=>!e.includes(r.maintenanceTypeId)),this.selected=[],this.filter(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Selected types deleted"})}).catch(()=>this.messageService.add({severity:"error",summary:"Error",detail:"Bulk delete failed"}))}})}exportCSV(){let t=`Type Name,ID
`;this.types.forEach(s=>t+=`${s.maintenanceTypeName.replace(/,/g,";")},${s.maintenanceTypeId}
`);let e=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="maintenance-types.csv",o.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||a)(w(Ae),w(E))};static \u0275cmp=I({type:a,selectors:[["app-maintenance-types"]],features:[U([E])],decls:10,vars:11,consts:[["start",""],["end",""],["styleClass","mb-4"],["dataKey","maintenanceTypeId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} types",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search types...",3,"ngModelChange","input","ngModel"],[2,"width","3rem"],[2,"min-width","25rem"],["pSortableColumn","maintenanceTypeName",2,"min-width","20rem"],["field","maintenanceTypeName"],[2,"min-width","12rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","4",1,"text-center","py-5"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",2),C(2,Zr,3,1,"ng-template",null,0,x)(4,eo,5,1,"ng-template",null,1,x),n(),i(6,"p-table",3),S("selectionChange",function(_){return m(o),v(r.selected,_)||(r.selected=_),p(_)}),f("selectionChange",function(){return m(o),p(r.onSelectionChange())}),C(7,to,10,0,"ng-template",4)(8,no,13,9,"ng-template",5)(9,io,3,0,"ng-template",6),n()}e&2&&(d(6),u("value",r.filtered)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,Kr))("loading",r.loading)("rowHover",!0),y("selection",r.selected),u("showCurrentPageReport",!0)("tableStyle",M(10,Xr)))},dependencies:[P,R,F,$,H,z,te,ne,B,O,A,G,J,Z,K,ee,L,Q,k,N,D,V,W,j],encapsulation:2})};var lo=["dt"],so=()=>({width:"500px"}),co=()=>({width:"50vw"}),mo=()=>({"960px":"75vw","640px":"90vw"});function po(a,t){if(a&1){let e=b();i(0,"div",20)(1,"p-button",21),f("onClick",function(){m(e);let o=c();return p(o.openNew())}),n(),g(2,"p-button",22),n()}}function uo(a,t){if(a&1){let e=b();i(0,"div",20)(1,"label",23),l(2,"Filter by Laboratory:"),n(),i(3,"p-select",24),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedLaboratory,o)||(s.selectedLaboratory=o),p(o)}),f("onChange",function(){m(e);let o=c();return p(o.onLaboratoryFilterChange())}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedLaboratory),u("options",e.laboratories)("showClear",!0)}}function go(a,t){if(a&1){let e=b();i(0,"div",29),f("click",function(){let o=m(e).$implicit,s=c(3);return p(s.viewSchedule(o))}),i(1,"div",30),l(2),n(),i(3,"div",31),l(4),n(),i(5,"div",32),l(6),n()()}if(a&2){let e=t.$implicit,r=c(3);Lt("grid-row","span "+r.getRowSpan(e))("min-height",r.getRowSpan(e)*60,"px"),u("ngClass","schedule-block "+r.getScheduleColor(e)),d(2),h(e.subject==null?null:e.subject.subjectCode),d(2),De("",e.faculty==null?null:e.faculty.firstName," ",e.faculty==null?null:e.faculty.lastName),d(2),De("",e.startTime," - ",e.endTime)}}function _o(a,t){if(a&1&&(i(0,"td",27),C(1,go,7,10,"div",28),n()),a&2){let e=t.$implicit,r=c().index,o=c();d(),u("ngForOf",o.getSchedulesStartingAtSlot(r,e))}}function fo(a,t){if(a&1&&(i(0,"tr")(1,"td",25),l(2),n(),C(3,_o,2,1,"td",26),n()),a&2){let e=t.$implicit,r=c();d(2),h(e),d(),u("ngForOf",r.daysOfWeek)}}function ho(a,t){if(a&1){let e=b();i(0,"div",33)(1,"div",13)(2,"label",14),l(3,"Laboratory *"),n(),i(4,"p-select",34),S("ngModelChange",function(o){m(e);let s=c();return v(s.newSchedule.laboratory,o)||(s.newSchedule.laboratory=o),p(o)}),n()(),i(5,"div",13)(6,"label",14),l(7,"Instructor"),n(),i(8,"p-select",35),S("ngModelChange",function(o){m(e);let s=c();return v(s.newSchedule.instructor,o)||(s.newSchedule.instructor=o),p(o)}),n()(),i(9,"div",16)(10,"label",14),l(11,"Day *"),n(),i(12,"p-select",36),S("ngModelChange",function(o){m(e);let s=c();return v(s.newSchedule.day,o)||(s.newSchedule.day=o),p(o)}),n()(),i(13,"div",16)(14,"label",14),l(15,"Subject *"),n(),i(16,"div",37)(17,"p-select",38),S("ngModelChange",function(o){m(e);let s=c();return v(s.newSchedule.activity,o)||(s.newSchedule.activity=o),p(o)}),n(),i(18,"p-button",39),f("click",function(){m(e);let o=c();return p(o.openCreateSubjectDialog())}),n()()(),i(19,"div",16)(20,"label",14),l(21,"Time *"),n(),i(22,"input",40),S("ngModelChange",function(o){m(e);let s=c();return v(s.newSchedule.time,o)||(s.newSchedule.time=o),p(o)}),n()(),i(23,"div",16)(24,"label",14),l(25,"End Time *"),n(),i(26,"input",40),S("ngModelChange",function(o){m(e);let s=c();return v(s.newSchedule.endTime,o)||(s.newSchedule.endTime=o),p(o)}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.newSchedule.laboratory),u("options",e.laboratories),d(4),y("ngModel",e.newSchedule.instructor),u("options",e.users)("showClear",!0),d(4),y("ngModel",e.newSchedule.day),u("options",e.daysOfWeek),d(5),y("ngModel",e.newSchedule.activity),u("options",e.subjects),d(5),y("ngModel",e.newSchedule.time),d(4),y("ngModel",e.newSchedule.endTime)}}function bo(a,t){if(a&1){let e=b();i(0,"div",41)(1,"p-button",42),f("click",function(){m(e);let o=c();return p(o.closeDialog())}),n(),i(2,"p-button",43),f("click",function(){m(e);let o=c();return p(o.saveSchedule())}),n()()}}function Co(a,t){if(a&1){let e=b();i(0,"div",41)(1,"p-button",42),f("click",function(){m(e);let o=c();return p(o.closeSubjectDialog())}),n(),i(2,"p-button",44),f("click",function(){m(e);let o=c();return p(o.saveSubject())}),n()()}}var rn=class a{constructor(t,e){this.messageService=t;this.http=e}dt;schedules=[];timeSlots=[];daysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];laboratories=[];users=[];subjects=[];selectedLaboratory=null;scheduleDialog=!1;newSchedule=this.getEmptySchedule();subjectDialog=!1;newSubject=this.getEmptySubject();apiUrl=`${ae.apiUrl}/laboratories`;ngOnInit(){this.initializeTimeSlots(),this.loadLaboratories(),this.loadUsers(),this.loadSubjects(),this.loadSchedules()}initializeTimeSlots(){let r=[];for(let o=7;o<=21;o++)for(let s=0;s<60;s+=30){let _=o>=12?"PM":"AM",T=o>12?o-12:o===0?12:o,X=`${String(T).padStart(2,"0")}:${String(s).padStart(2,"0")} ${_}`;r.push(X)}this.timeSlots=r}getEmptySchedule(){return{id:"",laboratory:"",day:"",time:"",endTime:"",activity:"",instructor:"",color:"#1f2937"}}getEmptySubject(){return{subjectName:"",subjectCode:"",numberOfStudents:0,units:""}}loadLaboratories(){console.log("\u{1F4E1} Fetching laboratories from:",this.apiUrl),this.http.get(this.apiUrl).subscribe({next:t=>{console.log("\u2705 Laboratories loaded:",t),this.laboratories=t||[],this.laboratories.length>0&&(this.selectedLaboratory=this.laboratories[0],this.onLaboratoryFilterChange())},error:t=>{console.error("\u274C Error loading laboratories:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load laboratories: "+(t?.error?.message||t?.message)})}})}loadUsers(){let t=`${ae.apiUrl}/users`;console.log("\u{1F4E1} Fetching users from:",t),this.http.get(t).subscribe({next:e=>{console.log("\u2705 Users loaded:",e),console.log("\u{1F4CA} Total users:",e?.length||0),e&&e.length>0&&(console.log("\u{1F464} First user:",e[0]),console.log("\u{1F465} User fields:",Object.keys(e[0])),console.table(e)),this.users=e||[]},error:e=>{console.error("\u274C Error loading users:",e),console.error("Error status:",e?.status),console.error("Error message:",e?.message),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load users: "+(e?.error?.message||e?.message)})}})}loadSubjects(){let t=`${ae.apiUrl}/subjects`;console.log("\u{1F4E1} Fetching subjects from:",t),this.http.get(t).subscribe({next:e=>{console.log("\u2705 Subjects loaded:",e),console.log("\u{1F4CA} Total subjects:",e?.length||0),e&&e.length>0&&(console.log("\u{1F4DA} First subject:",e[0]),console.log("\u{1F4DA} Subject fields:",Object.keys(e[0])),console.table(e)),this.subjects=e||[]},error:e=>{console.error("\u274C Error loading subjects:",e),console.error("Error status:",e?.status),console.error("Error message:",e?.message),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load subjects: "+(e?.error?.message||e?.message)})}})}onLaboratoryFilterChange(){this.selectedLaboratory?(console.log("\u{1F50D} Filtering schedule for laboratory:",this.selectedLaboratory),console.log("\u{1F4CB} Laboratory ID:",this.selectedLaboratory.laboratoryId),this.messageService.add({severity:"info",summary:"Filter Applied",detail:`Showing schedules for: ${this.selectedLaboratory.laboratoryName}`})):(console.log("\u{1F50D} Showing all laboratory schedules"),this.messageService.add({severity:"info",summary:"Filter Cleared",detail:"Showing all laboratory schedules"})),this.loadSchedules()}loadSchedules(){if(!this.selectedLaboratory){console.log("\u26A0\uFE0F No laboratory selected"),this.schedules=[];return}let t=`${ae.apiUrl}/laboratories/${this.selectedLaboratory.laboratoryId}/schedules`;console.log("\u{1F4E1} Fetching schedules from:",t),this.http.get(t).subscribe({next:e=>{console.log("\u2705 Schedules API Response:",e),console.log("\u{1F4CA} Total schedules:",e?.length||0),e&&e.length>0&&(console.log("\u{1F3AF} First schedule:",e[0]),console.log("\u{1F4CB} Schedule fields:",Object.keys(e[0])),console.table(e)),this.schedules=e||[]},error:e=>{console.error("\u274C Error loading schedules:",e),console.error("Error status:",e?.status),console.error("Error message:",e?.message),console.error("Error details:",e?.error),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load schedules: "+(e?.error?.message||e?.message)}),this.schedules=[]}})}openNew(){this.newSchedule=this.getEmptySchedule(),this.scheduleDialog=!0}closeDialog(){this.scheduleDialog=!1,this.newSchedule=this.getEmptySchedule()}openCreateSubjectDialog(){this.newSubject=this.getEmptySubject(),this.subjectDialog=!0}closeSubjectDialog(){this.subjectDialog=!1,this.newSubject=this.getEmptySubject()}saveSubject(){if(!this.newSubject.subjectName||!this.newSubject.subjectCode||!this.newSubject.units){this.messageService.add({severity:"warn",summary:"Validation",detail:"Subject Name, Code, and Units are required"});return}let t={subjectName:this.newSubject.subjectName,subjectCode:this.newSubject.subjectCode,numberOfStudents:this.newSubject.numberOfStudents||0,units:this.newSubject.units},e=`${ae.apiUrl}/subjects`;console.log("\u{1F4E1} Posting new subject to:",e,t),this.http.post(e,t).subscribe({next:r=>{console.log("\u2705 Subject created successfully:",r),this.messageService.add({severity:"success",summary:"Success",detail:`Subject "${this.newSubject.subjectName}" created successfully`}),this.closeSubjectDialog(),this.loadSubjects()},error:r=>{console.error("\u274C Error creating subject:",r),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create subject: "+(r?.error?.message||r?.message)})}})}saveSchedule(){if(!this.newSchedule.laboratory||!this.newSchedule.day||!this.newSchedule.time||!this.newSchedule.endTime||!this.newSchedule.activity){this.messageService.add({severity:"warn",summary:"Validation",detail:"Laboratory, Day, Start Time, End Time, and Subject are required"});return}let t={faculty:this.newSchedule.instructor||"",subject:this.newSchedule.activity,startTime:this.newSchedule.time,endTime:this.newSchedule.endTime,dayOfWeek:this.newSchedule.day};console.log("\u{1F4E4} Saving schedule with payload:",t),console.log("\u{1F517} Laboratory ID:",this.newSchedule.laboratory);let e=`${ae.apiUrl}/laboratories/${this.newSchedule.laboratory}/schedules`;console.log("\u{1F4E1} Posting to:",e),this.http.post(e,t).subscribe({next:r=>{console.log("\u2705 Schedule created successfully:",r),this.messageService.add({severity:"success",summary:"Success",detail:"Lab schedule created successfully"}),this.closeDialog(),this.loadSchedules()},error:r=>{console.error("\u274C Error creating schedule:",r),console.error("Error status:",r?.status),console.error("Error message:",r?.message),console.error("Error details:",r?.error),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create schedule: "+(r?.error?.message||r?.message)})}})}view(t){this.messageService.add({severity:"info",summary:"View Schedule",detail:`Viewing: ${t.activity}`})}edit(t){this.newSchedule=Dt({},t),this.scheduleDialog=!0}delete(t){this.messageService.add({severity:"warn",summary:"Delete Schedule",detail:`Delete: ${t.activity}?`})}timeToMinutes(t){if(!t)return 0;let[e,r]=t.split(":").map(Number);return e*60+r}timeSlotToMinutes(t){let e=t.match(/(\d{2}):(\d{2})\s(AM|PM)/);if(!e)return 0;let r=parseInt(e[1]),o=parseInt(e[2]),s=e[3];return s==="PM"&&r!==12?r+=12:s==="AM"&&r===12&&(r=0),r*60+o}getSchedulesStartingAtSlot(t,e){if(!this.schedules||this.schedules.length===0)return[];let r=this.timeSlots[t],o=this.timeSlotToMinutes(r);return this.schedules.filter(s=>{if(s.dayOfWeek!==e)return!1;let _=this.timeToMinutes(s.startTime),T=Math.floor(_/30)*30;return o===T})}getSchedulesForCell(t,e){if(!this.schedules||this.schedules.length===0)return[];let r=this.timeSlots[t],o=this.timeSlotToMinutes(r);return this.schedules.filter(s=>{if(s.dayOfWeek!==e)return!1;let _=this.timeToMinutes(s.startTime),T=this.timeToMinutes(s.endTime);return o>=_&&o<T})}getRowSpan(t){let e=this.timeToMinutes(t.startTime),r=this.timeToMinutes(t.endTime),o=r-e,s=Math.ceil(o/30);return console.log(`\u{1F4CF} Schedule: ${t.subject?.subjectCode} | Start: ${t.startTime} (${e}min) | End: ${t.endTime} (${r}min) | Duration: ${o}min | Rows: ${s}`),s}getScheduleColor(t){let e=["bg-green-500","bg-pink-500","bg-gray-700","bg-blue-600","bg-cyan-500","bg-yellow-500","bg-indigo-600"];if(t.subject&&t.subject.subjectId){let r=t.subject.subjectId.charCodeAt(0);return e[r%e.length]}return e[0]}viewSchedule(t){console.log("\u{1F441}\uFE0F Viewing schedule:",t),this.messageService.add({severity:"info",summary:"Schedule Details",detail:`${t.subject?.subjectName} - ${t.faculty?.firstName} ${t.faculty?.lastName}`})}static \u0275fac=function(e){return new(e||a)(w(E),w(ye))};static \u0275cmp=I({type:a,selectors:[["app-labschedule"]],viewQuery:function(e,r){if(e&1&&Ve(lo,5),e&2){let o;Re(o=Oe())&&(r.dt=o.first)}},features:[U([E])],decls:54,vars:21,consts:[["start",""],["end",""],["content",""],["footer",""],["styleClass","mb-4"],[1,"lab-schedule-container"],[1,"schedule-table-wrapper"],[1,"schedule-table"],[1,"time-column"],[4,"ngFor","ngForOf"],["header","Add Lab Schedule",3,"visibleChange","onHide","visible","modal","closable"],[3,"visibleChange","visible","header","modal","breakpoints","closable"],[1,"grid","grid-cols-12","gap-4","mb-4"],[1,"col-span-12"],[1,"block","font-bold","mb-2"],["pInputText","","type","text","placeholder","Enter subject name",1,"w-full",3,"ngModelChange","ngModel"],[1,"col-span-6"],["pInputText","","type","text","placeholder","e.g., CS101",1,"w-full",3,"ngModelChange","ngModel"],["pInputText","","type","text","placeholder","e.g., 3",1,"w-full",3,"ngModelChange","ngModel"],["placeholder","Enter number of students",1,"w-full",3,"ngModelChange","ngModel","min"],[1,"flex","items-center","gap-2"],["label","New Schedule","icon","pi pi-plus","severity","secondary",3,"onClick"],["label","Print","icon","pi pi-print","severity","secondary","outlined",""],[1,"font-semibold","mr-2"],["optionLabel","laboratoryName","placeholder","All Laboratories","styleClass","w-64","appendTo","body",3,"ngModelChange","onChange","ngModel","options","showClear"],[1,"time-cell"],["class","schedule-cell",4,"ngFor","ngForOf"],[1,"schedule-cell"],["class","p-3 rounded cursor-pointer hover:opacity-80 transition-opacity text-white flex flex-col items-center justify-center",3,"ngClass","grid-row","min-height","click",4,"ngFor","ngForOf"],[1,"p-3","rounded","cursor-pointer","hover:opacity-80","transition-opacity","text-white","flex","flex-col","items-center","justify-center",3,"click","ngClass"],[1,"text-sm","font-bold"],[1,"text-xs","mt-1"],[1,"text-xs","mt-1","font-semibold"],[1,"grid","grid-cols-12","gap-4","mt-2"],["optionLabel","laboratoryName","optionValue","laboratoryId","placeholder","Select laboratory","appendTo","body",1,"w-full",3,"ngModelChange","ngModel","options"],["optionLabel","firstName","optionValue","userId","placeholder","Select instructor","appendTo","body",1,"w-full",3,"ngModelChange","ngModel","options","showClear"],["placeholder","Select day","appendTo","body",1,"w-full",3,"ngModelChange","ngModel","options"],[1,"flex","gap-2"],["optionLabel","subjectName","optionValue","subjectId","placeholder","Select subject","appendTo","body",1,"flex-1",3,"ngModelChange","ngModel","options"],["icon","pi pi-plus","severity","secondary","pTooltip","Create new subject","tooltipPosition","top",3,"click"],["pInputText","","type","time",1,"w-full",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2","w-full"],["label","Cancel","icon","pi pi-times","severity","secondary","text","",3,"click"],["label","Save","icon","pi pi-check",3,"click"],["label","Create","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),i(1,"p-toolbar",4),C(2,po,3,0,"ng-template",null,0,x)(4,uo,4,3,"ng-template",null,1,x),n(),i(6,"div",5)(7,"div",6)(8,"table",7)(9,"thead")(10,"tr")(11,"th",8),l(12,"Time & Days"),n(),i(13,"th"),l(14,"Sunday"),n(),i(15,"th"),l(16,"Monday"),n(),i(17,"th"),l(18,"Tuesday"),n(),i(19,"th"),l(20,"Wednesday"),n(),i(21,"th"),l(22,"Thursday"),n(),i(23,"th"),l(24,"Friday"),n(),i(25,"th"),l(26,"Saturday"),n()()(),i(27,"tbody"),C(28,fo,4,2,"tr",9),n()()()(),i(29,"p-dialog",10),S("visibleChange",function(_){return m(o),v(r.scheduleDialog,_)||(r.scheduleDialog=_),p(_)}),f("onHide",function(){return m(o),p(r.closeDialog())}),C(30,ho,27,11,"ng-template",null,2,x)(32,bo,3,0,"ng-template",null,3,x),n(),i(34,"p-dialog",11),S("visibleChange",function(_){return m(o),v(r.subjectDialog,_)||(r.subjectDialog=_),p(_)}),i(35,"div",12)(36,"div",13)(37,"label",14),l(38,"Subject Name *"),n(),i(39,"input",15),S("ngModelChange",function(_){return m(o),v(r.newSubject.subjectName,_)||(r.newSubject.subjectName=_),p(_)}),n()(),i(40,"div",16)(41,"label",14),l(42,"Subject Code *"),n(),i(43,"input",17),S("ngModelChange",function(_){return m(o),v(r.newSubject.subjectCode,_)||(r.newSubject.subjectCode=_),p(_)}),n()(),i(44,"div",16)(45,"label",14),l(46,"Units *"),n(),i(47,"input",18),S("ngModelChange",function(_){return m(o),v(r.newSubject.units,_)||(r.newSubject.units=_),p(_)}),n()(),i(48,"div",13)(49,"label",14),l(50,"Number of Students"),n(),i(51,"p-inputNumber",19),S("ngModelChange",function(_){return m(o),v(r.newSubject.numberOfStudents,_)||(r.newSubject.numberOfStudents=_),p(_)}),n()()(),C(52,Co,3,0,"ng-template",null,3,x),n()}e&2&&(d(28),u("ngForOf",r.timeSlots),d(),xt(M(18,so)),y("visible",r.scheduleDialog),u("modal",!0)("closable",!0),d(5),xt(M(19,co)),y("visible",r.subjectDialog),u("header","Create New Subject")("modal",!0)("breakpoints",M(20,mo))("closable",!0),d(5),y("ngModel",r.newSubject.subjectName),d(4),y("ngModel",r.newSubject.subjectCode),d(4),y("ngModel",r.newSubject.units),d(4),y("ngModel",r.newSubject.numberOfStudents),u("min",0))},dependencies:[P,An,ot,R,L,Q,k,N,D,V,lt,W,j,B,O,A,G,we,K,J,le,At,Bt,Ot,he,Se,Ut,Ft,jt,ve],styles:[".lab-schedule-container[_ngcontent-%COMP%]{padding:1.5rem;background:#f3f4f6;border-radius:.375rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;margin-bottom:1.5rem;color:#1f2937}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:.375rem;box-shadow:0 1px 3px #0000001a}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:120px repeat(7,1fr);grid-auto-rows:60px;gap:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:contents}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--primary-contrast-color);padding:1rem;text-align:center;font-weight:600;font-size:.875rem;border:1px solid #e5e7eb;position:sticky;top:0;z-index:10}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{min-width:120px}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:contents}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;border:1px solid #e5e7eb;position:relative;vertical-align:top}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.time-cell[_ngcontent-%COMP%]{background-color:#f9fafb;font-weight:600;font-size:.8125rem;color:#374151;border-right:2px solid #d1d5db;display:flex;align-items:center;justify-content:center;position:sticky;left:0;z-index:5}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]{background-color:#fafafa;overflow:visible;position:relative;padding:2px;display:grid;grid-auto-rows:60px;grid-auto-flow:row;align-content:start}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]{width:calc(100% - 4px);padding:.5rem;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-size:.75rem;font-weight:600;color:#fff;cursor:pointer;transition:opacity .2s ease;border:1px solid rgba(0,0,0,.1);box-sizing:border-box;border-radius:.375rem;position:relative;z-index:20;box-shadow:0 2px 8px #00000026}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]:hover{opacity:.9;z-index:25;box-shadow:0 4px 12px #00000040}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]   .block-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.125rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]   .block-info[_ngcontent-%COMP%]{font-size:.65rem;opacity:.95}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-green-500[_ngcontent-%COMP%]{background-color:#10b981}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-pink-500[_ngcontent-%COMP%]{background-color:#ec4899}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-gray-700[_ngcontent-%COMP%]{background-color:#374151}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-blue-600[_ngcontent-%COMP%]{background-color:#2563eb}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-cyan-500[_ngcontent-%COMP%]{background-color:#06b6d4}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-yellow-500[_ngcontent-%COMP%]{background-color:#eab308;color:#1f2937}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-yellow-500[_ngcontent-%COMP%]   .block-info[_ngcontent-%COMP%]{color:#1f2937}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell.bg-indigo-600[_ngcontent-%COMP%]{background-color:#4f46e5}@media (max-width: 1024px){.lab-schedule-container[_ngcontent-%COMP%]{padding:1rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]{font-size:.8125rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem .5rem;font-size:.8125rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.375rem;height:50px}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.time-cell[_ngcontent-%COMP%]{min-width:100px;font-size:.75rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]{font-size:.65rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]   .block-info[_ngcontent-%COMP%]{font-size:.6rem}}@media (max-width: 768px){.lab-schedule-container[_ngcontent-%COMP%]{padding:.75rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem .25rem;font-size:.75rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.25rem;height:40px}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.time-cell[_ngcontent-%COMP%]{min-width:80px;font-size:.7rem;padding:.25rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]{font-size:.6rem;padding:.125rem .25rem}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]   .block-title[_ngcontent-%COMP%]{margin-bottom:0}.lab-schedule-container[_ngcontent-%COMP%]   .schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-block[_ngcontent-%COMP%]   .block-info[_ngcontent-%COMP%]{display:none}}"]})};var yo=["dt"],vo=()=>({width:"500px"}),So=()=>[],ai=()=>[10,20,30],li=()=>({"min-width":"70rem"});function wo(a,t){if(a&1&&(i(0,"div",15)(1,"span",16),l(2),n()()),a&2){let e=c(2);d(2),De("Assets in ",e.selectedLaboratoryData.laboratoryName," (",(e.selectedLaboratoryData.assets==null?null:e.selectedLaboratoryData.assets.length)||0,")")}}function Mo(a,t){if(a&1){let e=b();i(0,"div",15)(1,"p-button",17),f("onClick",function(){m(e);let o=c(2);return p(o.deleteSelectedAssets())}),n(),i(2,"p-button",18),f("onClick",function(){m(e);let o=c(2);return p(o.exportAssetsCSV())}),n()()}if(a&2){let e=c(2);d(),u("disabled",!e.selectedAssets.length)}}function Eo(a,t){a&1&&(i(0,"tr")(1,"th",19),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",20),l(4,"Asset "),g(5,"p-sortIcon",21),n(),i(6,"th",22),l(7,"Property #"),n(),i(8,"th",23),l(9,"Category"),n(),i(10,"th",24),l(11,"Issued To"),n(),i(12,"th",23),l(13,"QR Code"),n(),i(14,"th",23),l(15,"Actions"),n()())}function To(a,t){if(a&1&&g(0,"img",35),a&2){let e=c(2).$implicit;u("src",e.qrCode,Ln)}}function Io(a,t){if(a&1&&(i(0,"span",36),l(1),n()),a&2){let e=c(2).$implicit;d(),q(" ",e.qrCode," ")}}function Po(a,t){if(a&1&&(i(0,"div",32),C(1,To,1,1,"img",33)(2,Io,2,1,"span",34),n()),a&2){let e=c().$implicit,r=c(2);d(),u("ngIf",r.isBase64Image(e.qrCode)),d(),u("ngIf",!r.isBase64Image(e.qrCode))}}function Do(a,t){a&1&&(i(0,"span",37),l(1,"N/A"),n())}function ko(a,t){if(a&1&&(i(0,"tr")(1,"td",19),g(2,"p-tableCheckbox",25),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td"),g(8,"p-tag",25),n(),i(9,"td"),l(10),n(),i(11,"td"),C(12,Po,3,2,"div",26)(13,Do,2,0,"span",27),n(),i(14,"td")(15,"div",28),g(16,"p-button",29)(17,"p-button",30)(18,"p-button",31),n()()()),a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.assetName),d(2),h(e.propertyNumber),d(2),u("value",e.category||"N/A"),d(2),h(e.issuedTo),d(2),u("ngIf",e.qrCode),d(),u("ngIf",!e.qrCode),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function No(a,t){a&1&&(i(0,"tr")(1,"td",38),l(2,"No assets in this laboratory"),n()())}function Lo(a,t){if(a&1){let e=b();i(0,"div",9)(1,"p-toolbar",10),C(2,wo,3,2,"ng-template",null,2,x)(4,Mo,3,1,"ng-template",null,3,x),n(),i(6,"p-table",11,4),S("selectionChange",function(o){m(e);let s=c();return v(s.selectedAssets,o)||(s.selectedAssets=o),p(o)}),C(8,Eo,16,0,"ng-template",12)(9,ko,19,13,"ng-template",13)(10,No,3,0,"ng-template",14),n()()}if(a&2){let e=c();d(6),u("value",e.selectedLaboratoryData.assets||M(9,So))("rows",10)("paginator",!0)("rowsPerPageOptions",M(10,ai))("loading",e.loading)("rowHover",!0),y("selection",e.selectedAssets),u("showCurrentPageReport",!0)("tableStyle",M(11,li))}}function Vo(a,t){if(a&1){let e=b();i(0,"div",15)(1,"p-button",41),f("onClick",function(){m(e);let o=c(2);return p(o.openNew())}),n(),i(2,"p-button",17),f("onClick",function(){m(e);let o=c(2);return p(o.deleteSelected())}),n()()}if(a&2){let e=c(2);d(2),u("disabled",!e.selectedLabs.length)}}function Ro(a,t){if(a&1){let e=b();i(0,"div",15)(1,"p-button",18),f("onClick",function(){m(e);let o=c(2);return p(o.exportCSV())}),n(),i(2,"p-iconfield"),g(3,"p-inputicon",42),i(4,"input",43),S("ngModelChange",function(o){m(e);let s=c(2);return v(s.searchValue,o)||(s.searchValue=o),p(o)}),f("input",function(){m(e);let o=c(2);return p(o.filter())}),n()()()}if(a&2){let e=c(2);d(4),y("ngModel",e.searchValue)}}function Oo(a,t){a&1&&(i(0,"tr")(1,"th",19),g(2,"p-tableHeaderCheckbox"),n(),i(3,"th",44),l(4,"ID"),n(),i(5,"th",45),l(6,"Laboratory Name "),g(7,"p-sortIcon",46),n(),i(8,"th",24),l(9,"Capacity"),n(),i(10,"th",24),l(11,"Campus"),n(),i(12,"th",23),l(13,"Actions"),n()())}function Bo(a,t){if(a&1){let e=b();i(0,"tr")(1,"td",19),g(2,"p-tableCheckbox",25),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td"),l(8),n(),i(9,"td"),l(10),n(),i(11,"td")(12,"div",28)(13,"p-button",47),f("onClick",function(){let o=m(e).$implicit,s=c(2);return p(s.view(o))}),n(),i(14,"p-button",48),f("onClick",function(){let o=m(e).$implicit,s=c(2);return p(s.edit(o))}),n(),i(15,"p-button",49),f("onClick",function(){let o=m(e).$implicit,s=c(2);return p(s.delete(o))}),n()()()()}if(a&2){let e=t.$implicit;d(2),u("value",e),d(2),h(e.laboratoryId),d(2),h(e.laboratoryName),d(2),h(e.capacity),d(2),h(e.campus==null?null:e.campus.campusName),d(3),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0),d(),u("rounded",!0)("text",!0)}}function Ao(a,t){a&1&&(i(0,"tr")(1,"td",50),l(2,"No laboratories found"),n()())}function Fo(a,t){if(a&1){let e=b();i(0,"div")(1,"p-toolbar",39),C(2,Vo,3,1,"ng-template",null,2,x)(4,Ro,5,1,"ng-template",null,3,x),n(),i(6,"p-table",40,5),S("selectionChange",function(o){m(e);let s=c();return v(s.selectedLabs,o)||(s.selectedLabs=o),p(o)}),f("selectionChange",function(o){m(e);let s=c();return p(s.onSelectionChange(o))}),C(8,Oo,14,0,"ng-template",12)(9,Bo,16,11,"ng-template",13)(10,Ao,3,0,"ng-template",14),n()()}if(a&2){let e=c();d(6),u("value",e.laboratories)("rows",10)("paginator",!0)("rowsPerPageOptions",M(9,ai))("loading",e.loading)("rowHover",!0),y("selection",e.selectedLabs),u("showCurrentPageReport",!0)("tableStyle",M(10,li))}}function Uo(a,t){if(a&1){let e=b();i(0,"div",51)(1,"div",52)(2,"label",53),l(3,"Laboratory Name *"),n(),i(4,"input",54),S("ngModelChange",function(o){m(e);let s=c();return v(s.newLab.laboratoryName,o)||(s.newLab.laboratoryName=o),p(o)}),n()(),i(5,"div",52)(6,"label",53),l(7,"Capacity *"),n(),i(8,"p-inputNumber",55),S("ngModelChange",function(o){m(e);let s=c();return v(s.newLab.capacity,o)||(s.newLab.capacity=o),p(o)}),n()(),i(9,"div",52)(10,"label",53),l(11,"Laboratory Location *"),n(),i(12,"input",56),S("ngModelChange",function(o){m(e);let s=c();return v(s.newLab.laboratoryLocation,o)||(s.newLab.laboratoryLocation=o),p(o)}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.newLab.laboratoryName),d(4),y("ngModel",e.newLab.capacity),d(4),y("ngModel",e.newLab.laboratoryLocation)}}function jo(a,t){if(a&1){let e=b();i(0,"div",57)(1,"p-button",58),f("click",function(){m(e);let o=c();return p(o.closeDialog())}),n(),i(2,"p-button",59),f("click",function(){m(e);let o=c();return p(o.saveLab())}),n()()}}var Mt=class a{constructor(t,e,r){this.messageService=t;this.http=e;this.route=r}dt;laboratories=[];filteredLaboratories=[];selectedLabs=[];selectedAssets=[];searchValue="";loading=!0;selectedLaboratoryId=null;selectedLaboratoryData=null;labDialog=!1;newLab=this.getEmptyLab();apiUrl=`${ae.apiUrl}/laboratories`;ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("id");e?(console.log("\u{1F50D} Loading specific laboratory with ID:",e),this.selectedLaboratoryId=e,this.loadLaboratories(e)):this.loadLaboratories()})}getEmptyLab(){return{laboratoryId:"",laboratoryName:"",capacity:0,laboratoryLocation:"",campus:null}}loadLaboratories(t){this.loading=!0,console.log("\u{1F4E1} Fetching laboratories from:",this.apiUrl),this.http.get(this.apiUrl).subscribe({next:e=>{if(console.log("\u2705 Laboratories API Response:",e),console.log("\u{1F4CA} Laboratories count:",e?.length||0),e&&e.length>0&&(console.log("\u{1F3F7}\uFE0F First laboratory:",e[0]),console.log("\u{1F3F7}\uFE0F Laboratory fields:",Object.keys(e[0]))),console.table(e),this.laboratories=e||[],t){let r=this.laboratories.filter(o=>o.laboratoryId===t);r.length>0?(console.log("\u{1F3AF} Found laboratory:",r[0]),this.selectedLaboratoryData=r[0],console.log("\u{1F4E6} Assets in laboratory:",this.selectedLaboratoryData.assets?.length||0),this.filteredLaboratories=r):(console.warn("\u26A0\uFE0F Laboratory not found with ID:",t),this.filteredLaboratories=[])}else this.filteredLaboratories=[...this.laboratories];this.loading=!1},error:e=>{console.error("\u274C Error loading laboratories:",e),console.error("Error status:",e?.status),console.error("Error message:",e?.message),console.error("Error details:",e?.error),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load laboratories: "+e?.message}),this.loading=!1}})}filter(){this.filteredLaboratories=this.laboratories.filter(t=>t.laboratoryName?.toLowerCase().includes(this.searchValue.toLowerCase())||t.laboratoryId?.toLowerCase().includes(this.searchValue.toLowerCase())||t.campus?.campusName?.toLowerCase().includes(this.searchValue.toLowerCase()))}onSelectionChange(t){console.log("\u2705 Selection Changed"),console.log("\u{1F4CA} Total Selected:",this.selectedLabs.length)}openNew(){this.newLab=this.getEmptyLab(),this.labDialog=!0}closeDialog(){this.labDialog=!1,this.newLab=this.getEmptyLab()}saveLab(){if(!this.newLab.laboratoryName||!this.newLab.capacity||!this.newLab.laboratoryLocation){this.messageService.add({severity:"warn",summary:"Validation",detail:"Laboratory Name, Capacity, and Location are required"});return}let t={laboratoryName:this.newLab.laboratoryName,capacity:this.newLab.capacity,laboratoryLocation:this.newLab.laboratoryLocation};console.log("\u{1F4E4} Creating laboratory with payload:",t),this.http.post(this.apiUrl,t).subscribe({next:e=>{console.log("\u2705 Laboratory created:",e),this.messageService.add({severity:"success",summary:"Success",detail:"Laboratory created successfully"}),this.closeDialog(),this.loadLaboratories()},error:e=>{console.error("\u274C Error creating laboratory:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create laboratory: "+(e?.error?.message||e?.message)})}})}view(t){console.log("\u{1F441}\uFE0F Viewing laboratory:",t),this.messageService.add({severity:"info",summary:"View Laboratory",detail:`Viewing: ${t.laboratoryName}`})}edit(t){console.log("\u270F\uFE0F Editing laboratory:",t),this.newLab=Dt({},t),this.labDialog=!0}delete(t){console.log("\u{1F5D1}\uFE0F Deleting laboratory:",t),this.messageService.add({severity:"warn",summary:"Delete Laboratory",detail:`Delete: ${t.laboratoryName}?`})}deleteSelected(){!this.selectedLabs||this.selectedLabs.length===0||(console.log("\u{1F5D1}\uFE0F Deleting selected:",this.selectedLabs),this.messageService.add({severity:"warn",summary:"Delete",detail:`Delete ${this.selectedLabs.length} laboratory(ies)?`}))}exportCSV(){let t=`Laboratory ID,Laboratory Name,Capacity,Campus
`;this.laboratories.forEach(s=>{t+=`${s.laboratoryId},${s.laboratoryName},${s.capacity},${s.campus?.campusName}
`});let e=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="laboratories.csv",o.click(),window.URL.revokeObjectURL(r)}isBase64Image(t){return t?.startsWith("data:image")||t?.startsWith("http")}deleteSelectedAssets(){!this.selectedAssets||this.selectedAssets.length===0||(console.log("\u{1F5D1}\uFE0F Deleting selected assets:",this.selectedAssets),this.messageService.add({severity:"warn",summary:"Delete",detail:`Delete ${this.selectedAssets.length} asset(s)?`}))}exportAssetsCSV(){let t=this.selectedLaboratoryData?.assets||[],e=`Asset Name,Property #,Category,Issued To
`;t.forEach(_=>{e+=`${_.assetName},${_.propertyNumber},${_.category||"N/A"},${_.issuedTo}
`});let r=new Blob([e],{type:"text/csv"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`${this.selectedLaboratoryData?.laboratoryName||"laboratory"}_assets.csv`,s.click(),window.URL.revokeObjectURL(o)}static \u0275fac=function(e){return new(e||a)(w(E),w(ye),w(Un))};static \u0275cmp=I({type:a,selectors:[["app-laboratories"]],viewQuery:function(e,r){if(e&1&&Ve(yo,5),e&2){let o;Re(o=Oe())&&(r.dt=o.first)}},features:[U([E])],decls:8,vars:8,consts:[["content",""],["footer",""],["start",""],["end",""],["dtAssets",""],["dt",""],["class","mb-4",4,"ngIf"],[4,"ngIf"],["header","Laboratory",3,"visibleChange","onHide","visible","modal","closable"],[1,"mb-4"],["styleClass","mb-4 mt-4"],["dataKey","assetId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} assets",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","items-center","gap-2"],[1,"text-lg","font-semibold"],["label","Delete Selected","icon","pi pi-trash","severity","secondary","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[2,"width","3rem"],["pSortableColumn","assetName",2,"min-width","18rem"],["field","assetName"],[2,"min-width","14rem"],[2,"min-width","12rem"],[2,"min-width","15rem"],[3,"value"],["class","inline-block",4,"ngIf"],["class","text-gray-400",4,"ngIf"],[1,"flex","gap-2"],["icon","pi pi-eye","severity","info","pTooltip","View",3,"rounded","text"],["icon","pi pi-pencil","severity","secondary","pTooltip","Edit",3,"rounded","text"],["icon","pi pi-trash","severity","danger","pTooltip","Delete",3,"rounded","text"],[1,"inline-block"],["alt","QR Code","class","w-14 h-14 rounded-lg border-2 border-gray-300 cursor-pointer hover:shadow-lg hover:scale-110 transition-all","pTooltip","Click to view QR Code",3,"src",4,"ngIf"],["class","text-sm bg-blue-100 px-2 py-1 rounded cursor-pointer hover:bg-blue-200 transition-colors","pTooltip","Click to copy QR Code",4,"ngIf"],["alt","QR Code","pTooltip","Click to view QR Code",1,"w-14","h-14","rounded-lg","border-2","border-gray-300","cursor-pointer","hover:shadow-lg","hover:scale-110","transition-all",3,"src"],["pTooltip","Click to copy QR Code",1,"text-sm","bg-blue-100","px-2","py-1","rounded","cursor-pointer","hover:bg-blue-200","transition-colors"],[1,"text-gray-400"],["colspan","7",1,"text-center","py-5"],["styleClass","mb-4"],["dataKey","laboratoryId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} laboratories",3,"selectionChange","value","rows","paginator","rowsPerPageOptions","loading","rowHover","selection","showCurrentPageReport","tableStyle"],["label","New","icon","pi pi-plus","severity","secondary",3,"onClick"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search laboratories...",3,"ngModelChange","input","ngModel"],[2,"min-width","25rem"],["pSortableColumn","laboratoryName",2,"min-width","20rem"],["field","laboratoryName"],["icon","pi pi-eye","severity","info",3,"onClick","rounded","text"],["icon","pi pi-pencil","severity","secondary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["colspan","6",1,"text-center","py-5"],[1,"grid","grid-cols-12","gap-4","mt-2"],[1,"col-span-12"],[1,"block","font-bold","mb-2"],["pInputText","","placeholder","Enter laboratory name",1,"w-full",3,"ngModelChange","ngModel"],["placeholder","Enter capacity",1,"w-full",3,"ngModelChange","ngModel"],["pInputText","","placeholder","Enter laboratory location",1,"w-full",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2","w-full"],["label","Cancel","icon","pi pi-times","severity","secondary","text","",3,"click"],["label","Save","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let o=b();g(0,"p-toast"),C(1,Lo,11,12,"div",6)(2,Fo,11,11,"div",7),i(3,"p-dialog",8),S("visibleChange",function(_){return m(o),v(r.labDialog,_)||(r.labDialog=_),p(_)}),f("onHide",function(){return m(o),p(r.closeDialog())}),C(4,Uo,13,3,"ng-template",null,0,x)(6,jo,3,0,"ng-template",null,1,x),n()}e&2&&(d(),u("ngIf",r.selectedLaboratoryId&&r.selectedLaboratoryData),d(),u("ngIf",!r.selectedLaboratoryId),d(),xt(M(7,vo)),y("visible",r.labDialog),u("modal",!0)("closable",!0))},dependencies:[P,$e,R,F,$,H,z,te,ne,L,Q,k,N,D,V,lt,W,j,B,O,A,G,we,Be,K,ee,J,Z,le,At,Bt,Ot,he,Ut,Ft,jt],encapsulation:2})};var Wo=()=>["Active","Inactive","All"];function qo(a,t){a&1&&(i(0,"h2",17),l(1,"Asset Report"),n())}function $o(a,t){if(a&1){let e=b();i(0,"p-button",18),f("onClick",function(){m(e);let o=c();return p(o.exportToCSV())}),n(),i(1,"p-button",19),f("onClick",function(){m(e);let o=c();return p(o.printReport())}),n()}}function Ho(a,t){if(a&1){let e=b();i(0,"div",20)(1,"div",21)(2,"label",22),l(3,"Category Filter"),n(),i(4,"p-select",23),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedCategory,o)||(s.selectedCategory=o),p(o)}),f("onChange",function(){m(e);let o=c();return p(o.filterAssets())}),n()(),i(5,"div",21)(6,"label",22),l(7,"Status Filter"),n(),i(8,"p-select",24),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedStatus,o)||(s.selectedStatus=o),p(o)}),f("onChange",function(){m(e);let o=c();return p(o.filterAssets())}),n()(),i(9,"div",25)(10,"p-button",26),f("onClick",function(){m(e);let o=c();return p(o.clearFilters())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.selectedCategory),u("options",e.categories)("showClear",!0),d(4),y("ngModel",e.selectedStatus),u("options",M(6,Wo))("showClear",!0)}}function zo(a,t){a&1&&(i(0,"tr")(1,"th",27),l(2,"Asset Name "),g(3,"p-sortIcon",28),n(),i(4,"th",27),l(5,"Category "),g(6,"p-sortIcon",29),n(),i(7,"th",27),l(8,"Property No. "),g(9,"p-sortIcon",30),n(),i(10,"th"),l(11,"Issued To"),n(),i(12,"th"),l(13,"Status"),n(),i(14,"th"),l(15,"Location"),n()())}function Yo(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td"),l(8),n(),i(9,"td"),g(10,"p-tag",31),n(),i(11,"td"),l(12),n()()),a&2){let e=t.$implicit;d(2),h(e.assetName||e.AssetName||"N/A"),d(2),h(e.category||e.Category||"N/A"),d(2),h(e.propertyNumber||e.PropertyNo||"N/A"),d(2),h(e.issuedTo||e.IssuedTo||"N/A"),d(2),u("value",e.Status_id==="1"?"Active":"Inactive")("severity",e.Status_id==="1"?"success":"secondary"),d(2),h(e.foundCluster||e.FoundCluster||"N/A")}}function Qo(a,t){a&1&&(i(0,"tr")(1,"td",32),l(2,"No assets found matching the selected filters."),n()())}function Go(a,t){a&1&&(i(0,"h3",33),l(1,"Assets by Category"),n())}function Jo(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Category"),n(),i(3,"th"),l(4,"Count"),n(),i(5,"th"),l(6,"Percentage"),n()())}function Ko(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n()()),a&2){let e=t.$implicit,r=c();d(2),h(e.category||"Uncategorized"),d(2),h(e.count),d(2),q("",(e.count/r.assets.length*100).toFixed(2),"%")}}var an=class a{constructor(t,e){this.assetService=t;this.messageService=e}assets=[];filteredAssets=[];categories=[];selectedCategory="";selectedStatus="";ngOnInit(){this.loadAssets()}loadAssets(){this.assetService.getAssets().subscribe({next:t=>{this.assets=t,this.filteredAssets=t,this.extractCategories(),console.log("\u2705 Assets loaded:",this.assets.length)},error:t=>{console.error("\u274C Error loading assets:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load assets"})}})}extractCategories(){let t=new Set(this.assets.map(e=>e.category||e.Category).filter(e=>e));this.categories=Array.from(t).map(e=>({category:e}))}filterAssets(){this.filteredAssets=this.assets.filter(t=>{let e=!this.selectedCategory||(t.category||t.Category)===this.selectedCategory,r=!this.selectedStatus||(this.selectedStatus==="Active"?t.Status_id==="1":t.Status_id!=="1");return e&&r})}clearFilters(){this.selectedCategory="",this.selectedStatus="",this.filteredAssets=this.assets}getActiveAssetsCount(){return this.assets.filter(t=>t.Status_id==="1").length}getCategoriesCount(){return new Set(this.assets.map(t=>t.category||t.Category)).size}getCategoryBreakdown(){let t={};return this.assets.forEach(e=>{let r=e.category||e.Category||"Uncategorized";t[r]=(t[r]||0)+1}),Object.entries(t).map(([e,r])=>({category:e,count:r}))}exportToCSV(){let t=["Asset Name","Category","Property Number","Issued To","Status","Location"],e=this.filteredAssets.map(T=>[T.assetName||T.AssetName,T.category||T.Category,T.propertyNumber||T.PropertyNo,T.issuedTo||T.IssuedTo,T.Status_id==="1"?"Active":"Inactive",T.foundCluster||T.FoundCluster]),r=t.join(",")+`
`;e.forEach(T=>{r+=T.map(X=>`"${X||""}"`).join(",")+`
`});let o=new Blob([r],{type:"text/csv"}),s=window.URL.createObjectURL(o),_=document.createElement("a");_.href=s,_.download=`asset-report-${new Date().toISOString().split("T")[0]}.csv`,_.click(),window.URL.revokeObjectURL(s),this.messageService.add({severity:"success",summary:"Exported",detail:"Asset report exported to CSV"})}printReport(){window.print()}static \u0275fac=function(e){return new(e||a)(w(Me),w(E))};static \u0275cmp=I({type:a,selectors:[["app-asset-report"]],features:[U([E])],decls:40,vars:7,consts:[["start",""],["end",""],["header",""],["body",""],["emptymessage",""],["styleClass","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"p-4","bg-blue-50","rounded-lg"],[1,"text-gray-600","text-sm"],[1,"text-3xl","font-bold","text-blue-600"],[1,"p-4","bg-green-50","rounded-lg"],[1,"text-3xl","font-bold","text-green-600"],[1,"p-4","bg-orange-50","rounded-lg"],[1,"text-3xl","font-bold","text-orange-600"],[1,"mb-4"],["responsiveLayout","scroll",3,"value","paginator","rows"],[3,"value"],[1,"text-2xl","font-bold"],["label","Export to CSV","icon","pi pi-download","severity","success",3,"onClick"],["label","Print","icon","pi pi-print","severity","info",1,"ml-2",3,"onClick"],[1,"flex","gap-4","p-4"],[1,"flex-1"],[1,"block","text-sm","font-medium","mb-2"],["optionLabel","category","optionValue","category","placeholder","All Categories",3,"ngModelChange","onChange","ngModel","options","showClear"],["placeholder","All Status",3,"ngModelChange","onChange","ngModel","options","showClear"],[1,"flex","items-end"],["label","Clear Filters","icon","pi pi-times","severity","secondary",3,"onClick"],["pSortableColumn",""],["field","assetName"],["field","category"],["field","propertyNumber"],[3,"value","severity"],["colspan","6",1,"text-center","p-4"],[1,"text-lg","font-bold","p-4"]],template:function(e,r){e&1&&(g(0,"p-toast"),i(1,"p-toolbar",5),C(2,qo,2,0,"ng-template",null,0,x)(4,$o,2,0,"ng-template",null,1,x),n(),i(6,"div",6)(7,"div",7)(8,"p",8),l(9,"Total Assets"),n(),i(10,"p",9),l(11),n()(),i(12,"div",10)(13,"p",8),l(14,"Active Assets"),n(),i(15,"p",11),l(16),n()(),i(17,"div",12)(18,"p",8),l(19,"By Category"),n(),i(20,"p",13),l(21),n()()(),i(22,"p-card",14),C(23,Ho,11,7,"ng-template",null,2,x),i(25,"p-table",15),C(26,zo,16,0,"ng-template",null,2,x)(28,Yo,13,7,"ng-template",null,3,x)(30,Qo,3,0,"ng-template",null,4,x),n()(),i(32,"p-card"),C(33,Go,2,0,"ng-template",null,2,x),i(35,"p-table",16),C(36,Jo,7,0,"ng-template",null,2,x)(38,Ko,7,3,"ng-template",null,3,x),n()()),e&2&&(d(11),h(r.assets.length),d(5),h(r.getActiveAssetsCount()),d(5),h(r.getCategoriesCount()),d(4),u("value",r.filteredAssets)("paginator",!0)("rows",10),d(10),u("value",r.getCategoryBreakdown()))},dependencies:[P,L,k,N,D,V,R,F,H,z,he,Se,A,Y,mt,W,j,B,O,we,Be,ve],styles:["[_nghost-%COMP%]     .p-card{box-shadow:0 1px 3px #0000001a}"]})};var Xo=()=>["Pending","Approved","Completed","All"],Zo=()=>["Urgent","High","Normal","Low","All"];function ea(a,t){a&1&&(i(0,"h2",20),l(1,"Maintenance Report"),n())}function ta(a,t){if(a&1){let e=b();i(0,"p-button",21),f("onClick",function(){m(e);let o=c();return p(o.exportToCSV())}),n(),i(1,"p-button",22),f("onClick",function(){m(e);let o=c();return p(o.printReport())}),n()}}function na(a,t){if(a&1){let e=b();i(0,"div",23)(1,"div",24)(2,"label",25),l(3,"Status Filter"),n(),i(4,"p-select",26),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedStatus,o)||(s.selectedStatus=o),p(o)}),f("onChange",function(){m(e);let o=c();return p(o.filterRequests())}),n()(),i(5,"div",24)(6,"label",25),l(7,"Priority Filter"),n(),i(8,"p-select",27),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedPriority,o)||(s.selectedPriority=o),p(o)}),f("onChange",function(){m(e);let o=c();return p(o.filterRequests())}),n()(),i(9,"div",28)(10,"p-button",29),f("onClick",function(){m(e);let o=c();return p(o.clearFilters())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.selectedStatus),u("options",M(4,Xo)),d(4),y("ngModel",e.selectedPriority),u("options",M(5,Zo))}}function ia(a,t){a&1&&(i(0,"tr")(1,"th",30),l(2,"Request Name "),g(3,"p-sortIcon",31),n(),i(4,"th",30),l(5,"Type "),g(6,"p-sortIcon",32),n(),i(7,"th"),l(8,"Priority"),n(),i(9,"th"),l(10,"Status"),n(),i(11,"th"),l(12,"Service"),n(),i(13,"th",30),l(14,"Date "),g(15,"p-sortIcon",33),n()())}function ra(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),g(6,"p-tag",34),n(),i(7,"td"),g(8,"p-tag",34),n(),i(9,"td"),l(10),n(),i(11,"td"),l(12),n()()),a&2){let e=t.$implicit,r=c();d(2),h(e.maintenanceName||"N/A"),d(2),h(e.maintenanceTypeName||"N/A"),d(2),u("value",r.getPriorityLabel(e.priorityLevelName))("severity",r.getPrioritySeverity(e.priorityLevelName)),d(2),u("value",e.requestStatusName||"Pending")("severity",r.getStatusSeverity(e.requestStatusName)),d(2),h(e.serviceMaintenanceName||"N/A"),d(2),h(r.formatDate(e.createdDate))}}function oa(a,t){a&1&&(i(0,"tr")(1,"td",35),l(2,"No maintenance requests found."),n()())}function aa(a,t){a&1&&(i(0,"h3",36),l(1,"Requests by Status"),n())}function la(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Status"),n(),i(3,"th"),l(4,"Count"),n(),i(5,"th"),l(6,"Percentage"),n()())}function sa(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n()()),a&2){let e=t.$implicit,r=c();d(2),h(e.status),d(2),h(e.count),d(2),q("",(e.count/r.maintenanceRequests.length*100).toFixed(2),"%")}}function da(a,t){a&1&&(i(0,"h3",36),l(1,"Requests by Priority"),n())}function ca(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Priority"),n(),i(3,"th"),l(4,"Count"),n(),i(5,"th"),l(6,"Percentage"),n()())}function ma(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n()()),a&2){let e=t.$implicit,r=c();d(2),h(e.priority),d(2),h(e.count),d(2),q("",(e.count/r.maintenanceRequests.length*100).toFixed(2),"%")}}var ln=class a{constructor(t,e){this.maintenanceService=t;this.messageService=e}maintenanceRequests=[];filteredRequests=[];selectedStatus="All";selectedPriority="All";ngOnInit(){this.loadMaintenanceRequests()}loadMaintenanceRequests(){this.maintenanceService.getMaintenanceRequests().subscribe({next:t=>{this.maintenanceRequests=t,this.filteredRequests=t,console.log("\u2705 Maintenance requests loaded:",this.maintenanceRequests.length)},error:t=>{console.error("\u274C Error loading maintenance requests:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load maintenance requests"})}})}filterRequests(){this.filteredRequests=this.maintenanceRequests.filter(t=>{let e=this.selectedStatus==="All"||(t.requestStatusName||"Pending")===this.selectedStatus,r=this.selectedPriority==="All"||(t.priorityLevelName||"Normal")===this.selectedPriority;return e&&r})}clearFilters(){this.selectedStatus="All",this.selectedPriority="All",this.filteredRequests=this.maintenanceRequests}getPendingCount(){return this.maintenanceRequests.filter(t=>(t.requestStatusName||"Pending")==="Pending").length}getApprovedCount(){return this.maintenanceRequests.filter(t=>t.requestStatusName==="Approved").length}getCompletedCount(){return this.maintenanceRequests.filter(t=>t.requestStatusName==="Completed").length}getStatusSeverity(t){return{Pending:"warn",Approved:"info",Completed:"success"}[t]||"secondary"}getPrioritySeverity(t){return{Urgent:"danger",High:"warn",Normal:"info",Low:"success"}[t]||"secondary"}getPriorityLabel(t){return t||"Normal"}getStatusBreakdown(){let t={};return this.maintenanceRequests.forEach(e=>{let r=e.requestStatusName||"Pending";t[r]=(t[r]||0)+1}),Object.entries(t).map(([e,r])=>({status:e,count:r}))}getPriorityBreakdown(){let t={};return this.maintenanceRequests.forEach(e=>{let r=e.priorityLevelName||"Normal";t[r]=(t[r]||0)+1}),Object.entries(t).map(([e,r])=>({priority:e,count:r}))}formatDate(t){return t?new Date(t).toLocaleDateString():"N/A"}exportToCSV(){let t=["Request Name","Type","Priority","Status","Service","Date"],e=this.filteredRequests.map(T=>[T.maintenanceName||"N/A",T.maintenanceTypeName||"N/A",T.priorityLevelName||"Normal",T.requestStatusName||"Pending",T.serviceMaintenanceName||"N/A",this.formatDate(T.createdDate)]),r=t.join(",")+`
`;e.forEach(T=>{r+=T.map(X=>`"${X}"`).join(",")+`
`});let o=new Blob([r],{type:"text/csv"}),s=window.URL.createObjectURL(o),_=document.createElement("a");_.href=s,_.download=`maintenance-report-${new Date().toISOString().split("T")[0]}.csv`,_.click(),window.URL.revokeObjectURL(s),this.messageService.add({severity:"success",summary:"Exported",detail:"Maintenance report exported to CSV"})}printReport(){window.print()}static \u0275fac=function(e){return new(e||a)(w(Ae),w(E))};static \u0275cmp=I({type:a,selectors:[["app-maintenance-report"]],features:[U([E])],decls:54,vars:9,consts:[["start",""],["end",""],["header",""],["body",""],["emptymessage",""],["styleClass","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-6"],[1,"p-4","bg-blue-50","rounded-lg"],[1,"text-gray-600","text-sm"],[1,"text-3xl","font-bold","text-blue-600"],[1,"p-4","bg-yellow-50","rounded-lg"],[1,"text-3xl","font-bold","text-yellow-600"],[1,"p-4","bg-green-50","rounded-lg"],[1,"text-3xl","font-bold","text-green-600"],[1,"p-4","bg-purple-50","rounded-lg"],[1,"text-3xl","font-bold","text-purple-600"],[1,"mb-4"],["responsiveLayout","scroll",3,"value","paginator","rows"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[3,"value"],[1,"text-2xl","font-bold"],["label","Export to CSV","icon","pi pi-download","severity","success",3,"onClick"],["label","Print","icon","pi pi-print","severity","info",1,"ml-2",3,"onClick"],[1,"flex","gap-4","p-4","flex-wrap"],[1,"flex-1","min-w-[200px]"],[1,"block","text-sm","font-medium","mb-2"],["placeholder","All Status",3,"ngModelChange","onChange","ngModel","options"],["placeholder","All Priorities",3,"ngModelChange","onChange","ngModel","options"],[1,"flex","items-end"],["label","Clear Filters","icon","pi pi-times","severity","secondary",3,"onClick"],["pSortableColumn",""],["field","maintenanceName"],["field","maintenanceTypeName"],["field","createdDate"],[3,"value","severity"],["colspan","6",1,"text-center","p-4"],[1,"text-lg","font-bold","p-4"]],template:function(e,r){e&1&&(g(0,"p-toast"),i(1,"p-toolbar",5),C(2,ea,2,0,"ng-template",null,0,x)(4,ta,2,0,"ng-template",null,1,x),n(),i(6,"div",6)(7,"div",7)(8,"p",8),l(9,"Total Requests"),n(),i(10,"p",9),l(11),n()(),i(12,"div",10)(13,"p",8),l(14,"Pending"),n(),i(15,"p",11),l(16),n()(),i(17,"div",12)(18,"p",8),l(19,"Approved"),n(),i(20,"p",13),l(21),n()(),i(22,"div",14)(23,"p",8),l(24,"Completed"),n(),i(25,"p",15),l(26),n()()(),i(27,"p-card",16),C(28,na,11,6,"ng-template",null,2,x),i(30,"p-table",17),C(31,ia,16,0,"ng-template",null,2,x)(33,ra,13,8,"ng-template",null,3,x)(35,oa,3,0,"ng-template",null,4,x),n()(),i(37,"div",18)(38,"p-card"),C(39,aa,2,0,"ng-template",null,2,x),i(41,"p-table",19),C(42,la,7,0,"ng-template",null,2,x)(44,sa,7,3,"ng-template",null,3,x),n()(),i(46,"p-card"),C(47,da,2,0,"ng-template",null,2,x),i(49,"p-table",19),C(50,ca,7,0,"ng-template",null,2,x)(52,ma,7,3,"ng-template",null,3,x),n()()()),e&2&&(d(11),h(r.maintenanceRequests.length),d(5),h(r.getPendingCount()),d(5),h(r.getApprovedCount()),d(5),h(r.getCompletedCount()),d(4),u("value",r.filteredRequests)("paginator",!0)("rows",10),d(11),u("value",r.getStatusBreakdown()),d(8),u("value",r.getPriorityBreakdown()))},dependencies:[P,L,k,N,D,V,R,F,H,z,he,Se,Y,mt,W,j,B,O,we,Be,ve],styles:["[_nghost-%COMP%]     .p-card{box-shadow:0 1px 3px #0000001a}"]})};var pa=()=>["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","All"];function ua(a,t){a&1&&(i(0,"h2",18),l(1,"Lab Schedule Report"),n())}function ga(a,t){if(a&1){let e=b();i(0,"p-button",19),f("onClick",function(){m(e);let o=c();return p(o.exportToCSV())}),n(),i(1,"p-button",20),f("onClick",function(){m(e);let o=c();return p(o.printReport())}),n()}}function _a(a,t){if(a&1){let e=b();i(0,"div",21)(1,"div",22)(2,"label",23),l(3,"Laboratory Filter"),n(),i(4,"p-select",24),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedLaboratory,o)||(s.selectedLaboratory=o),p(o)}),f("onChange",function(){m(e);let o=c();return p(o.filterSchedules())}),n()(),i(5,"div",22)(6,"label",23),l(7,"Day Filter"),n(),i(8,"p-select",25),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedDay,o)||(s.selectedDay=o),p(o)}),f("onChange",function(){m(e);let o=c();return p(o.filterSchedules())}),n()(),i(9,"div",26)(10,"p-button",27),f("onClick",function(){m(e);let o=c();return p(o.clearFilters())}),n()()()}if(a&2){let e=c();d(4),y("ngModel",e.selectedLaboratory),u("options",e.laboratories)("showClear",!0),d(4),y("ngModel",e.selectedDay),u("options",M(5,pa))}}function fa(a,t){a&1&&(i(0,"tr")(1,"th",28),l(2,"Laboratory "),g(3,"p-sortIcon",29),n(),i(4,"th",28),l(5,"Day "),g(6,"p-sortIcon",30),n(),i(7,"th",28),l(8,"Start Time "),g(9,"p-sortIcon",31),n(),i(10,"th",28),l(11,"End Time "),g(12,"p-sortIcon",32),n(),i(13,"th"),l(14,"Instructor"),n(),i(15,"th"),l(16,"Subject"),n()())}function ha(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n(),i(7,"td"),l(8),n(),i(9,"td"),l(10),n(),i(11,"td"),l(12),n()()),a&2){let e=t.$implicit,r=c();d(2),h(e.laboratoryName||"N/A"),d(2),h(r.formatDay(e.dayOfWeek)),d(2),h(e.startTime||"N/A"),d(2),h(e.endTime||"N/A"),d(2),h(e.instructorName||"N/A"),d(2),h(e.subjectName||"N/A")}}function ba(a,t){a&1&&(i(0,"tr")(1,"td",33),l(2,"No schedules found matching the selected filters."),n()())}function Ca(a,t){a&1&&(i(0,"h3",34),l(1,"Schedules by Laboratory"),n())}function xa(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Laboratory"),n(),i(3,"th"),l(4,"Schedules"),n(),i(5,"th"),l(6,"Percentage"),n()())}function ya(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n()()),a&2){let e=t.$implicit,r=c();d(2),h(e.laboratory),d(2),h(e.count),d(2),q("",(e.count/r.schedules.length*100).toFixed(2),"%")}}function va(a,t){a&1&&(i(0,"h3",34),l(1,"Schedules by Day"),n())}function Sa(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Day"),n(),i(3,"th"),l(4,"Schedules"),n(),i(5,"th"),l(6,"Percentage"),n()())}function wa(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n()()),a&2){let e=t.$implicit,r=c();d(2),h(e.day),d(2),h(e.count),d(2),q("",(e.count/r.schedules.length*100).toFixed(2),"%")}}var sn=class a{constructor(t,e){this.http=t;this.messageService=e}schedules=[];filteredSchedules=[];laboratories=[];selectedLaboratory="";selectedDay="";daysOfWeek=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];ngOnInit(){this.loadLaboratories(),this.loadSchedules()}loadLaboratories(){this.http.get(`${ae.apiUrl}/laboratories`).subscribe({next:t=>{this.laboratories=t,console.log("\u2705 Laboratories loaded:",this.laboratories.length)},error:t=>{console.error("\u274C Error loading laboratories:",t)}})}loadSchedules(){this.http.get(`${ae.apiUrl}/schedules`).subscribe({next:t=>{this.schedules=t,this.filteredSchedules=t,console.log("\u2705 Schedules loaded:",this.schedules.length)},error:t=>{console.error("\u274C Error loading schedules:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load schedules"})}})}filterSchedules(){this.filteredSchedules=this.schedules.filter(t=>{let e=!this.selectedLaboratory||t.laboratoryId===this.selectedLaboratory,r=!this.selectedDay||this.formatDay(t.dayOfWeek)===this.selectedDay;return e&&r})}clearFilters(){this.selectedLaboratory="",this.selectedDay="",this.filteredSchedules=this.schedules}formatDay(t){return this.daysOfWeek[t]||`Day ${t}`}getLaboratoriesCount(){return new Set(this.schedules.map(t=>t.laboratoryId)).size}getInstructorsCount(){return new Set(this.schedules.map(t=>t.instructorId)).size}getLaboratoryBreakdown(){let t={};return this.schedules.forEach(e=>{let r=e.laboratoryId,o=e.laboratoryName||`Lab ${r}`;t[r]||(t[r]={laboratory:o,count:0}),t[r].count++}),Object.values(t)}getDayBreakdown(){let t={};return this.schedules.forEach(e=>{let r=this.formatDay(e.dayOfWeek);t[r]=(t[r]||0)+1}),Object.entries(t).map(([e,r])=>({day:e,count:r}))}exportToCSV(){let t=["Laboratory","Day","Start Time","End Time","Instructor","Subject"],e=this.filteredSchedules.map(T=>[T.laboratoryName||"N/A",this.formatDay(T.dayOfWeek),T.startTime||"N/A",T.endTime||"N/A",T.instructorName||"N/A",T.subjectName||"N/A"]),r=t.join(",")+`
`;e.forEach(T=>{r+=T.map(X=>`"${X}"`).join(",")+`
`});let o=new Blob([r],{type:"text/csv"}),s=window.URL.createObjectURL(o),_=document.createElement("a");_.href=s,_.download=`schedule-report-${new Date().toISOString().split("T")[0]}.csv`,_.click(),window.URL.revokeObjectURL(s),this.messageService.add({severity:"success",summary:"Exported",detail:"Schedule report exported to CSV"})}printReport(){window.print()}static \u0275fac=function(e){return new(e||a)(w(ye),w(E))};static \u0275cmp=I({type:a,selectors:[["app-schedule-report"]],features:[U([E])],decls:49,vars:8,consts:[["start",""],["end",""],["header",""],["body",""],["emptymessage",""],["styleClass","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"p-4","bg-blue-50","rounded-lg"],[1,"text-gray-600","text-sm"],[1,"text-3xl","font-bold","text-blue-600"],[1,"p-4","bg-green-50","rounded-lg"],[1,"text-3xl","font-bold","text-green-600"],[1,"p-4","bg-orange-50","rounded-lg"],[1,"text-3xl","font-bold","text-orange-600"],[1,"mb-4"],["responsiveLayout","scroll",3,"value","paginator","rows"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[3,"value"],[1,"text-2xl","font-bold"],["label","Export to CSV","icon","pi pi-download","severity","success",3,"onClick"],["label","Print","icon","pi pi-print","severity","info",1,"ml-2",3,"onClick"],[1,"flex","gap-4","p-4","flex-wrap"],[1,"flex-1","min-w-[200px]"],[1,"block","text-sm","font-medium","mb-2"],["optionLabel","laboratoryName","optionValue","laboratoryId","placeholder","All Laboratories",3,"ngModelChange","onChange","ngModel","options","showClear"],["placeholder","All Days",3,"ngModelChange","onChange","ngModel","options"],[1,"flex","items-end"],["label","Clear Filters","icon","pi pi-times","severity","secondary",3,"onClick"],["pSortableColumn",""],["field","laboratoryName"],["field","dayOfWeek"],["field","startTime"],["field","endTime"],["colspan","6",1,"text-center","p-4"],[1,"text-lg","font-bold","p-4"]],template:function(e,r){e&1&&(g(0,"p-toast"),i(1,"p-toolbar",5),C(2,ua,2,0,"ng-template",null,0,x)(4,ga,2,0,"ng-template",null,1,x),n(),i(6,"div",6)(7,"div",7)(8,"p",8),l(9,"Total Schedules"),n(),i(10,"p",9),l(11),n()(),i(12,"div",10)(13,"p",8),l(14,"Laboratories"),n(),i(15,"p",11),l(16),n()(),i(17,"div",12)(18,"p",8),l(19,"Instructors"),n(),i(20,"p",13),l(21),n()()(),i(22,"p-card",14),C(23,_a,11,6,"ng-template",null,2,x),i(25,"p-table",15),C(26,fa,17,0,"ng-template",null,2,x)(28,ha,13,6,"ng-template",null,3,x)(30,ba,3,0,"ng-template",null,4,x),n()(),i(32,"div",16)(33,"p-card"),C(34,Ca,2,0,"ng-template",null,2,x),i(36,"p-table",17),C(37,xa,7,0,"ng-template",null,2,x)(39,ya,7,3,"ng-template",null,3,x),n()(),i(41,"p-card"),C(42,va,2,0,"ng-template",null,2,x),i(44,"p-table",17),C(45,Sa,7,0,"ng-template",null,2,x)(47,wa,7,3,"ng-template",null,3,x),n()()()),e&2&&(d(11),h(r.schedules.length),d(5),h(r.getLaboratoriesCount()),d(5),h(r.getInstructorsCount()),d(4),u("value",r.filteredSchedules)("paginator",!0)("rows",15),d(11),u("value",r.getLaboratoryBreakdown()),d(8),u("value",r.getDayBreakdown()))},dependencies:[P,L,k,N,D,V,R,F,H,z,he,Se,Y,mt,W,j,B,O,ve],styles:["[_nghost-%COMP%]     .p-card{box-shadow:0 1px 3px #0000001a}"]})};function Ma(a,t){a&1&&(g(0,"i",7),i(1,"span"),l(2,"Asset Report"),n())}function Ea(a,t){a&1&&(g(0,"i",8),i(1,"span"),l(2,"Maintenance Report"),n())}function Ta(a,t){a&1&&(g(0,"i",9),i(1,"span"),l(2,"Schedule Report"),n())}var dn=class a{constructor(t){this.router=t}static \u0275fac=function(e){return new(e||a)(w(jn))};static \u0275cmp=I({type:a,selectors:[["app-reports"]],decls:23,vars:0,consts:[["header",""],[1,"mb-6"],[1,"text-3xl","font-bold","mb-4"],[1,"text-gray-600"],["value","assets"],["value","maintenance"],["value","schedule"],[1,"pi","pi-box","mr-2"],[1,"pi","pi-wrench","mr-2"],[1,"pi","pi-calendar","mr-2"]],template:function(e,r){e&1&&(i(0,"div",1)(1,"h1",2),l(2,"Reports & Analytics"),n(),i(3,"p",3),l(4,"Access comprehensive reports and analytics for asset management, maintenance, and scheduling."),n()(),i(5,"p-tabs")(6,"p-tablist")(7,"p-tab",4),C(8,Ma,3,0,"ng-template",null,0,x),n(),i(10,"p-tab",5),C(11,Ea,3,0,"ng-template",null,0,x),n(),i(13,"p-tab",6),C(14,Ta,3,0,"ng-template",null,0,x),n()(),i(16,"p-tabpanels")(17,"p-tabpanel",4),g(18,"app-asset-report"),n(),i(19,"p-tabpanel",5),g(20,"app-maintenance-report"),n(),i(21,"p-tabpanel",6),g(22,"app-schedule-report"),n()()())},dependencies:[P,Wn,D,He,ii,ni,ti,Zn,ei,Y,an,ln,sn],styles:["[_nghost-%COMP%]{display:block;padding:1rem}"]})};var di=`
    .p-progressspinner {
        position: relative;
        margin: 0 auto;
        width: 100px;
        height: 100px;
        display: inline-block;
    }

    .p-progressspinner::before {
        content: '';
        display: block;
        padding-top: 100%;
    }

    .p-progressspinner-spin {
        height: 100%;
        transform-origin: center center;
        width: 100%;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
        animation: p-progressspinner-rotate 2s linear infinite;
    }

    .p-progressspinner-circle {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: 0;
        stroke: dt('progressspinner.colorOne');
        animation:
            p-progressspinner-dash 1.5s ease-in-out infinite,
            p-progressspinner-color 6s ease-in-out infinite;
        stroke-linecap: round;
    }

    @keyframes p-progressspinner-rotate {
        100% {
            transform: rotate(360deg);
        }
    }
    @keyframes p-progressspinner-dash {
        0% {
            stroke-dasharray: 1, 200;
            stroke-dashoffset: 0;
        }
        50% {
            stroke-dasharray: 89, 200;
            stroke-dashoffset: -35px;
        }
        100% {
            stroke-dasharray: 89, 200;
            stroke-dashoffset: -124px;
        }
    }
    @keyframes p-progressspinner-color {
        100%,
        0% {
            stroke: dt('progressspinner.color.one');
        }
        40% {
            stroke: dt('progressspinner.color.two');
        }
        66% {
            stroke: dt('progressspinner.color.three');
        }
        80%,
        90% {
            stroke: dt('progressspinner.color.four');
        }
    }
`;var Ia={root:()=>["p-progressspinner"],spin:"p-progressspinner-spin",circle:"p-progressspinner-circle"},ci=(()=>{class a extends qn{name="progressspinner";style=di;classes=Ia;static \u0275fac=(()=>{let e;return function(o){return(e||(e=fn(a)))(o||a)}})();static \u0275prov=kt({token:a,factory:a.\u0275fac})}return a})();var mi=new Dn("PROGRESSSPINNER_INSTANCE"),nt=(()=>{class a extends Qn{$pcProgressSpinner=Nt(mi,{optional:!0,skipSelf:!0})??void 0;bindDirectiveInstance=Nt(yt,{self:!0});styleClass;strokeWidth="2";fill="none";animationDuration="2s";ariaLabel;onAfterViewChecked(){this.bindDirectiveInstance.setAttrs(this.ptms(["host","root"]))}_componentStyle=Nt(ci);static \u0275fac=(()=>{let e;return function(o){return(e||(e=fn(a)))(o||a)}})();static \u0275cmp=I({type:a,selectors:[["p-progressSpinner"],["p-progress-spinner"],["p-progressspinner"]],hostVars:5,hostBindings:function(r,o){r&2&&(hn("aria-label",o.ariaLabel)("role","progressbar")("aria-busy",!0),Vt(o.cn(o.cx("root"),o.styleClass)))},inputs:{styleClass:"styleClass",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration",ariaLabel:"ariaLabel"},features:[U([ci,{provide:mi,useExisting:a},{provide:Yn,useExisting:a}]),On([yt]),rt],decls:2,vars:10,consts:[["viewBox","25 25 50 50",3,"pBind"],["cx","50","cy","50","r","20","stroke-miterlimit","10",3,"pBind"]],template:function(r,o){r&1&&(Nn(),i(0,"svg",0),g(1,"circle",1),n()),r&2&&(Vt(o.cx("spin")),Lt("animation-duration",o.animationDuration),u("pBind",o.ptm("spin")),d(),Vt(o.cx("circle")),u("pBind",o.ptm("circle")),hn("fill",o.fill)("stroke-width",o.strokeWidth))},dependencies:[P,Rt,yt],encapsulation:2,changeDetection:0})}return a})(),gt=(()=>{class a{static \u0275fac=function(r){return new(r||a)};static \u0275mod=Vn({type:a});static \u0275inj=Pn({imports:[nt,Rt,Rt]})}return a})();var Ze=class a{constructor(t){this.http=t}baseApiUrl=ae.apiUrl;getAssetReportData(){let t=`${this.baseApiUrl}/reports/assets`;return console.log("\u{1F4CA} Fetching Asset Report:",t),this.http.get(t)}getAssetReportCSV(){return this.http.get(`${this.baseApiUrl}/reports/assets/export`,{responseType:"blob"})}getMaintenanceReportData(){let t=`${this.baseApiUrl}/reports/maintenance`;return console.log("\u{1F4CA} Fetching Maintenance Report:",t),this.http.get(t)}getMaintenanceReportCSV(){return this.http.get(`${this.baseApiUrl}/reports/maintenance/export`,{responseType:"blob"})}getScheduleReportData(){let t=`${this.baseApiUrl}/reports/schedules`;return console.log("\u{1F4CA} Fetching Schedule Report:",t),this.http.get(t)}getScheduleReportCSV(){return this.http.get(`${this.baseApiUrl}/reports/schedules/export`,{responseType:"blob"})}getAssetReportFiltered(t){let e=`${this.baseApiUrl}/reports/assets/filter`,r=new URLSearchParams;return t.category&&r.append("category",t.category),t.status&&r.append("status",t.status),t.location&&r.append("location",t.location),r.toString()&&(e+="?"+r.toString()),this.http.get(e)}getMaintenanceReportFiltered(t){let e=`${this.baseApiUrl}/reports/maintenance/filter`,r=new URLSearchParams;return t.status&&r.append("status",t.status),t.priority&&r.append("priority",t.priority),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),r.toString()&&(e+="?"+r.toString()),this.http.get(e)}getScheduleReportFiltered(t){let e=`${this.baseApiUrl}/reports/schedules/filter`,r=new URLSearchParams;return t.laboratory&&r.append("laboratory",t.laboratory),t.day&&r.append("day",t.day),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),r.toString()&&(e+="?"+r.toString()),this.http.get(e)}getDashboardSummary(){let t=`${this.baseApiUrl}/reports/dashboard-summary`;return console.log("\u{1F4CA} Fetching Dashboard Summary:",t),this.http.get(t)}getDailyPreventiveReport(t,e){let r=`${this.baseApiUrl}/reports/preventive-maintenance/daily?date=${t}&laboratoryId=${e}`;return console.log("\u{1F4CA} Fetching Daily Preventive Report:",r),this.http.get(r)}getMonthlyPreventiveReport(t,e,r){let o=`${this.baseApiUrl}/reports/preventive-maintenance/monthly?month=${t}&year=${e}&laboratoryId=${r}`;return console.log("\u{1F4CA} Fetching Monthly Preventive Report:",o),this.http.get(o)}getDailyCorrectiveReport(t,e){let r=`${this.baseApiUrl}/reports/corrective-maintenance/daily?date=${t}`;return e&&(r+=`&priorityLevelId=${e}`),console.log("\u{1F4CA} Fetching Daily Corrective Report:",r),this.http.get(r)}getMonthlyCorrectiveReport(t,e,r){let o=`${this.baseApiUrl}/reports/corrective-maintenance/monthly?month=${t}&year=${e}`;return r&&(o+=`&priorityLevelId=${r}`),console.log("\u{1F4CA} Fetching Monthly Corrective Report:",o),this.http.get(o)}getDailyCalibrationReport(t){let e=`${this.baseApiUrl}/reports/calibration-maintenance/daily?date=${t}`;return console.log("\u{1F4CA} Fetching Daily Calibration Report:",e),this.http.get(e)}getMonthlyCalibrationReport(t,e){let r=`${this.baseApiUrl}/reports/calibration-maintenance/monthly?month=${t}&year=${e}`;return console.log("\u{1F4CA} Fetching Monthly Calibration Report:",r),this.http.get(r)}static \u0275fac=function(e){return new(e||a)(kn(ye))};static \u0275prov=kt({token:a,factory:a.\u0275fac,providedIn:"root"})};var gi=()=>[10,20,30],Pa=()=>({"min-width":"60rem"}),Da=()=>({"min-width":"80rem"});function ka(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",19),l(2,"Date"),n(),i(3,"p-datepicker",20),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedDate,o)||(s.selectedDate=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedDate)}}function Na(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",21),l(2,"Month"),n(),i(3,"p-select",22),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedMonth,o)||(s.selectedMonth=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedMonth),u("options",e.months)}}function La(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",23),l(2,"Year"),n(),i(3,"p-select",24),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedYear,o)||(s.selectedYear=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedYear),u("options",e.years)}}function Va(a,t){if(a&1&&g(0,"p-message",25),a&2){let e=c();u("text",e.errorMessage)}}function Ra(a,t){a&1&&(i(0,"div",26),g(1,"p-progressSpinner"),n())}function Oa(a,t){a&1&&(i(0,"span",36),l(1,"Daily Report Details"),n())}function Ba(a,t){if(a&1){let e=b();i(0,"p-button",37),f("onClick",function(){m(e);let o=c(2);return p(o.exportCSV())}),n()}}function Aa(a,t){a&1&&(i(0,"tr")(1,"th",38),l(2,"Machine/Equipment/Instrument"),n(),i(3,"th",39),l(4,"Action Taken"),n(),i(5,"th",39),l(6,"Observation"),n()())}function Fa(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),n(),i(3,"td"),l(4),n(),i(5,"td"),l(6),n()()),a&2){let e=t.$implicit;d(2),h(e.machineEquipmentInstrument||"N/A"),d(2),h(e.actionTaken||"N/A"),d(2),h(e.observation||"N/A")}}function Ua(a,t){a&1&&(i(0,"tr")(1,"td",40),l(2,"No records found."),n()())}function ja(a,t){if(a&1&&(i(0,"div",27)(1,"div",28)(2,"h3",29),l(3),n(),i(4,"p")(5,"strong"),l(6,"Date:"),n(),l(7),n(),i(8,"p")(9,"strong"),l(10,"Performed By:"),n(),l(11),n(),i(12,"p")(13,"strong"),l(14,"Assisted By:"),n(),l(15),n(),i(16,"p",30)(17,"strong"),l(18,"Recommendations:"),n()(),i(19,"p",5),l(20),n()(),i(21,"p-toolbar",31),C(22,Oa,2,0,"ng-template",null,0,x)(24,Ba,1,0,"ng-template",null,1,x),n(),i(26,"p-table",32),C(27,Aa,7,0,"ng-template",33)(28,Fa,7,3,"ng-template",34)(29,Ua,3,0,"ng-template",35),n()()),a&2){let e=c();d(3),h(e.reportData.laboratoryName),d(4),q(" ",e.formatDate(e.reportData.date)),d(4),q(" ",e.reportData.performedBy||"N/A"),d(4),q(" ",e.reportData.assistedBy||"N/A"),d(5),h(e.reportData.recommendations||"No recommendations provided"),d(6),u("value",e.reportData.records)("rows",10)("paginator",!0)("rowsPerPageOptions",M(10,gi))("tableStyle",M(11,Pa))}}function Wa(a,t){a&1&&(i(0,"span",36),l(1,"Monthly Report Details"),n())}function qa(a,t){if(a&1){let e=b();i(0,"p-button",37),f("onClick",function(){m(e);let o=c(2);return p(o.exportCSV())}),n()}}function $a(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Date"),n(),i(3,"th"),l(4,"Equipment"),n(),i(5,"th"),l(6,"Serial Number"),n(),i(7,"th"),l(8,"Observations"),n(),i(9,"th"),l(10,"Action Taken"),n(),i(11,"th"),l(12,"Remarks"),n()())}function Ha(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),Ee(3,"date"),n(),i(4,"td"),l(5),n(),i(6,"td"),l(7),n(),i(8,"td"),l(9),n(),i(10,"td"),l(11),n(),i(12,"td"),l(13),n()()),a&2){let e=t.$implicit;d(2),h(Te(3,6,e.date,"mediumDate")),d(3),h(e.machineEquipmentInstrument||"N/A"),d(2),h(e.serialNumber||"N/A"),d(2),h(e.observations||"N/A"),d(2),h(e.actionTaken||"N/A"),d(2),h(e.remarks||"N/A")}}function za(a,t){a&1&&(i(0,"tr")(1,"td",41),l(2,"No records found."),n()())}function Ya(a,t){if(a&1&&(i(0,"div",27)(1,"div",28)(2,"h3",29),l(3),n(),i(4,"p")(5,"strong"),l(6,"Period:"),n(),l(7),n(),i(8,"p")(9,"strong"),l(10,"Campus:"),n(),l(11),n(),i(12,"p")(13,"strong"),l(14,"Total Records:"),n(),l(15),n()(),i(16,"p-toolbar",31),C(17,Wa,2,0,"ng-template",null,0,x)(19,qa,1,0,"ng-template",null,1,x),n(),i(21,"p-table",32),C(22,$a,13,0,"ng-template",33)(23,Ha,14,9,"ng-template",34)(24,za,3,0,"ng-template",35),n()()),a&2){let e=c();d(3),h(e.reportData.laboratoryName),d(4),De(" ",e.getMonthName(e.reportData.month)," ",e.reportData.year),d(4),q(" ",e.reportData.campusName||"N/A"),d(4),q(" ",e.reportData.totalRecords||0),d(6),u("value",e.reportData.records)("rows",10)("paginator",!0)("rowsPerPageOptions",M(10,gi))("tableStyle",M(11,Da))}}function Qa(a,t){a&1&&(i(0,"div",42),g(1,"i",43),i(2,"p"),l(3,'Select filters and click "Generate Report" to view data.'),n()())}var cn=class a{constructor(t,e){this.reportService=t;this.http=e;let r=new Date().getFullYear();for(let o=2020;o<=r+5;o++)this.years.push(o)}reportType="daily";selectedDate=new Date;selectedMonth=new Date().getMonth()+1;selectedYear=new Date().getFullYear();laboratoryId="";reportData=null;isLoading=!1;errorMessage="";laboratories=[];reportTypes=[{label:"Daily Report",value:"daily"},{label:"Monthly Report",value:"monthly"}];months=[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}];years=[];ngOnInit(){this.loadLaboratories()}loadLaboratories(){let t=`${ae.apiUrl}/laboratories`;this.http.get(t).subscribe({next:e=>{this.laboratories=e,console.log("\u2705 Laboratories loaded:",e)},error:e=>{console.error("\u274C Error loading laboratories:",e)}})}onReportTypeChange(){this.reportData=null,this.errorMessage=""}isFormValid(){return this.laboratoryId.trim().length>0}generateReport(){if(this.isLoading=!0,this.errorMessage="",this.reportData=null,this.reportType==="daily"){let t=this.formatDateToString(this.selectedDate);this.reportService.getDailyPreventiveReport(t,this.laboratoryId).subscribe({next:e=>{this.reportData=e,this.isLoading=!1,console.log("\u2705 Daily Preventive Report loaded:",e)},error:e=>{this.errorMessage=e.error?.message||"Failed to generate daily report",this.isLoading=!1,console.error("\u274C Error loading daily report:",e)}})}else this.reportService.getMonthlyPreventiveReport(this.selectedMonth,this.selectedYear,this.laboratoryId).subscribe({next:t=>{this.reportData=t,this.isLoading=!1,console.log("\u2705 Monthly Preventive Report loaded:",t)},error:t=>{this.errorMessage=t.error?.message||"Failed to generate monthly report",this.isLoading=!1,console.error("\u274C Error loading monthly report:",t)}})}formatDateToString(t){let e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${o}`}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getMonthName(t){let e=this.months.find(r=>r.value===t);return e?e.label:"Unknown"}exportCSV(){if(!this.reportData||!this.reportData.records){console.warn("No data to export");return}let t="",e="";this.reportType==="daily"?(t=`Machine/Equipment,Action Taken,Observation
`,t+=this.reportData.records.map(_=>`"${_.machineEquipmentInstrument}","${_.actionTaken}","${_.observation}"`).join(`
`),e=`preventive-daily-${this.formatDateToString(this.selectedDate)}.csv`):(t=`Date,Equipment,Serial Number,Observations,Action Taken,Remarks
`,t+=this.reportData.records.map(_=>`"${new Date(_.date).toISOString().split("T")[0]}","${_.machineEquipmentInstrument}","${_.serialNumber}","${_.observations}","${_.actionTaken}","${_.remarks}"`).join(`
`),e=`preventive-monthly-${this.selectedYear}-${this.selectedMonth}.csv`);let r=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",e),o.click(),URL.revokeObjectURL(s)}static \u0275fac=function(e){return new(e||a)(w(Ze),w(ye))};static \u0275cmp=I({type:a,selectors:[["app-preventive-report"]],decls:26,vars:15,consts:[["start",""],["end",""],[1,"card"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold","mb-1"],[1,"text-muted-color"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-4","p-4","bg-surface-50","dark:bg-surface-800","rounded"],[1,"flex","flex-col","gap-2"],["for","reportType",1,"font-semibold"],["optionLabel","label","optionValue","value","placeholder","Select report type",3,"ngModelChange","onChange","ngModel","options"],["class","flex flex-col gap-2",4,"ngIf"],["for","laboratoryId",1,"font-semibold"],["optionLabel","laboratoryName","optionValue","laboratoryId","placeholder","Select laboratory",3,"ngModelChange","ngModel","options","filter"],[1,"flex","items-end"],["label","Generate Report","icon","pi pi-chart-bar",3,"onClick","disabled","loading"],["severity","error","styleClass","mb-4 w-full",3,"text",4,"ngIf"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","text-center py-8 text-muted-color",4,"ngIf"],["for","selectedDate",1,"font-semibold"],["inputId","selectedDate","placeholder","Select date","dateFormat","yy-mm-dd",3,"ngModelChange","ngModel"],["for","selectedMonth",1,"font-semibold"],["optionLabel","label","optionValue","value","placeholder","Select month",3,"ngModelChange","ngModel","options"],["for","selectedYear",1,"font-semibold"],["placeholder","Select year",3,"ngModelChange","ngModel","options"],["severity","error","styleClass","mb-4 w-full",3,"text"],[1,"flex","justify-center","items-center","py-8"],[1,"mt-4"],[1,"mb-4","p-4","bg-surface-100","dark:bg-surface-700","rounded"],[1,"text-xl","font-bold","mb-2"],[1,"mt-2"],["styleClass","mb-2"],[3,"value","rows","paginator","rowsPerPageOptions","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"font-semibold"],["label","Export CSV","icon","pi pi-upload","size","small",3,"onClick"],[2,"width","30%"],[2,"width","35%"],["colspan","3",1,"text-center","py-4"],["colspan","6",1,"text-center","py-4"],[1,"text-center","py-8","text-muted-color"],[1,"pi","pi-info-circle","text-4xl","mb-3"]],template:function(e,r){e&1&&(i(0,"div",2)(1,"div",3)(2,"div")(3,"h2",4),l(4,"Preventive Maintenance Report"),n(),i(5,"p",5),l(6,"Generate daily or monthly preventive maintenance reports by laboratory."),n()()(),i(7,"div",6)(8,"div",7)(9,"label",8),l(10,"Report Type"),n(),i(11,"p-select",9),S("ngModelChange",function(s){return v(r.reportType,s)||(r.reportType=s),s}),f("onChange",function(){return r.onReportTypeChange()}),n()(),C(12,ka,4,1,"div",10)(13,Na,4,2,"div",10)(14,La,4,2,"div",10),i(15,"div",7)(16,"label",11),l(17,"Laboratory"),n(),i(18,"p-select",12),S("ngModelChange",function(s){return v(r.laboratoryId,s)||(r.laboratoryId=s),s}),n()(),i(19,"div",13)(20,"p-button",14),f("onClick",function(){return r.generateReport()}),n()()(),C(21,Va,1,1,"p-message",15)(22,Ra,2,0,"div",16)(23,ja,30,12,"div",17)(24,Ya,25,12,"div",17)(25,Qa,4,0,"div",18),n()),e&2&&(d(11),y("ngModel",r.reportType),u("options",r.reportTypes),d(),u("ngIf",r.reportType==="daily"),d(),u("ngIf",r.reportType==="monthly"),d(),u("ngIf",r.reportType==="monthly"),d(4),y("ngModel",r.laboratoryId),u("options",r.laboratories)("filter",!0),d(2),u("disabled",!r.isFormValid()||r.isLoading)("loading",r.isLoading),d(),u("ngIf",r.errorMessage),d(),u("ngIf",r.isLoading),d(),u("ngIf",r.reportData&&r.reportType==="daily"&&!r.isLoading),d(),u("ngIf",r.reportData&&r.reportType==="monthly"&&!r.isLoading),d(),u("ngIf",!r.reportData&&!r.isLoading&&!r.errorMessage))},dependencies:[P,$e,L,k,N,B,O,$,D,V,ve,st,R,F,He,we,he,Se,A,gt,nt,ct,dt,Y,at],encapsulation:2})};var _i=()=>[10,20,30],Ga=()=>({"min-width":"90rem"}),Ja=()=>({"min-width":"100rem"});function Ka(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",19),l(2,"Date"),n(),i(3,"p-datepicker",20),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedDate,o)||(s.selectedDate=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedDate)}}function Xa(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",21),l(2,"Month"),n(),i(3,"p-select",22),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedMonth,o)||(s.selectedMonth=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedMonth),u("options",e.months)}}function Za(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",23),l(2,"Year"),n(),i(3,"p-select",24),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedYear,o)||(s.selectedYear=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedYear),u("options",e.years)}}function el(a,t){if(a&1&&g(0,"p-message",25),a&2){let e=c();u("text",e.errorMessage)}}function tl(a,t){a&1&&(i(0,"div",26),g(1,"p-progressSpinner"),n())}function nl(a,t){a&1&&(i(0,"span",35),l(1,"Daily Report Details"),n())}function il(a,t){if(a&1){let e=b();i(0,"p-button",36),f("onClick",function(){m(e);let o=c(2);return p(o.exportCSV())}),n()}}function rl(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Date"),n(),i(3,"th"),l(4,"Equipment"),n(),i(5,"th"),l(6,"Serial No."),n(),i(7,"th"),l(8,"Laboratory"),n(),i(9,"th"),l(10,"Problem"),n(),i(11,"th"),l(12,"Action Taken"),n(),i(13,"th"),l(14,"Parts Replaced"),n(),i(15,"th"),l(16,"Completed By"),n(),i(17,"th"),l(18,"Priority"),n(),i(19,"th"),l(20,"Downtime"),n()())}function ol(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),Ee(3,"date"),n(),i(4,"td"),l(5),n(),i(6,"td"),l(7),n(),i(8,"td"),l(9),n(),i(10,"td"),l(11),n(),i(12,"td"),l(13),n(),i(14,"td"),l(15),n(),i(16,"td"),l(17),n(),i(18,"td"),g(19,"p-tag",37),n(),i(20,"td"),l(21),n()()),a&2){let e=t.$implicit,r=c(2);d(2),h(Te(3,11,e.date,"shortDate")),d(3),h(e.equipmentName||"N/A"),d(2),h(e.serialNumber||"N/A"),d(2),h(e.laboratoryLocation||"N/A"),d(2),h(e.problemReported||"N/A"),d(2),h(e.actionTaken||"N/A"),d(2),h(e.partsReplaced||"None"),d(2),h(e.completedBy||"N/A"),d(2),u("value",e.priorityLevel)("severity",r.getPrioritySeverity(e.priorityLevel)),d(2),h(e.downtime||"N/A")}}function al(a,t){a&1&&(i(0,"tr")(1,"td",38),l(2,"No records found."),n()())}function ll(a,t){if(a&1&&(i(0,"div",27)(1,"div",28)(2,"h3",29),l(3,"Daily Corrective Maintenance Report"),n(),i(4,"p")(5,"strong"),l(6,"Date:"),n(),l(7),n(),i(8,"p")(9,"strong"),l(10,"Total Records:"),n(),l(11),n()(),i(12,"p-toolbar",30),C(13,nl,2,0,"ng-template",null,0,x)(15,il,1,0,"ng-template",null,1,x),n(),i(17,"p-table",31),C(18,rl,21,0,"ng-template",32)(19,ol,22,14,"ng-template",33)(20,al,3,0,"ng-template",34),n()()),a&2){let e=c();d(7),q(" ",e.formatDate(e.selectedDate)),d(4),q(" ",(e.reportData.records==null?null:e.reportData.records.length)||0),d(6),u("value",e.reportData.records)("rows",10)("paginator",!0)("rowsPerPageOptions",M(7,_i))("tableStyle",M(8,Ga))}}function sl(a,t){if(a&1&&(i(0,"p")(1,"strong"),l(2,"Generated:"),n(),l(3),Ee(4,"date"),n()),a&2){let e=c(2);d(3),q(" ",Te(4,1,e.reportData.generatedDate,"medium"))}}function dl(a,t){if(a&1&&(i(0,"div",43)(1,"div",44)(2,"h4",45),l(3,"Total Repairs"),n(),i(4,"p",46),l(5),n()(),i(6,"div",47)(7,"h4",48),l(8,"Completed"),n(),i(9,"p",49),l(10),n()(),i(11,"div",50)(12,"h4",51),l(13,"Avg Downtime"),n(),i(14,"p",52),l(15),n()(),i(16,"div",53)(17,"h4",54),l(18,"Completion Rate"),n(),i(19,"p",55),l(20),n()()()),a&2){let e=c(2);d(5),h(e.reportData.summary.totalRepairs),d(5),h(e.reportData.summary.completedRepairs),d(5),q("",e.reportData.summary.averageDowntimeHours,"h"),d(5),q("",e.getCompletionRate(),"%")}}function cl(a,t){if(a&1&&(i(0,"div",60)(1,"p",61),l(2),n(),i(3,"p",62),l(4),n()()),a&2){let e=t.$implicit;d(2),h(e.priorityLevel),d(2),h(e.count)}}function ml(a,t){if(a&1&&(i(0,"div",56)(1,"h4",57),l(2,"Breakdown by Priority"),n(),i(3,"div",58),C(4,cl,5,2,"div",59),n()()),a&2){let e=c(2);d(4),u("ngForOf",e.reportData.summary.byPriority)}}function pl(a,t){if(a&1&&(i(0,"div",60)(1,"p",61),l(2),n(),i(3,"p",62),l(4),n()()),a&2){let e=t.$implicit;d(2),h(e.laboratoryName),d(2),h(e.count)}}function ul(a,t){if(a&1&&(i(0,"div",56)(1,"h4",57),l(2,"Breakdown by Laboratory"),n(),i(3,"div",58),C(4,pl,5,2,"div",59),n()()),a&2){let e=c(2);d(4),u("ngForOf",e.reportData.summary.byLaboratory)}}function gl(a,t){a&1&&(i(0,"span",35),l(1,"Detailed Records"),n())}function _l(a,t){if(a&1){let e=b();i(0,"p-button",36),f("onClick",function(){m(e);let o=c(2);return p(o.exportCSV())}),n()}}function fl(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Date"),n(),i(3,"th"),l(4,"Equipment"),n(),i(5,"th"),l(6,"Serial No."),n(),i(7,"th"),l(8,"Laboratory"),n(),i(9,"th"),l(10,"Problem"),n(),i(11,"th"),l(12,"Action Taken"),n(),i(13,"th"),l(14,"Parts Replaced"),n(),i(15,"th"),l(16,"Remarks"),n(),i(17,"th"),l(18,"Completed By"),n(),i(19,"th"),l(20,"Priority"),n(),i(21,"th"),l(22,"Downtime"),n()())}function hl(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),Ee(3,"date"),n(),i(4,"td"),l(5),n(),i(6,"td"),l(7),n(),i(8,"td"),l(9),n(),i(10,"td"),l(11),n(),i(12,"td"),l(13),n(),i(14,"td"),l(15),n(),i(16,"td"),l(17),n(),i(18,"td"),l(19),n(),i(20,"td"),g(21,"p-tag",37),n(),i(22,"td"),l(23),n()()),a&2){let e=t.$implicit,r=c(2);d(2),h(Te(3,12,e.date,"shortDate")),d(3),h(e.equipmentName||"N/A"),d(2),h(e.serialNumber||"N/A"),d(2),h(e.laboratoryLocation||"N/A"),d(2),h(e.problemReported||"N/A"),d(2),h(e.actionTaken||"N/A"),d(2),h(e.partsReplaced||"None"),d(2),h(e.remarks||"N/A"),d(2),h(e.completedBy||"N/A"),d(2),u("value",e.priorityLevel)("severity",r.getPrioritySeverity(e.priorityLevel)),d(2),h(e.downtime||"N/A")}}function bl(a,t){a&1&&(i(0,"tr")(1,"td",63),l(2,"No records found."),n()())}function Cl(a,t){if(a&1&&(i(0,"div",27)(1,"div",28)(2,"h3",29),l(3),n(),i(4,"div",39)(5,"div")(6,"p")(7,"strong"),l(8,"Period:"),n(),l(9),n(),i(10,"p")(11,"strong"),l(12,"Campus:"),n(),l(13),n(),C(14,sl,5,4,"p",40),n(),i(15,"div")(16,"p")(17,"strong"),l(18,"Total Records:"),n(),l(19),n()()()(),C(20,dl,21,4,"div",41)(21,ml,5,1,"div",42)(22,ul,5,1,"div",42),i(23,"p-toolbar",30),C(24,gl,2,0,"ng-template",null,0,x)(26,_l,1,0,"ng-template",null,1,x),n(),i(28,"p-table",31),C(29,fl,23,0,"ng-template",32)(30,hl,24,15,"ng-template",33)(31,bl,3,0,"ng-template",34),n()()),a&2){let e=c();d(3),h(e.reportData.reportTitle||"Monthly Corrective Maintenance Report"),d(6),De(" ",e.getMonthName(e.reportData.reportMonth||e.selectedMonth)," ",e.reportData.reportYear||e.selectedYear),d(4),q(" ",e.reportData.campusName||"N/A"),d(),u("ngIf",e.reportData.generatedDate),d(5),q(" ",e.reportData.totalRecords||(e.reportData.records==null?null:e.reportData.records.length)||0),d(),u("ngIf",e.reportData.summary),d(),u("ngIf",e.reportData.summary==null?null:e.reportData.summary.byPriority),d(),u("ngIf",e.reportData.summary==null?null:e.reportData.summary.byLaboratory),d(6),u("value",e.reportData.records)("rows",10)("paginator",!0)("rowsPerPageOptions",M(14,_i))("tableStyle",M(15,Ja))}}function xl(a,t){a&1&&(i(0,"div",64),g(1,"i",65),i(2,"p"),l(3,'Select filters and click "Generate Report" to view data.'),n()())}var mn=class a{constructor(t,e){this.reportService=t;this.http=e;let r=new Date().getFullYear();for(let o=2020;o<=r+5;o++)this.years.push(o)}reportType="daily";selectedDate=new Date;selectedMonth=new Date().getMonth()+1;selectedYear=new Date().getFullYear();priorityLevelId="";reportData=null;isLoading=!1;errorMessage="";priorityLevels=[];reportTypes=[{label:"Daily Report",value:"daily"},{label:"Monthly Report",value:"monthly"}];months=[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}];years=[];ngOnInit(){this.loadPriorityLevels()}loadPriorityLevels(){let t=`${ae.apiUrl}/maintenance/priority-levels`;this.http.get(t).subscribe({next:e=>{this.priorityLevels=e,console.log("\u2705 Priority levels loaded:",e)},error:e=>{console.error("\u274C Error loading priority levels:",e)}})}onReportTypeChange(){this.reportData=null,this.errorMessage=""}generateReport(){if(this.isLoading=!0,this.errorMessage="",this.reportData=null,this.reportType==="daily"){let t=this.formatDateToString(this.selectedDate);this.reportService.getDailyCorrectiveReport(t,this.priorityLevelId||void 0).subscribe({next:e=>{this.reportData=e,this.isLoading=!1,console.log("\u2705 Daily Corrective Report loaded:",e)},error:e=>{this.errorMessage=e.error?.message||"Failed to generate daily report",this.isLoading=!1,console.error("\u274C Error loading daily report:",e)}})}else this.reportService.getMonthlyCorrectiveReport(this.selectedMonth,this.selectedYear,this.priorityLevelId||void 0).subscribe({next:t=>{this.reportData=t,this.isLoading=!1,console.log("\u2705 Monthly Corrective Report loaded:",t)},error:t=>{this.errorMessage=t.error?.message||"Failed to generate monthly report",this.isLoading=!1,console.error("\u274C Error loading monthly report:",t)}})}formatDateToString(t){let e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${o}`}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getMonthName(t){let e=this.months.find(r=>r.value===t);return e?e.label:"Unknown"}getCompletionRate(){if(!this.reportData?.summary)return 0;let{totalRepairs:t,completedRepairs:e}=this.reportData.summary;return t===0?0:Math.round(e/t*100)}getPrioritySeverity(t){let e=t?.toLowerCase()||"";return e.includes("high")||e.includes("critical")||e.includes("urgent")?"danger":e.includes("medium")||e.includes("moderate")?"warn":e.includes("low")?"success":"secondary"}exportCSV(){if(!this.reportData||!this.reportData.records){console.warn("No data to export");return}let t="",e="";this.reportType==="daily"?(t=`Date,Equipment,Serial No,Laboratory,Problem,Action Taken,Parts Replaced,Completed By,Priority,Downtime
`,t+=this.reportData.records.map(_=>`"${new Date(_.date).toISOString().split("T")[0]}","${_.equipmentName}","${_.serialNumber}","${_.laboratoryLocation}","${_.problemReported}","${_.actionTaken}","${_.partsReplaced}","${_.completedBy}","${_.priorityLevel}","${_.downtime}"`).join(`
`),e=`corrective-daily-${this.formatDateToString(this.selectedDate)}.csv`):(t=`Date,Equipment,Serial No,Laboratory,Problem,Action Taken,Parts Replaced,Remarks,Completed By,Requested By,Priority,Downtime
`,t+=this.reportData.records.map(_=>`"${new Date(_.date).toISOString().split("T")[0]}","${_.equipmentName}","${_.serialNumber}","${_.laboratoryLocation}","${_.problemReported}","${_.actionTaken}","${_.partsReplaced}","${_.remarks}","${_.completedBy}","${_.requestedBy}","${_.priorityLevel}","${_.downtime}"`).join(`
`),e=`corrective-monthly-${this.selectedYear}-${this.selectedMonth}.csv`);let r=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",e),o.click(),URL.revokeObjectURL(s)}static \u0275fac=function(e){return new(e||a)(w(Ze),w(ye))};static \u0275cmp=I({type:a,selectors:[["app-corrective-report"]],decls:26,vars:16,consts:[["start",""],["end",""],[1,"card"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold","mb-1"],[1,"text-muted-color"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-4","p-4","bg-surface-50","dark:bg-surface-800","rounded"],[1,"flex","flex-col","gap-2"],["for","reportType",1,"font-semibold"],["optionLabel","label","optionValue","value","placeholder","Select report type",3,"ngModelChange","onChange","ngModel","options"],["class","flex flex-col gap-2",4,"ngIf"],["for","priorityLevelId",1,"font-semibold"],["optionLabel","priorityLevelName","optionValue","priorityLevelId","placeholder","All Priorities",3,"ngModelChange","ngModel","options","filter","showClear"],[1,"flex","items-end"],["label","Generate Report","icon","pi pi-chart-bar",3,"onClick","disabled","loading"],["severity","error","styleClass","mb-4 w-full",3,"text",4,"ngIf"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","text-center py-8 text-muted-color",4,"ngIf"],["for","selectedDate",1,"font-semibold"],["inputId","selectedDate","placeholder","Select date","dateFormat","yy-mm-dd",3,"ngModelChange","ngModel"],["for","selectedMonth",1,"font-semibold"],["optionLabel","label","optionValue","value","placeholder","Select month",3,"ngModelChange","ngModel","options"],["for","selectedYear",1,"font-semibold"],["placeholder","Select year",3,"ngModelChange","ngModel","options"],["severity","error","styleClass","mb-4 w-full",3,"text"],[1,"flex","justify-center","items-center","py-8"],[1,"mt-4"],[1,"mb-4","p-4","bg-surface-100","dark:bg-surface-700","rounded"],[1,"text-xl","font-bold","mb-2"],["styleClass","mb-2"],[3,"value","rows","paginator","rowsPerPageOptions","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"font-semibold"],["label","Export CSV","icon","pi pi-upload","size","small",3,"onClick"],[3,"value","severity"],["colspan","10",1,"text-center","py-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2"],[4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-4"],[1,"p-4","bg-blue-50","dark:bg-blue-900","rounded"],[1,"text-sm","font-semibold","text-blue-700","dark:text-blue-300"],[1,"text-2xl","font-bold","text-blue-900","dark:text-blue-100"],[1,"p-4","bg-green-50","dark:bg-green-900","rounded"],[1,"text-sm","font-semibold","text-green-700","dark:text-green-300"],[1,"text-2xl","font-bold","text-green-900","dark:text-green-100"],[1,"p-4","bg-orange-50","dark:bg-orange-900","rounded"],[1,"text-sm","font-semibold","text-orange-700","dark:text-orange-300"],[1,"text-2xl","font-bold","text-orange-900","dark:text-orange-100"],[1,"p-4","bg-purple-50","dark:bg-purple-900","rounded"],[1,"text-sm","font-semibold","text-purple-700","dark:text-purple-300"],[1,"text-2xl","font-bold","text-purple-900","dark:text-purple-100"],[1,"mb-4"],[1,"font-semibold","mb-2"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-2"],["class","p-3 bg-surface-50 dark:bg-surface-800 rounded",4,"ngFor","ngForOf"],[1,"p-3","bg-surface-50","dark:bg-surface-800","rounded"],[1,"text-sm","text-muted-color"],[1,"text-lg","font-bold"],["colspan","11",1,"text-center","py-4"],[1,"text-center","py-8","text-muted-color"],[1,"pi","pi-info-circle","text-4xl","mb-3"]],template:function(e,r){e&1&&(i(0,"div",2)(1,"div",3)(2,"div")(3,"h2",4),l(4,"Corrective Maintenance Report"),n(),i(5,"p",5),l(6,"Generate daily or monthly corrective maintenance reports with priority filtering."),n()()(),i(7,"div",6)(8,"div",7)(9,"label",8),l(10,"Report Type"),n(),i(11,"p-select",9),S("ngModelChange",function(s){return v(r.reportType,s)||(r.reportType=s),s}),f("onChange",function(){return r.onReportTypeChange()}),n()(),C(12,Ka,4,1,"div",10)(13,Xa,4,2,"div",10)(14,Za,4,2,"div",10),i(15,"div",7)(16,"label",11),l(17,"Priority Level (Optional)"),n(),i(18,"p-select",12),S("ngModelChange",function(s){return v(r.priorityLevelId,s)||(r.priorityLevelId=s),s}),n()(),i(19,"div",13)(20,"p-button",14),f("onClick",function(){return r.generateReport()}),n()()(),C(21,el,1,1,"p-message",15)(22,tl,2,0,"div",16)(23,ll,21,9,"div",17)(24,Cl,32,16,"div",17)(25,xl,4,0,"div",18),n()),e&2&&(d(11),y("ngModel",r.reportType),u("options",r.reportTypes),d(),u("ngIf",r.reportType==="daily"),d(),u("ngIf",r.reportType==="monthly"),d(),u("ngIf",r.reportType==="monthly"),d(4),y("ngModel",r.priorityLevelId),u("options",r.priorityLevels)("filter",!0)("showClear",!0),d(2),u("disabled",r.isLoading)("loading",r.isLoading),d(),u("ngIf",r.errorMessage),d(),u("ngIf",r.isLoading),d(),u("ngIf",r.reportData&&r.reportType==="daily"&&!r.isLoading),d(),u("ngIf",r.reportData&&r.reportType==="monthly"&&!r.isLoading),d(),u("ngIf",!r.reportData&&!r.isLoading&&!r.errorMessage))},dependencies:[P,ot,$e,L,k,N,B,O,$,D,V,ve,st,R,F,He,we,Be,he,Se,A,gt,nt,ct,dt,Y,at],encapsulation:2})};var fi=()=>[10,20,30],yl=()=>({"min-width":"80rem"}),vl=()=>({"min-width":"90rem"});function Sl(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",17),l(2,"Date"),n(),i(3,"p-datepicker",18),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedDate,o)||(s.selectedDate=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedDate)}}function wl(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",19),l(2,"Month"),n(),i(3,"p-select",20),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedMonth,o)||(s.selectedMonth=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedMonth),u("options",e.months)}}function Ml(a,t){if(a&1){let e=b();i(0,"div",7)(1,"label",21),l(2,"Year"),n(),i(3,"p-select",22),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedYear,o)||(s.selectedYear=o),p(o)}),n()()}if(a&2){let e=c();d(3),y("ngModel",e.selectedYear),u("options",e.years)}}function El(a,t){if(a&1&&g(0,"p-message",23),a&2){let e=c();u("text",e.errorMessage)}}function Tl(a,t){a&1&&(i(0,"div",24),g(1,"p-progressSpinner"),n())}function Il(a,t){a&1&&(i(0,"span",33),l(1,"Daily Report Details"),n())}function Pl(a,t){if(a&1){let e=b();i(0,"p-button",34),f("onClick",function(){m(e);let o=c(2);return p(o.exportCSV())}),n()}}function Dl(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Date"),n(),i(3,"th"),l(4,"Equipment Name"),n(),i(5,"th"),l(6,"Serial Number"),n(),i(7,"th"),l(8,"Calibration Type"),n(),i(9,"th"),l(10,"Result"),n(),i(11,"th"),l(12,"Performed By"),n(),i(13,"th"),l(14,"Remarks"),n()())}function kl(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),Ee(3,"date"),n(),i(4,"td"),l(5),n(),i(6,"td"),l(7),n(),i(8,"td"),l(9),n(),i(10,"td"),g(11,"p-tag",35),n(),i(12,"td"),l(13),n(),i(14,"td"),l(15),n()()),a&2){let e=t.$implicit,r=c(2);d(2),h(Te(3,8,e.date,"shortDate")),d(3),h(e.equipmentName||"N/A"),d(2),h(e.serialNumber||"N/A"),d(2),h(e.calibrationType||"N/A"),d(2),u("value",e.result)("severity",r.getResultSeverity(e.result)),d(2),h(e.performedBy||"N/A"),d(2),h(e.remarks||"N/A")}}function Nl(a,t){a&1&&(i(0,"tr")(1,"td",36),l(2,"No records found."),n()())}function Ll(a,t){if(a&1&&(i(0,"div",25)(1,"div",26)(2,"h3",27),l(3,"Daily Calibration Report"),n(),i(4,"p")(5,"strong"),l(6,"Date:"),n(),l(7),n(),i(8,"p")(9,"strong"),l(10,"Total Records:"),n(),l(11),n()(),i(12,"p-toolbar",28),C(13,Il,2,0,"ng-template",null,0,x)(15,Pl,1,0,"ng-template",null,1,x),n(),i(17,"p-table",29),C(18,Dl,15,0,"ng-template",30)(19,kl,16,11,"ng-template",31)(20,Nl,3,0,"ng-template",32),n()()),a&2){let e=c();d(7),q(" ",e.formatDate(e.selectedDate)),d(4),q(" ",(e.reportData.records==null?null:e.reportData.records.length)||0),d(6),u("value",e.reportData.records)("rows",10)("paginator",!0)("rowsPerPageOptions",M(7,fi))("tableStyle",M(8,yl))}}function Vl(a,t){a&1&&(i(0,"span",33),l(1,"Monthly Report Details"),n())}function Rl(a,t){if(a&1){let e=b();i(0,"p-button",34),f("onClick",function(){m(e);let o=c(2);return p(o.exportCSV())}),n()}}function Ol(a,t){a&1&&(i(0,"tr")(1,"th"),l(2,"Date"),n(),i(3,"th"),l(4,"Equipment Name"),n(),i(5,"th"),l(6,"Serial Number"),n(),i(7,"th"),l(8,"Calibration Type"),n(),i(9,"th"),l(10,"Result"),n(),i(11,"th"),l(12,"Performed By"),n(),i(13,"th"),l(14,"Next Calibration"),n(),i(15,"th"),l(16,"Remarks"),n()())}function Bl(a,t){if(a&1&&(i(0,"tr")(1,"td"),l(2),Ee(3,"date"),n(),i(4,"td"),l(5),n(),i(6,"td"),l(7),n(),i(8,"td"),l(9),n(),i(10,"td"),g(11,"p-tag",35),n(),i(12,"td"),l(13),n(),i(14,"td"),l(15),Ee(16,"date"),n(),i(17,"td"),l(18),n()()),a&2){let e=t.$implicit,r=c(2);d(2),h(Te(3,9,e.date,"shortDate")),d(3),h(e.equipmentName||"N/A"),d(2),h(e.serialNumber||"N/A"),d(2),h(e.calibrationType||"N/A"),d(2),u("value",e.result)("severity",r.getResultSeverity(e.result)),d(2),h(e.performedBy||"N/A"),d(2),h(Te(16,12,e.nextCalibrationDate,"shortDate")),d(3),h(e.remarks||"N/A")}}function Al(a,t){a&1&&(i(0,"tr")(1,"td",37),l(2,"No records found."),n()())}function Fl(a,t){if(a&1&&(i(0,"div",25)(1,"div",26)(2,"h3",27),l(3,"Monthly Calibration Report"),n(),i(4,"p")(5,"strong"),l(6,"Period:"),n(),l(7),n(),i(8,"p")(9,"strong"),l(10,"Total Records:"),n(),l(11),n()(),i(12,"p-toolbar",28),C(13,Vl,2,0,"ng-template",null,0,x)(15,Rl,1,0,"ng-template",null,1,x),n(),i(17,"p-table",29),C(18,Ol,17,0,"ng-template",30)(19,Bl,19,15,"ng-template",31)(20,Al,3,0,"ng-template",32),n()()),a&2){let e=c();d(7),De(" ",e.getMonthName(e.selectedMonth)," ",e.selectedYear),d(4),q(" ",(e.reportData.records==null?null:e.reportData.records.length)||0),d(6),u("value",e.reportData.records)("rows",10)("paginator",!0)("rowsPerPageOptions",M(8,fi))("tableStyle",M(9,vl))}}function Ul(a,t){a&1&&(i(0,"div",38),g(1,"i",39),i(2,"p"),l(3,'Select filters and click "Generate Report" to view data.'),n()())}var pn=class a{constructor(t){this.reportService=t;let e=new Date().getFullYear();for(let r=2020;r<=e+5;r++)this.years.push(r)}reportType="daily";selectedDate=new Date;selectedMonth=new Date().getMonth()+1;selectedYear=new Date().getFullYear();reportData=null;isLoading=!1;errorMessage="";reportTypes=[{label:"Daily Report",value:"daily"},{label:"Monthly Report",value:"monthly"}];months=[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}];years=[];ngOnInit(){}onReportTypeChange(){this.reportData=null,this.errorMessage=""}generateReport(){if(this.isLoading=!0,this.errorMessage="",this.reportData=null,this.reportType==="daily"){let t=this.formatDateToString(this.selectedDate);this.reportService.getDailyCalibrationReport(t).subscribe({next:e=>{this.reportData=e,this.isLoading=!1,console.log("\u2705 Daily Calibration Report loaded:",e)},error:e=>{this.errorMessage=e.error?.message||"Failed to generate daily calibration report",this.isLoading=!1,console.error("\u274C Error loading daily calibration report:",e)}})}else this.reportService.getMonthlyCalibrationReport(this.selectedMonth,this.selectedYear).subscribe({next:t=>{this.reportData=t,this.isLoading=!1,console.log("\u2705 Monthly Calibration Report loaded:",t)},error:t=>{this.errorMessage=t.error?.message||"Failed to generate monthly calibration report",this.isLoading=!1,console.error("\u274C Error loading monthly calibration report:",t)}})}formatDateToString(t){let e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${o}`}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getMonthName(t){let e=this.months.find(r=>r.value===t);return e?e.label:"Unknown"}getResultSeverity(t){let e=t?.toLowerCase()||"";return e.includes("pass")||e.includes("success")||e.includes("calibrated")?"success":e.includes("fail")||e.includes("reject")?"danger":e.includes("pending")||e.includes("scheduled")?"warn":"secondary"}exportCSV(){if(!this.reportData||!this.reportData.records){console.warn("No data to export");return}let t="",e="";this.reportType==="daily"?(t=`Date,Equipment Name,Serial Number,Calibration Type,Result,Performed By,Remarks
`,t+=this.reportData.records.map(_=>`"${new Date(_.date).toISOString().split("T")[0]}","${_.equipmentName}","${_.serialNumber}","${_.calibrationType}","${_.result}","${_.performedBy}","${_.remarks}"`).join(`
`),e=`calibration-daily-${this.formatDateToString(this.selectedDate)}.csv`):(t=`Date,Equipment Name,Serial Number,Calibration Type,Result,Performed By,Next Calibration,Remarks
`,t+=this.reportData.records.map(_=>{let T=new Date(_.date).toISOString().split("T")[0],X=_.nextCalibrationDate?new Date(_.nextCalibrationDate).toISOString().split("T")[0]:"N/A";return`"${T}","${_.equipmentName}","${_.serialNumber}","${_.calibrationType}","${_.result}","${_.performedBy}","${X}","${_.remarks}"`}).join(`
`),e=`calibration-monthly-${this.selectedYear}-${this.selectedMonth}.csv`);let r=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",e),o.click(),URL.revokeObjectURL(s)}static \u0275fac=function(e){return new(e||a)(w(Ze))};static \u0275cmp=I({type:a,selectors:[["app-calibration-report"]],decls:22,vars:12,consts:[["start",""],["end",""],[1,"card"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold","mb-1"],[1,"text-muted-color"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-4","p-4","bg-surface-50","dark:bg-surface-800","rounded"],[1,"flex","flex-col","gap-2"],["for","reportType",1,"font-semibold"],["optionLabel","label","optionValue","value","placeholder","Select report type",3,"ngModelChange","onChange","ngModel","options"],["class","flex flex-col gap-2",4,"ngIf"],[1,"flex","items-end"],["label","Generate Report","icon","pi pi-chart-bar",3,"onClick","disabled","loading"],["severity","error","styleClass","mb-4 w-full",3,"text",4,"ngIf"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","text-center py-8 text-muted-color",4,"ngIf"],["for","selectedDate",1,"font-semibold"],["inputId","selectedDate","placeholder","Select date","dateFormat","yy-mm-dd",3,"ngModelChange","ngModel"],["for","selectedMonth",1,"font-semibold"],["optionLabel","label","optionValue","value","placeholder","Select month",3,"ngModelChange","ngModel","options"],["for","selectedYear",1,"font-semibold"],["placeholder","Select year",3,"ngModelChange","ngModel","options"],["severity","error","styleClass","mb-4 w-full",3,"text"],[1,"flex","justify-center","items-center","py-8"],[1,"mt-4"],[1,"mb-4","p-4","bg-surface-100","dark:bg-surface-700","rounded"],[1,"text-xl","font-bold","mb-2"],["styleClass","mb-2"],[3,"value","rows","paginator","rowsPerPageOptions","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"font-semibold"],["label","Export CSV","icon","pi pi-upload","size","small",3,"onClick"],[3,"value","severity"],["colspan","7",1,"text-center","py-4"],["colspan","8",1,"text-center","py-4"],[1,"text-center","py-8","text-muted-color"],[1,"pi","pi-info-circle","text-4xl","mb-3"]],template:function(e,r){e&1&&(i(0,"div",2)(1,"div",3)(2,"div")(3,"h2",4),l(4,"Calibration Report"),n(),i(5,"p",5),l(6,"Generate daily or monthly calibration reports for equipment maintenance."),n()()(),i(7,"div",6)(8,"div",7)(9,"label",8),l(10,"Report Type"),n(),i(11,"p-select",9),S("ngModelChange",function(s){return v(r.reportType,s)||(r.reportType=s),s}),f("onChange",function(){return r.onReportTypeChange()}),n()(),C(12,Sl,4,1,"div",10)(13,wl,4,2,"div",10)(14,Ml,4,2,"div",10),i(15,"div",11)(16,"p-button",12),f("onClick",function(){return r.generateReport()}),n()()(),C(17,El,1,1,"p-message",13)(18,Tl,2,0,"div",14)(19,Ll,21,9,"div",15)(20,Fl,21,10,"div",15)(21,Ul,4,0,"div",16),n()),e&2&&(d(11),y("ngModel",r.reportType),u("options",r.reportTypes),d(),u("ngIf",r.reportType==="daily"),d(),u("ngIf",r.reportType==="monthly"),d(),u("ngIf",r.reportType==="monthly"),d(2),u("disabled",r.isLoading)("loading",r.isLoading),d(),u("ngIf",r.errorMessage),d(),u("ngIf",r.isLoading),d(),u("ngIf",r.reportData&&r.reportType==="daily"&&!r.isLoading),d(),u("ngIf",r.reportData&&r.reportType==="monthly"&&!r.isLoading),d(),u("ngIf",!r.reportData&&!r.isLoading&&!r.errorMessage))},dependencies:[P,$e,L,k,N,B,O,$,D,V,ve,st,R,F,He,we,Be,he,Se,A,gt,nt,ct,dt,Y,at],encapsulation:2})};var hi=()=>[4,5,6,7,8,9,10,11,12],bi=()=>[1,2,3,4,5,6,7,8,9,10,11,12],jl=(a,t)=>t.displayName,Ci=(a,t)=>t.equipment.assetId;function Wl(a,t){a&1&&(i(0,"div",23),g(1,"i",24),i(2,"span",25),l(3,"Master Plan"),n()())}function ql(a,t){if(a&1&&(i(0,"option",33),l(1),n()),a&2){let e=t.$implicit;u("value",e),d(),q(" ",e," ")}}function $l(a,t){if(a&1&&(i(0,"option",33),l(1),n()),a&2){let e=t.$implicit;u("value",e.laboratoryId),d(),q(" ",e.laboratoryName," ")}}function Hl(a,t){if(a&1&&(i(0,"option",33),l(1),n()),a&2){let e=t.$implicit;u("value",e),d(),q(" ",e," ")}}function zl(a,t){if(a&1){let e=b();i(0,"div",26)(1,"div",23)(2,"label",27),l(3,"Year:"),n(),i(4,"select",28),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedYear,o)||(s.selectedYear=o),p(o)}),f("ngModelChange",function(){m(e);let o=c();return p(o.onFilterChange())}),i(5,"option",29),l(6,"All Years"),n(),C(7,ql,2,2,"option",30),n()(),i(8,"div",23)(9,"label",27),l(10,"Laboratory:"),n(),i(11,"select",28),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedLaboratory,o)||(s.selectedLaboratory=o),p(o)}),f("ngModelChange",function(){m(e);let o=c();return p(o.onFilterChange())}),i(12,"option",29),l(13,"Select Laboratory"),n(),C(14,$l,2,2,"option",30),n()(),i(15,"div",23)(16,"label",27),l(17,"Category:"),n(),i(18,"select",28),S("ngModelChange",function(o){m(e);let s=c();return v(s.selectedCategory,o)||(s.selectedCategory=o),p(o)}),f("ngModelChange",function(){m(e);let o=c();return p(o.onFilterChange())}),i(19,"option",29),l(20,"All Categories"),n(),C(21,Hl,2,2,"option",30),n()(),i(22,"div",23),g(23,"p-button",31)(24,"p-button",32),n()()}if(a&2){let e=c();d(4),y("ngModel",e.selectedYear),d(3),u("ngForOf",e.years),d(4),y("ngModel",e.selectedLaboratory),d(3),u("ngForOf",e.laboratories),d(4),y("ngModel",e.selectedCategory),d(3),u("ngForOf",e.categories),d(2),u("outlined",!0),d(),u("outlined",!0)}}function Yl(a,t){if(a&1&&l(0),a&2){let e=c(2).$implicit;q(" ",e.displayName," ")}}function Ql(a,t){if(a&1&&(i(0,"td"),l(1),n(),g(2,"td")),a&2){let e=c().$implicit;d(),h(e.equipment.serialNumber)}}function Gl(a,t){if(a&1&&(g(0,"td"),i(1,"td"),l(2),n()),a&2){let e=c().$implicit;d(2),h(e.equipment.serialNumber)}}function Jl(a,t){if(a&1&&(i(0,"td"),l(1),n(),g(2,"td")),a&2){let e=c().$implicit;d(),h(e.equipment.serialNumber)}}function Kl(a,t){if(a&1&&(i(0,"tr",40)(1,"td",41),ht(2,Yl,1,1),n(),g(3,"td")(4,"td"),ht(5,Ql,3,1)(6,Gl,3,1)(7,Jl,3,1),i(8,"td"),l(9),n(),g(10,"td")(11,"td")(12,"td"),n()),a&2){let e=t.$implicit,r=t.$index;d(2),bt(r===0?2:-1),d(3),bt(e.equipment.equipmentName!=null&&e.equipment.equipmentName.toLowerCase().includes("desktop")||e.equipment.equipmentName!=null&&e.equipment.equipmentName.toLowerCase().includes("cpu")?5:e.equipment.equipmentName!=null&&e.equipment.equipmentName.toLowerCase().includes("monitor")?6:7),d(4),h(e.equipment.location||"N/A")}}function Xl(a,t){if(a&1&&We(0,Kl,13,3,"tr",40,Ci),a&2){let e=t.$implicit;qe(e.equipment)}}function Zl(a,t){if(a&1&&(i(0,"tr",34)(1,"td",35)(2,"strong"),l(3),n(),g(4,"br"),i(5,"small",36),l(6),n()(),i(7,"td")(8,"strong"),l(9),n()(),i(10,"td"),l(11,"-"),n(),i(12,"td"),l(13,"-"),n(),i(14,"td"),l(15,"-"),n(),i(16,"td"),l(17,"-"),n(),i(18,"td",37),l(19),Ee(20,"number"),n(),i(21,"td")(22,"span",38),l(23),n()(),i(24,"td")(25,"span",39),l(26),n()()(),We(27,Xl,2,0,null,null,jl)),a&2){let e=c();d(3),h(e.masterPlanData.laboratoryName),d(3),h(e.masterPlanData.laboratoryLocation||"N/A"),d(3),h(e.masterPlanData.totalEquipment||e.equipmentList.length),d(10),h(Te(20,6,e.getTotalPrice(),"1.2-2")),d(4),h(e.getFunctionalCount()),d(3),h(e.masterPlanData.underRepair||0),d(),qe(e.groupedEquipment)}}function es(a,t){a&1&&(i(0,"tr",42)(1,"td",43),g(2,"i",44),l(3,"A) Frequently Used"),n()(),i(4,"tr",34)(5,"td",35),l(6,"DATA SCIENCE LABORATORY"),n(),i(7,"td")(8,"strong"),l(9,"41"),n()(),i(10,"td"),l(11,"1/4/2019"),n(),i(12,"td"),l(13,"MMLY7SS0228130BC1D858B"),n(),i(14,"td"),l(15,"DTVPPSP33984604B929600"),n(),i(16,"td"),l(17,"Lab 9-204"),n(),i(18,"td",37),l(19,"P56,810.00"),n(),i(20,"td")(21,"span",38),l(22,"39"),n()(),i(23,"td")(24,"span",39),l(25,"2"),n()()(),i(26,"tr",40)(27,"td",41),l(28,"ICT Bldg. 9-204 2nd Flr."),n(),g(29,"td")(30,"td"),i(31,"td"),l(32,"MMLY7SS0228130BC24858B"),n(),i(33,"td"),l(34,"DTVPPSP339846048AB9600"),n(),g(35,"td")(36,"td")(37,"td")(38,"td"),n(),i(39,"tr",40),g(40,"td",41)(41,"td")(42,"td"),i(43,"td"),l(44,"MMLY7SS0228130BC25858B"),n(),i(45,"td"),l(46,"DTVPPSP339846048AA9600"),n(),g(47,"td")(48,"td")(49,"td")(50,"td"),n(),i(51,"tr",40)(52,"td",41),l(53,"ACER VERITON M2640"),n(),g(54,"td")(55,"td"),i(56,"td"),l(57,"MMLY7SS0228130BC26858B"),n(),i(58,"td"),l(59,"DTVPPSP339846048B69600"),n(),g(60,"td")(61,"td")(62,"td")(63,"td"),n(),i(64,"tr",45)(65,"td",41),l(66,'Desktop w/21.5" Inches Led Monitor'),n(),g(67,"td")(68,"td"),i(69,"td"),l(70,"MMLY7SS0228130BC27859B"),n(),i(71,"td"),l(72,"DTVPPSP339846040A09600"),n(),g(73,"td")(74,"td")(75,"td")(76,"td"),n(),i(77,"tr",40)(78,"td",46),l(79,"HDD: 1TB"),n(),g(80,"td")(81,"td"),i(82,"td"),l(83,"MMLY7SS0228130BC28858B"),n(),i(84,"td"),l(85,"DTVPPSP339846048A79600"),n(),g(86,"td")(87,"td")(88,"td")(89,"td"),n(),i(90,"tr",40)(91,"td",46),l(92,"RAM: 8GB"),n(),g(93,"td")(94,"td"),i(95,"td"),l(96,"MMLY7SS0228130BC29858B"),n(),i(97,"td"),l(98,"DTVPPSP339846048B89600"),n(),g(99,"td")(100,"td")(101,"td")(102,"td"),n(),i(103,"tr",40)(104,"td",46),l(105,"PROCESSOR: CORE/7"),n(),g(106,"td")(107,"td"),i(108,"td"),l(109,"MMLY7SS0228130BC2B858B"),n(),i(110,"td"),l(111,"DTVPPSP339846048B29600"),n(),g(112,"td")(113,"td")(114,"td")(115,"td"),n(),i(116,"tr",40)(117,"td",46),l(118,"OS: WINDOWS 10"),n(),g(119,"td")(120,"td"),i(121,"td"),l(122,"MMLY7SS0228130BC2C858B"),n(),i(123,"td"),l(124,"DTVPPSP339846048A99600"),n(),g(125,"td")(126,"td")(127,"td")(128,"td"),n(),i(129,"tr",40),g(130,"td",41)(131,"td")(132,"td"),i(133,"td"),l(134,"MMLY7SS0228130BC2D858B"),n(),i(135,"td"),l(136,"DTVPPSP339846048A29600"),n(),g(137,"td")(138,"td")(139,"td")(140,"td"),n(),i(141,"tr",40),g(142,"td",41)(143,"td")(144,"td"),i(145,"td"),l(146,"MMLY7SS0228130BC2F858B"),n(),i(147,"td"),l(148,"DTVPPSP339846048BF9600"),n(),g(149,"td")(150,"td")(151,"td")(152,"td"),n(),i(153,"tr",40),g(154,"td",41)(155,"td")(156,"td"),i(157,"td"),l(158,"MMLY7SS0228130BC30858B"),n(),i(159,"td"),l(160,"DTVPPSP339846048AF9600"),n(),g(161,"td")(162,"td")(163,"td")(164,"td"),n(),i(165,"tr",40),g(166,"td",41)(167,"td")(168,"td"),i(169,"td"),l(170,"MMLY7SS0228130BC31858B"),n(),i(171,"td"),l(172,"DTVPPSP339846048A59600"),n(),g(173,"td")(174,"td")(175,"td")(176,"td"),n(),i(177,"tr",40),g(178,"td",41)(179,"td")(180,"td"),i(181,"td"),l(182,"MMLY7SS0228130BC32858B"),n(),i(183,"td"),l(184,"DTVPPSP339846048AC9600"),n(),g(185,"td")(186,"td")(187,"td")(188,"td"),n(),i(189,"tr",40),g(190,"td",41)(191,"td")(192,"td"),i(193,"td"),l(194,"MMLY7SS0228130BC33858B"),n(),i(195,"td"),l(196,"DTVPPSP339846048BC9600"),n(),g(197,"td")(198,"td")(199,"td")(200,"td"),n(),i(201,"tr",40),g(202,"td",41)(203,"td")(204,"td"),i(205,"td"),l(206,"MMLY7SS0228130BC34858B"),n(),i(207,"td"),l(208,"DTVPPSP339846048B99600"),n(),g(209,"td")(210,"td")(211,"td")(212,"td"),n(),i(213,"tr",40),g(214,"td",41)(215,"td")(216,"td"),i(217,"td"),l(218,"MMLY7SS0228130BC35858B"),n(),i(219,"td"),l(220,"DTVPPSP339846048979600"),n(),g(221,"td")(222,"td")(223,"td")(224,"td"),n(),i(225,"tr",40),g(226,"td",41)(227,"td")(228,"td"),i(229,"td"),l(230,"MMLY7SS0228130BC38858B"),n(),i(231,"td"),l(232,"DTVPPSP339846048B99600"),n(),g(233,"td")(234,"td")(235,"td")(236,"td"),n(),i(237,"tr",40),g(238,"td",41)(239,"td")(240,"td"),i(241,"td"),l(242,"MMLY7SS0228130BC37858B"),n(),i(243,"td"),l(244,"DTVPPSP339846048A19600"),n(),g(245,"td")(246,"td")(247,"td")(248,"td"),n(),i(249,"tr",40),g(250,"td",41)(251,"td")(252,"td"),i(253,"td"),l(254,"MMLY7SS0228130BC38858B"),n(),i(255,"td"),l(256,"DTVPPSP339846048BC9600"),n(),g(257,"td")(258,"td")(259,"td")(260,"td"),n(),i(261,"tr",40),g(262,"td",41)(263,"td")(264,"td"),i(265,"td"),l(266,"MMLY7SS0228130BC39858B"),n(),i(267,"td"),l(268,"DTVPPSP339846048B39600"),n(),g(269,"td")(270,"td")(271,"td")(272,"td"),n(),i(273,"tr",40),g(274,"td",41)(275,"td")(276,"td"),i(277,"td"),l(278,"MMLY7SS0228130BF85858B"),n(),i(279,"td"),l(280,"DTVPPSP339846048BD9600"),n(),g(281,"td")(282,"td")(283,"td")(284,"td"),n(),i(285,"tr",40),g(286,"td",41)(287,"td")(288,"td"),i(289,"td"),l(290,"MMLY7SS0228130BFB6858B"),n(),i(291,"td"),l(292,"DTVPPSP339846048B09600"),n(),g(293,"td")(294,"td")(295,"td")(296,"td"),n())}function ts(a,t){if(a&1&&(i(0,"td"),l(1),n()),a&2){let e=t.$implicit,r=c().$implicit,o=c(2);d(),h(o.getMaintenanceMark(r,e,"inventory"))}}function ns(a,t){if(a&1&&(i(0,"td"),l(1),n()),a&2){let e=t.$implicit,r=c().$implicit,o=c(2);d(),h(o.getMaintenanceMark(r,e,"preventive"))}}function is(a,t){if(a&1&&(i(0,"td"),l(1),n()),a&2){let e=t.$implicit,r=c().$implicit,o=c(2);d(),h(o.getMaintenanceMark(r,e,"corrective"))}}function rs(a,t){if(a&1&&(i(0,"td"),l(1),n()),a&2){let e=t.$implicit,r=c().$implicit,o=c(2);d(),h(o.getMaintenanceMark(r,e,"calibration"))}}function os(a,t){a&1&&(i(0,"tr"),We(1,ts,2,1,"td",null,Ct),We(3,ns,2,1,"td",null,Ct),We(5,is,2,1,"td",null,Ct),We(7,rs,2,1,"td",null,Ct),n()),a&2&&(d(),qe(M(0,hi)),d(2),qe(M(1,hi)),d(2),qe(M(2,bi)),d(2),qe(M(3,bi)))}function as(a,t){if(a&1&&We(0,os,9,4,"tr",null,Ci),a&2){let e=c();qe(e.equipmentList)}}function ls(a,t){a&1&&(i(0,"tr"),g(1,"td")(2,"td")(3,"td")(4,"td")(5,"td")(6,"td")(7,"td")(8,"td")(9,"td")(10,"td")(11,"td")(12,"td")(13,"td")(14,"td")(15,"td")(16,"td")(17,"td")(18,"td")(19,"td")(20,"td")(21,"td")(22,"td")(23,"td")(24,"td")(25,"td")(26,"td")(27,"td")(28,"td")(29,"td")(30,"td")(31,"td")(32,"td")(33,"td")(34,"td")(35,"td")(36,"td")(37,"td")(38,"td")(39,"td")(40,"td")(41,"td")(42,"td"),n(),i(43,"tr"),g(44,"td")(45,"td")(46,"td")(47,"td")(48,"td")(49,"td")(50,"td")(51,"td")(52,"td")(53,"td")(54,"td")(55,"td")(56,"td")(57,"td")(58,"td")(59,"td")(60,"td")(61,"td")(62,"td")(63,"td")(64,"td")(65,"td")(66,"td")(67,"td")(68,"td")(69,"td")(70,"td")(71,"td")(72,"td")(73,"td")(74,"td")(75,"td")(76,"td")(77,"td")(78,"td")(79,"td")(80,"td")(81,"td")(82,"td")(83,"td")(84,"td")(85,"td"),n(),i(86,"tr"),g(87,"td")(88,"td")(89,"td")(90,"td")(91,"td")(92,"td")(93,"td")(94,"td")(95,"td")(96,"td")(97,"td")(98,"td")(99,"td")(100,"td")(101,"td")(102,"td")(103,"td")(104,"td")(105,"td")(106,"td")(107,"td")(108,"td")(109,"td")(110,"td")(111,"td")(112,"td")(113,"td")(114,"td")(115,"td")(116,"td")(117,"td")(118,"td")(119,"td")(120,"td")(121,"td")(122,"td")(123,"td")(124,"td")(125,"td")(126,"td")(127,"td")(128,"td"),n(),i(129,"tr"),g(130,"td")(131,"td")(132,"td")(133,"td")(134,"td")(135,"td")(136,"td")(137,"td")(138,"td")(139,"td")(140,"td")(141,"td")(142,"td")(143,"td")(144,"td")(145,"td")(146,"td")(147,"td")(148,"td")(149,"td")(150,"td")(151,"td")(152,"td")(153,"td")(154,"td")(155,"td")(156,"td")(157,"td")(158,"td")(159,"td")(160,"td")(161,"td")(162,"td")(163,"td")(164,"td")(165,"td")(166,"td")(167,"td")(168,"td")(169,"td")(170,"td")(171,"td"),n(),i(172,"tr"),g(173,"td")(174,"td")(175,"td")(176,"td")(177,"td")(178,"td")(179,"td")(180,"td")(181,"td")(182,"td")(183,"td")(184,"td")(185,"td")(186,"td")(187,"td")(188,"td")(189,"td")(190,"td")(191,"td")(192,"td")(193,"td")(194,"td")(195,"td")(196,"td")(197,"td")(198,"td")(199,"td")(200,"td")(201,"td")(202,"td")(203,"td")(204,"td")(205,"td")(206,"td")(207,"td")(208,"td")(209,"td")(210,"td")(211,"td")(212,"td")(213,"td")(214,"td"),n(),i(215,"tr"),g(216,"td")(217,"td")(218,"td")(219,"td")(220,"td")(221,"td")(222,"td")(223,"td")(224,"td")(225,"td")(226,"td")(227,"td")(228,"td")(229,"td")(230,"td")(231,"td")(232,"td")(233,"td")(234,"td")(235,"td")(236,"td")(237,"td")(238,"td")(239,"td")(240,"td")(241,"td")(242,"td")(243,"td")(244,"td")(245,"td")(246,"td")(247,"td")(248,"td")(249,"td")(250,"td")(251,"td")(252,"td")(253,"td")(254,"td")(255,"td")(256,"td")(257,"td"),n(),i(258,"tr"),g(259,"td")(260,"td")(261,"td")(262,"td")(263,"td")(264,"td")(265,"td")(266,"td")(267,"td")(268,"td")(269,"td")(270,"td")(271,"td")(272,"td")(273,"td")(274,"td")(275,"td")(276,"td")(277,"td")(278,"td")(279,"td")(280,"td")(281,"td")(282,"td")(283,"td")(284,"td")(285,"td")(286,"td")(287,"td")(288,"td")(289,"td")(290,"td")(291,"td")(292,"td")(293,"td")(294,"td")(295,"td")(296,"td")(297,"td")(298,"td")(299,"td")(300,"td"),n(),i(301,"tr"),g(302,"td")(303,"td")(304,"td")(305,"td")(306,"td")(307,"td")(308,"td")(309,"td")(310,"td")(311,"td")(312,"td")(313,"td")(314,"td")(315,"td")(316,"td")(317,"td")(318,"td")(319,"td")(320,"td")(321,"td")(322,"td")(323,"td")(324,"td")(325,"td")(326,"td")(327,"td")(328,"td")(329,"td")(330,"td")(331,"td")(332,"td")(333,"td")(334,"td")(335,"td")(336,"td")(337,"td")(338,"td")(339,"td")(340,"td")(341,"td")(342,"td")(343,"td"),n(),i(344,"tr"),g(345,"td")(346,"td")(347,"td")(348,"td")(349,"td")(350,"td")(351,"td")(352,"td")(353,"td")(354,"td")(355,"td")(356,"td")(357,"td")(358,"td")(359,"td")(360,"td")(361,"td")(362,"td")(363,"td")(364,"td")(365,"td")(366,"td")(367,"td")(368,"td")(369,"td")(370,"td")(371,"td")(372,"td")(373,"td")(374,"td")(375,"td")(376,"td")(377,"td")(378,"td")(379,"td")(380,"td")(381,"td")(382,"td")(383,"td")(384,"td")(385,"td")(386,"td"),n(),i(387,"tr"),g(388,"td")(389,"td")(390,"td")(391,"td")(392,"td")(393,"td")(394,"td")(395,"td")(396,"td")(397,"td")(398,"td")(399,"td")(400,"td")(401,"td")(402,"td")(403,"td")(404,"td")(405,"td")(406,"td")(407,"td")(408,"td")(409,"td")(410,"td")(411,"td")(412,"td")(413,"td")(414,"td")(415,"td")(416,"td")(417,"td")(418,"td")(419,"td")(420,"td")(421,"td")(422,"td")(423,"td")(424,"td")(425,"td")(426,"td")(427,"td")(428,"td")(429,"td"),n(),i(430,"tr"),g(431,"td")(432,"td")(433,"td")(434,"td")(435,"td")(436,"td")(437,"td")(438,"td")(439,"td")(440,"td")(441,"td")(442,"td")(443,"td")(444,"td")(445,"td")(446,"td")(447,"td")(448,"td")(449,"td")(450,"td")(451,"td")(452,"td")(453,"td")(454,"td")(455,"td")(456,"td")(457,"td")(458,"td")(459,"td")(460,"td")(461,"td")(462,"td")(463,"td")(464,"td")(465,"td")(466,"td")(467,"td")(468,"td")(469,"td")(470,"td")(471,"td")(472,"td"),n(),i(473,"tr"),g(474,"td")(475,"td")(476,"td")(477,"td")(478,"td")(479,"td")(480,"td")(481,"td")(482,"td")(483,"td")(484,"td")(485,"td")(486,"td")(487,"td")(488,"td")(489,"td")(490,"td")(491,"td")(492,"td")(493,"td")(494,"td")(495,"td")(496,"td")(497,"td")(498,"td")(499,"td")(500,"td")(501,"td")(502,"td")(503,"td")(504,"td")(505,"td")(506,"td")(507,"td")(508,"td")(509,"td")(510,"td")(511,"td")(512,"td")(513,"td")(514,"td")(515,"td"),n(),i(516,"tr"),g(517,"td")(518,"td")(519,"td")(520,"td")(521,"td")(522,"td")(523,"td")(524,"td")(525,"td")(526,"td")(527,"td")(528,"td")(529,"td")(530,"td")(531,"td")(532,"td")(533,"td")(534,"td")(535,"td")(536,"td")(537,"td")(538,"td")(539,"td")(540,"td")(541,"td")(542,"td")(543,"td")(544,"td")(545,"td")(546,"td")(547,"td")(548,"td")(549,"td")(550,"td")(551,"td")(552,"td")(553,"td")(554,"td")(555,"td")(556,"td")(557,"td")(558,"td"),n(),i(559,"tr"),g(560,"td")(561,"td")(562,"td")(563,"td")(564,"td")(565,"td")(566,"td")(567,"td")(568,"td")(569,"td")(570,"td")(571,"td")(572,"td")(573,"td")(574,"td")(575,"td")(576,"td")(577,"td")(578,"td")(579,"td")(580,"td")(581,"td")(582,"td")(583,"td")(584,"td")(585,"td")(586,"td")(587,"td")(588,"td")(589,"td")(590,"td")(591,"td")(592,"td")(593,"td")(594,"td")(595,"td")(596,"td")(597,"td")(598,"td")(599,"td")(600,"td")(601,"td"),n(),i(602,"tr"),g(603,"td")(604,"td")(605,"td")(606,"td")(607,"td")(608,"td")(609,"td")(610,"td")(611,"td")(612,"td")(613,"td")(614,"td")(615,"td")(616,"td")(617,"td")(618,"td")(619,"td")(620,"td")(621,"td")(622,"td")(623,"td")(624,"td")(625,"td")(626,"td")(627,"td")(628,"td")(629,"td")(630,"td")(631,"td")(632,"td")(633,"td")(634,"td")(635,"td")(636,"td")(637,"td")(638,"td")(639,"td")(640,"td")(641,"td")(642,"td")(643,"td")(644,"td"),n(),i(645,"tr"),g(646,"td")(647,"td")(648,"td")(649,"td")(650,"td")(651,"td")(652,"td")(653,"td")(654,"td")(655,"td")(656,"td")(657,"td")(658,"td")(659,"td")(660,"td")(661,"td")(662,"td")(663,"td")(664,"td")(665,"td")(666,"td")(667,"td")(668,"td")(669,"td")(670,"td")(671,"td")(672,"td")(673,"td")(674,"td")(675,"td")(676,"td")(677,"td")(678,"td")(679,"td")(680,"td")(681,"td")(682,"td")(683,"td")(684,"td")(685,"td")(686,"td")(687,"td"),n(),i(688,"tr"),g(689,"td")(690,"td")(691,"td")(692,"td")(693,"td")(694,"td")(695,"td")(696,"td")(697,"td")(698,"td")(699,"td")(700,"td")(701,"td")(702,"td")(703,"td")(704,"td")(705,"td")(706,"td")(707,"td")(708,"td")(709,"td")(710,"td")(711,"td")(712,"td")(713,"td")(714,"td")(715,"td")(716,"td")(717,"td")(718,"td")(719,"td")(720,"td")(721,"td")(722,"td")(723,"td")(724,"td")(725,"td")(726,"td")(727,"td")(728,"td")(729,"td")(730,"td"),n(),i(731,"tr"),g(732,"td")(733,"td")(734,"td")(735,"td")(736,"td")(737,"td")(738,"td")(739,"td")(740,"td")(741,"td")(742,"td")(743,"td")(744,"td")(745,"td")(746,"td")(747,"td")(748,"td")(749,"td")(750,"td")(751,"td")(752,"td")(753,"td")(754,"td")(755,"td")(756,"td")(757,"td")(758,"td")(759,"td")(760,"td")(761,"td")(762,"td")(763,"td")(764,"td")(765,"td")(766,"td")(767,"td")(768,"td")(769,"td")(770,"td")(771,"td")(772,"td")(773,"td"),n(),i(774,"tr"),g(775,"td")(776,"td")(777,"td")(778,"td")(779,"td")(780,"td")(781,"td")(782,"td")(783,"td")(784,"td")(785,"td")(786,"td")(787,"td")(788,"td")(789,"td")(790,"td")(791,"td")(792,"td")(793,"td")(794,"td")(795,"td")(796,"td")(797,"td")(798,"td")(799,"td")(800,"td")(801,"td")(802,"td")(803,"td")(804,"td")(805,"td")(806,"td")(807,"td")(808,"td")(809,"td")(810,"td")(811,"td")(812,"td")(813,"td")(814,"td")(815,"td")(816,"td"),n(),i(817,"tr"),g(818,"td")(819,"td")(820,"td")(821,"td")(822,"td")(823,"td")(824,"td")(825,"td")(826,"td")(827,"td")(828,"td")(829,"td")(830,"td")(831,"td")(832,"td")(833,"td")(834,"td")(835,"td")(836,"td")(837,"td")(838,"td")(839,"td")(840,"td")(841,"td")(842,"td")(843,"td")(844,"td")(845,"td")(846,"td")(847,"td")(848,"td")(849,"td")(850,"td")(851,"td")(852,"td")(853,"td")(854,"td")(855,"td")(856,"td")(857,"td")(858,"td")(859,"td"),n(),i(860,"tr"),g(861,"td")(862,"td")(863,"td")(864,"td")(865,"td")(866,"td")(867,"td")(868,"td")(869,"td")(870,"td")(871,"td")(872,"td")(873,"td")(874,"td")(875,"td")(876,"td")(877,"td")(878,"td")(879,"td")(880,"td")(881,"td")(882,"td")(883,"td")(884,"td")(885,"td")(886,"td")(887,"td")(888,"td")(889,"td")(890,"td")(891,"td")(892,"td")(893,"td")(894,"td")(895,"td")(896,"td")(897,"td")(898,"td")(899,"td")(900,"td")(901,"td")(902,"td"),n(),i(903,"tr"),g(904,"td")(905,"td")(906,"td")(907,"td")(908,"td")(909,"td")(910,"td")(911,"td")(912,"td")(913,"td")(914,"td")(915,"td")(916,"td")(917,"td")(918,"td")(919,"td")(920,"td")(921,"td")(922,"td")(923,"td")(924,"td")(925,"td")(926,"td")(927,"td")(928,"td")(929,"td")(930,"td")(931,"td")(932,"td")(933,"td")(934,"td")(935,"td")(936,"td")(937,"td")(938,"td")(939,"td")(940,"td")(941,"td")(942,"td")(943,"td")(944,"td")(945,"td"),n(),i(946,"tr"),g(947,"td")(948,"td")(949,"td")(950,"td")(951,"td")(952,"td")(953,"td")(954,"td")(955,"td")(956,"td")(957,"td")(958,"td")(959,"td")(960,"td")(961,"td")(962,"td")(963,"td")(964,"td")(965,"td")(966,"td")(967,"td")(968,"td")(969,"td")(970,"td")(971,"td")(972,"td")(973,"td")(974,"td")(975,"td")(976,"td")(977,"td")(978,"td")(979,"td")(980,"td")(981,"td")(982,"td")(983,"td")(984,"td")(985,"td")(986,"td")(987,"td")(988,"td"),n(),i(989,"tr"),g(990,"td")(991,"td")(992,"td")(993,"td")(994,"td")(995,"td")(996,"td")(997,"td")(998,"td")(999,"td")(1e3,"td")(1001,"td")(1002,"td")(1003,"td")(1004,"td")(1005,"td")(1006,"td")(1007,"td")(1008,"td")(1009,"td")(1010,"td")(1011,"td")(1012,"td")(1013,"td")(1014,"td")(1015,"td")(1016,"td")(1017,"td")(1018,"td")(1019,"td")(1020,"td")(1021,"td")(1022,"td")(1023,"td")(1024,"td")(1025,"td")(1026,"td")(1027,"td")(1028,"td")(1029,"td")(1030,"td")(1031,"td"),n(),i(1032,"tr"),g(1033,"td")(1034,"td")(1035,"td")(1036,"td")(1037,"td")(1038,"td")(1039,"td")(1040,"td")(1041,"td")(1042,"td")(1043,"td")(1044,"td")(1045,"td")(1046,"td")(1047,"td")(1048,"td")(1049,"td")(1050,"td")(1051,"td")(1052,"td")(1053,"td")(1054,"td")(1055,"td")(1056,"td")(1057,"td")(1058,"td")(1059,"td")(1060,"td")(1061,"td")(1062,"td")(1063,"td")(1064,"td")(1065,"td")(1066,"td")(1067,"td")(1068,"td")(1069,"td")(1070,"td")(1071,"td")(1072,"td")(1073,"td")(1074,"td"),n(),i(1075,"tr"),g(1076,"td")(1077,"td")(1078,"td")(1079,"td")(1080,"td")(1081,"td")(1082,"td")(1083,"td")(1084,"td")(1085,"td")(1086,"td")(1087,"td")(1088,"td")(1089,"td")(1090,"td")(1091,"td")(1092,"td")(1093,"td")(1094,"td")(1095,"td")(1096,"td")(1097,"td")(1098,"td")(1099,"td")(1100,"td")(1101,"td")(1102,"td")(1103,"td")(1104,"td")(1105,"td")(1106,"td")(1107,"td")(1108,"td")(1109,"td")(1110,"td")(1111,"td")(1112,"td")(1113,"td")(1114,"td")(1115,"td")(1116,"td")(1117,"td"),n(),i(1118,"tr"),g(1119,"td")(1120,"td")(1121,"td")(1122,"td")(1123,"td")(1124,"td")(1125,"td")(1126,"td")(1127,"td")(1128,"td")(1129,"td")(1130,"td")(1131,"td")(1132,"td")(1133,"td")(1134,"td")(1135,"td")(1136,"td")(1137,"td")(1138,"td")(1139,"td")(1140,"td")(1141,"td")(1142,"td")(1143,"td")(1144,"td")(1145,"td")(1146,"td")(1147,"td")(1148,"td")(1149,"td")(1150,"td")(1151,"td")(1152,"td")(1153,"td")(1154,"td")(1155,"td")(1156,"td")(1157,"td")(1158,"td")(1159,"td")(1160,"td"),n(),i(1161,"tr"),g(1162,"td")(1163,"td")(1164,"td")(1165,"td")(1166,"td")(1167,"td")(1168,"td")(1169,"td")(1170,"td")(1171,"td")(1172,"td")(1173,"td")(1174,"td")(1175,"td")(1176,"td")(1177,"td")(1178,"td")(1179,"td")(1180,"td")(1181,"td")(1182,"td")(1183,"td")(1184,"td")(1185,"td")(1186,"td")(1187,"td")(1188,"td")(1189,"td")(1190,"td")(1191,"td")(1192,"td")(1193,"td")(1194,"td")(1195,"td")(1196,"td")(1197,"td")(1198,"td")(1199,"td")(1200,"td")(1201,"td")(1202,"td")(1203,"td"),n(),i(1204,"tr"),g(1205,"td")(1206,"td")(1207,"td")(1208,"td")(1209,"td")(1210,"td")(1211,"td")(1212,"td")(1213,"td")(1214,"td")(1215,"td")(1216,"td")(1217,"td")(1218,"td")(1219,"td")(1220,"td")(1221,"td")(1222,"td")(1223,"td")(1224,"td")(1225,"td")(1226,"td")(1227,"td")(1228,"td")(1229,"td")(1230,"td")(1231,"td")(1232,"td")(1233,"td")(1234,"td")(1235,"td")(1236,"td")(1237,"td")(1238,"td")(1239,"td")(1240,"td")(1241,"td")(1242,"td")(1243,"td")(1244,"td")(1245,"td")(1246,"td"),n(),i(1247,"tr"),g(1248,"td")(1249,"td")(1250,"td")(1251,"td")(1252,"td")(1253,"td")(1254,"td")(1255,"td")(1256,"td")(1257,"td")(1258,"td")(1259,"td")(1260,"td")(1261,"td")(1262,"td")(1263,"td")(1264,"td")(1265,"td")(1266,"td")(1267,"td")(1268,"td")(1269,"td")(1270,"td")(1271,"td")(1272,"td")(1273,"td")(1274,"td")(1275,"td")(1276,"td")(1277,"td")(1278,"td")(1279,"td")(1280,"td")(1281,"td")(1282,"td")(1283,"td")(1284,"td")(1285,"td")(1286,"td")(1287,"td")(1288,"td")(1289,"td"),n(),i(1290,"tr"),g(1291,"td")(1292,"td")(1293,"td")(1294,"td")(1295,"td")(1296,"td")(1297,"td")(1298,"td")(1299,"td")(1300,"td")(1301,"td")(1302,"td")(1303,"td")(1304,"td")(1305,"td")(1306,"td")(1307,"td")(1308,"td")(1309,"td")(1310,"td")(1311,"td")(1312,"td")(1313,"td")(1314,"td")(1315,"td")(1316,"td")(1317,"td")(1318,"td")(1319,"td")(1320,"td")(1321,"td")(1322,"td")(1323,"td")(1324,"td")(1325,"td")(1326,"td")(1327,"td")(1328,"td")(1329,"td")(1330,"td")(1331,"td")(1332,"td"),n())}var un=class a{constructor(t){this.http=t}selectedYear="";selectedLaboratory="";selectedCategory="";laboratories=[];years=[];categories=["Software","Hardware"];masterPlanData=null;equipmentList=[];groupedEquipment=[];currentYear=new Date().getFullYear();ngOnInit(){this.generateYears(),this.loadLaboratories()}generateYears(){let t=[];for(let e=this.currentYear;e>=this.currentYear-10;e--)t.push(e.toString());this.years=t,console.log("\u{1F4C5} Available years:",this.years)}getMaintenanceMark(t,e,r){if(!t||!t.monthlyData)return"";let o=t.monthlyData.find(s=>s.month===e);return!o||!o.maintenance?"":o.maintenance[r]==="X"?"X":""}onFilterChange(){console.log("\u{1F50D} Filter Changed"),console.log("\u{1F4C5} Selected Year:",this.selectedYear||"ALL"),console.log("\u{1F3E2} Selected Laboratory:",this.selectedLaboratory||"ALL"),console.log("\u{1F4C2} Selected Category:",this.selectedCategory||"ALL"),this.selectedYear&&this.selectedLaboratory?this.fetchMasterPlanData():console.warn("\u26A0\uFE0F Both year and laboratory must be selected to fetch data")}fetchMasterPlanData(){let t=`${ae.apiUrl}/reports/master-plan/annual`,e={year:this.selectedYear,laboratoryId:this.selectedLaboratory};console.log("\u{1F4E1} Fetching Master Plan data from:",t),console.log("\u{1F4CB} Query Parameters:",e),this.http.get(t,{params:e}).subscribe({next:r=>{console.log("\u2705 Master Plan Data Loaded:",r),console.table(r),this.masterPlanData=r;let o=r.equipmentMaintenances||[];this.selectedCategory?(this.equipmentList=o.filter(s=>s.equipment?.category===this.selectedCategory),console.log(`\u{1F50D} Filtered by category "${this.selectedCategory}":`,this.equipmentList.length,"items")):this.equipmentList=o,this.groupEquipment(),console.log("\u{1F4E6} Equipment List:",this.equipmentList),console.log("\u{1F522} Total Equipment:",this.equipmentList.length),console.log("\u{1F4CA} Grouped Equipment:",this.groupedEquipment)},error:r=>{console.error("\u274C Error fetching Master Plan data:",r)}})}groupEquipment(){let t=new Map;this.equipmentList.forEach(e=>{let r=`${e.equipment.equipmentName||""} ${e.equipment.specifications||""}`.trim();t.has(r)||t.set(r,[]),t.get(r)?.push(e)}),this.groupedEquipment=Array.from(t.entries()).map(([e,r])=>({displayName:e,equipment:r}))}getTotalPrice(){return this.equipmentList.reduce((t,e)=>{let r=parseFloat(e.equipment?.price)||0;return t+r},0)}getFunctionalCount(){if(!this.masterPlanData)return 0;let t=this.masterPlanData.totalEquipment||0,e=this.masterPlanData.underRepair||0;return t-e}loadLaboratories(){let t=`${ae.apiUrl}/laboratories`;console.log("\u{1F4E1} Fetching laboratories from:",t),this.http.get(t).subscribe({next:e=>{console.log("\u2705 Laboratories loaded:",e),this.laboratories=e||[],console.log("\u{1F4CA} Total laboratories:",this.laboratories.length)},error:e=>{console.error("\u274C Error loading laboratories:",e)}})}static \u0275fac=function(e){return new(e||a)(w(ye))};static \u0275cmp=I({type:a,selectors:[["app-masterplan"]],decls:143,vars:2,consts:[["start",""],["end",""],["styleClass","mb-4"],[1,"master-plan-container"],[1,"master-plan-split"],[1,"master-plan-section","particulars"],[1,"section-header"],[1,"pi","pi-list","mr-2"],[1,"table-wrapper"],[1,"particulars-table"],["rowspan","2"],["colspan","2"],[1,"master-plan-section","timeline"],[1,"pi","pi-wrench","mr-2"],[1,"maintenance-table"],["colspan","9",1,"inventory-header"],["colspan","9",1,"preventive-header"],["colspan","12",1,"corrective-header"],["colspan","12",1,"calibration-header"],[1,"inventory-header"],[1,"preventive-header"],[1,"corrective-header"],[1,"calibration-header"],[1,"flex","items-center","gap-2"],[1,"pi","pi-calendar","text-2xl",2,"color","#667eea"],[1,"text-xl","font-bold"],[1,"flex","items-center","gap-4"],[1,"font-semibold"],[1,"p-inputtext",2,"padding","8px 12px","border","1px solid #ccc","border-radius","4px",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["label","Print","icon","pi pi-print","severity","secondary",3,"outlined"],["label","Export","icon","pi pi-upload","severity","success",3,"outlined"],[3,"value"],[1,"item-row"],[2,"text-align","left","padding-left","16px"],[2,"color","#718096","font-size","0.85em"],[2,"color","#2f855a","font-weight","600"],[2,"background","#c6f6d5","color","#276749","padding","4px 12px","border-radius","12px","font-weight","600"],[2,"background","#fed7d7","color","#c53030","padding","4px 12px","border-radius","12px","font-weight","600"],[1,"sub-item"],[2,"text-align","left","padding-left","32px"],[1,"section-header-row"],["colspan","9"],[1,"pi","pi-tag","mr-2"],[1,"sub-item","red-text"],[2,"text-align","left","padding-left","48px"]],template:function(e,r){e&1&&(i(0,"p-toolbar",2),C(1,Wl,4,0,"ng-template",null,0,x)(3,zl,25,8,"ng-template",null,1,x),n(),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),g(9,"i",7),l(10," PARTICULARS "),n(),i(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th",10),l(16,"Name of Machine / Equipment / Instrument"),n(),i(17,"th",10),l(18,"Quantity"),n(),i(19,"th",10),l(20,"Acquired"),n(),i(21,"th",11),l(22,"Serial No."),n(),i(23,"th",10),l(24,"Location"),n(),i(25,"th",10),l(26,"Price"),n(),i(27,"th",10),l(28,"Functional"),n(),i(29,"th",10),l(30,"Under Repair"),n()(),i(31,"tr")(32,"th"),l(33,"Desktop"),n(),i(34,"th"),l(35,"MONITOR / CPU"),n()()(),i(36,"tbody"),ht(37,Zl,29,9)(38,es,297,0),n()()()(),i(39,"div",12)(40,"div",6),g(41,"i",13),l(42," TIMELINE "),n(),i(43,"div",8)(44,"table",14)(45,"thead")(46,"tr")(47,"th",15),l(48,"INVENTORY"),n(),i(49,"th",16),l(50,"PREVENTIVE"),n(),i(51,"th",17),l(52,"CORRECTIVE"),n(),i(53,"th",18),l(54,"CALIBRATION"),n()(),i(55,"tr")(56,"th",19),l(57,"APR"),n(),i(58,"th",19),l(59,"MAY"),n(),i(60,"th",19),l(61,"JUN"),n(),i(62,"th",19),l(63,"JUL"),n(),i(64,"th",19),l(65,"AUG"),n(),i(66,"th",19),l(67,"SEP"),n(),i(68,"th",19),l(69,"OCT"),n(),i(70,"th",19),l(71,"NOV"),n(),i(72,"th",19),l(73,"DEC"),n(),i(74,"th",20),l(75,"APR"),n(),i(76,"th",20),l(77,"MAY"),n(),i(78,"th",20),l(79,"JUN"),n(),i(80,"th",20),l(81,"JUL"),n(),i(82,"th",20),l(83,"AUG"),n(),i(84,"th",20),l(85,"SEP"),n(),i(86,"th",20),l(87,"OCT"),n(),i(88,"th",20),l(89,"NOV"),n(),i(90,"th",20),l(91,"DEC"),n(),i(92,"th",21),l(93,"JAN"),n(),i(94,"th",21),l(95,"FEB"),n(),i(96,"th",21),l(97,"MAR"),n(),i(98,"th",21),l(99,"APR"),n(),i(100,"th",21),l(101,"MAY"),n(),i(102,"th",21),l(103,"JUN"),n(),i(104,"th",21),l(105,"JUL"),n(),i(106,"th",21),l(107,"AUG"),n(),i(108,"th",21),l(109,"SEP"),n(),i(110,"th",21),l(111,"OCT"),n(),i(112,"th",21),l(113,"NOV"),n(),i(114,"th",21),l(115,"DEC"),n(),i(116,"th",22),l(117,"JAN"),n(),i(118,"th",22),l(119,"FEB"),n(),i(120,"th",22),l(121,"MAR"),n(),i(122,"th",22),l(123,"APR"),n(),i(124,"th",22),l(125,"MAY"),n(),i(126,"th",22),l(127,"JUN"),n(),i(128,"th",22),l(129,"JUL"),n(),i(130,"th",22),l(131,"AUG"),n(),i(132,"th",22),l(133,"SEP"),n(),i(134,"th",22),l(135,"OCT"),n(),i(136,"th",22),l(137,"NOV"),n(),i(138,"th",22),l(139,"DEC"),n()()(),i(140,"tbody"),ht(141,as,2,0)(142,ls,1333,0),n()()()()()()),e&2&&(d(37),bt(r.masterPlanData&&r.groupedEquipment.length>0?37:38),d(104),bt(r.masterPlanData&&r.equipmentList.length>0?141:142))},dependencies:[P,ot,B,O,D,V,lt,R,A,L,Hn,zn,$n,k,N,Fn],styles:["[_nghost-%COMP%]     .master-plan-container{display:flex;flex-direction:column;gap:20px}[_nghost-%COMP%]     .master-plan-split{display:flex;gap:8px;height:calc(100vh - 300px);min-height:600px}[_nghost-%COMP%]     .master-plan-section{background:var(--surface-card);border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;display:flex;flex-direction:column}[_nghost-%COMP%]     .master-plan-section.particulars{flex:0 0 50%}[_nghost-%COMP%]     .master-plan-section.timeline{flex:0 0 50%}[_nghost-%COMP%]     .section-header{background:var(--primary-color);color:var(--primary-contrast-color);padding:16px 24px;font-size:1.25rem;font-weight:600;text-align:center;flex-shrink:0}[_nghost-%COMP%]     .table-wrapper{overflow-x:auto;overflow-y:auto;padding:20px;background:var(--surface-ground);flex:1}[_nghost-%COMP%]     .table-wrapper::-webkit-scrollbar{height:10px;width:8px}[_nghost-%COMP%]     .table-wrapper::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}[_nghost-%COMP%]     .table-wrapper::-webkit-scrollbar-thumb{background:#888;border-radius:10px}[_nghost-%COMP%]     .table-wrapper::-webkit-scrollbar-thumb:hover{background:#555}[_nghost-%COMP%]     .particulars-table{width:100%;min-width:1200px;border-collapse:collapse;background:#fff;box-shadow:0 1px 3px #0000001a}[_nghost-%COMP%]     .particulars-table th, [_nghost-%COMP%]     .particulars-table td{border:1px solid #e0e0e0;padding:12px 8px;text-align:center;font-size:.9rem;white-space:nowrap}[_nghost-%COMP%]     .particulars-table th{background:var(--primary-color);font-weight:600;color:var(--primary-contrast-color);position:sticky;top:0;z-index:10}[_nghost-%COMP%]     .particulars-table thead tr:nth-child(2) th{top:37px}[_nghost-%COMP%]     .particulars-table th:first-child{min-width:250px;text-align:left}[_nghost-%COMP%]     .particulars-table .section-header-row{background:linear-gradient(90deg,#f7fafc,#edf2f7);text-align:left;font-weight:600;color:#2d3748}[_nghost-%COMP%]     .particulars-table .item-row{background:#fff;font-weight:600;transition:background .2s}[_nghost-%COMP%]     .particulars-table .item-row:hover{background:#f7fafc}[_nghost-%COMP%]     .particulars-table .sub-item{background:#fafafa;font-size:.85rem;color:#4a5568}[_nghost-%COMP%]     .particulars-table .sub-item:hover{background:#f0f0f0}[_nghost-%COMP%]     .particulars-table .red-text{color:#e53e3e;font-weight:500}[_nghost-%COMP%]     .maintenance-table{width:100%;min-width:3600px;border-collapse:collapse;background:#fff;box-shadow:0 1px 3px #0000001a}[_nghost-%COMP%]     .maintenance-table th, [_nghost-%COMP%]     .maintenance-table td{border:1px solid #cbd5e0;padding:10px;text-align:center;min-width:70px;font-size:.85rem}[_nghost-%COMP%]     .maintenance-table th{font-weight:600;color:#fff;position:sticky;top:0;z-index:10}[_nghost-%COMP%]     .maintenance-table .inventory-header{background:var(--primary-color)}[_nghost-%COMP%]     .maintenance-table .preventive-header{background:var(--primary-color)}[_nghost-%COMP%]     .maintenance-table .corrective-header{background:var(--primary-color)}[_nghost-%COMP%]     .maintenance-table .calibration-header{background:var(--primary-color)}[_nghost-%COMP%]     .maintenance-table tbody td{background:#fffbeb;height:32px;transition:all .2s;cursor:pointer;font-weight:500}[_nghost-%COMP%]     .maintenance-table tbody td:hover{background:#fef3c7;box-shadow:inset 0 0 0 2px #f59e0b}[_nghost-%COMP%]     .maintenance-table tbody tr:nth-child(2n) td{background:#fef9e7}[_nghost-%COMP%]     .maintenance-table tbody tr:nth-child(2n) td:hover{background:#fef3c7}@media (max-width: 1200px){[_nghost-%COMP%]     .master-plan-split{flex-direction:column;height:auto}[_nghost-%COMP%]     .master-plan-section.particulars{flex:0 0 auto}[_nghost-%COMP%]     .master-plan-section.timeline{flex:0 0 auto}}@media (max-width: 768px){[_nghost-%COMP%]     .section-header{font-size:1rem;padding:12px 16px}[_nghost-%COMP%]     .table-wrapper{padding:12px}[_nghost-%COMP%]     .particulars-table th, [_nghost-%COMP%]     .particulars-table td{padding:8px 6px;font-size:.8rem}[_nghost-%COMP%]     .maintenance-table th, [_nghost-%COMP%]     .maintenance-table td{min-width:60px;padding:8px;font-size:.75rem}}"]})};var ss=[{path:"users",component:Wt},{path:"campuses",component:qt},{path:"departments",component:$t},{path:"assetcategory",children:oi},{path:"maintenance/services",component:Xt},{path:"maintenance/status",component:en},{path:"maintenance/priority-level",component:tn},{path:"maintenance/types",component:nn},{path:"documentation",component:Kn},{path:"crud",component:Xn},{path:"requestmaintenance",component:ri},{path:"labschedule",component:rn},{path:"laboratories",component:Mt},{path:"laboratory/:id",component:Mt},{path:"masterplan",component:un},{path:"reports",component:dn},{path:"reports/preventive",component:cn},{path:"reports/corrective",component:mn},{path:"reports/calibration",component:pn},{path:"**",redirectTo:"/notfound"}],cu=ss;export{cu as default,ss as pageRoutes};
